// GENERATED TEAL                                                                                                                                                                                                                                                                //    PC      PYTEAL PATH                                                LINE    PYTEAL
#pragma version 9                                                                                                                                                                                                                                                                //    (0)     core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intcblock 0 1 9223372036854775808 1000000000000 1000 256 65536 4294967296 1000000000000000 1000000000 133                                                                                                                                                                        //    (1)
bytecblock 0x 0x63 0x71 0x69 0x70 0x66 0x73 0x62 0x6c 0x77 0x6f 0x6d 0x74 0xe80737cd 0x776f726d686f6c654465706f736974                                                                                                                                                            //    (48)
txn NumAppArgs                                                                                                                                                                                                                                                                   //    (96)    contracts_unified/core/main.py                             35      BareCallActions(update_application=OnCompleteAction.always(update()), delete_application=OnCompleteAction.always(delete()))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (98)
==                                                                                                                                                                                                                                                                               //    (99)
bnz main_l30                                                                                                                                                                                                                                                                     //    (100)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (103)   contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
pushbytes 0xc5b661d8 // "create(byte[8],byte[8],byte[4],address,address,address,address,address,uint64)void"                                                                                                                                                                     //    (106)
==                                                                                                                                                                                                                                                                               //    (112)
bnz main_l29                                                                                                                                                                                                                                                                     //    (113)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (116)   contracts_unified/core/methods/update_instrument.py        53      def update_instrument(info: UpdateInstrumentInfo, opup_budget: Amount) -> Expr:
pushbytes 0xd0e96ff3 // "update_instrument((uint8,uint64,uint16,uint16,uint16,uint16,uint16,uint64,uint64,uint64),uint64)void"                                                                                                                                                   //    (119)
==                                                                                                                                                                                                                                                                               //    (125)
bnz main_l28                                                                                                                                                                                                                                                                     //    (126)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (129)   contracts_unified/core/methods/update_parameter.py         33      def update_parameter(key_to_update: abi.DynamicBytes, updated_value: abi.DynamicBytes) -> Expr:
pushbytes 0xda73965d // "update_parameter(byte[],byte[])void"                                                                                                                                                                                                                    //    (132)
==                                                                                                                                                                                                                                                                               //    (138)
bnz main_l27                                                                                                                                                                                                                                                                     //    (139)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (142)   contracts_unified/core/methods/deposit.py                  71      def deposit(account: AccountAddress, deposit_txn: abi.Transaction, payload: DepositWord, instrument_id: InstrumentId, instant_pool_move: Amount, opup_budget: Amount) -> Expr:
pushbytes 0x71818e84 // "deposit(address,txn,byte[7],uint8,uint64,uint64)void"                                                                                                                                                                                                   //    (145)
==                                                                                                                                                                                                                                                                               //    (151)
bnz main_l26                                                                                                                                                                                                                                                                     //    (152)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (155)   contracts_unified/core/methods/wormhole_deposit.py         41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
pushbytes 0x6ed2f8a8 // "wormhole_deposit(appl,address,byte[7],uint8,uint64)void"                                                                                                                                                                                                //    (158)
==                                                                                                                                                                                                                                                                               //    (164)
bnz main_l25                                                                                                                                                                                                                                                                     //    (165)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (168)   contracts_unified/core/methods/pool_move.py                53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
pushbytes 0x6904886c // "pool_move(address,((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[]),((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[])[],byte[],uint64)void"                                                                     //    (171)
==                                                                                                                                                                                                                                                                               //    (177)
bnz main_l24                                                                                                                                                                                                                                                                     //    (178)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (181)   contracts_unified/core/methods/settle.py                   60      def add_order(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, opup_budget: Amount) -> Expr:
bytec 13 // "add_order(address,((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[]),((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[])[],uint64)void"                                                                                        //    (184)
==                                                                                                                                                                                                                                                                               //    (186)
bnz main_l23                                                                                                                                                                                                                                                                     //    (187)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (190)                                                              102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
pushbytes 0x05c23896 // "settle(appl,address,((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[]),((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[])[],(uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64),uint64)void"  //    (193)
==                                                                                                                                                                                                                                                                               //    (199)
bnz main_l22                                                                                                                                                                                                                                                                     //    (200)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (203)   contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
pushbytes 0x8ab80cb0 // "withdraw(address,((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[]),((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[])[],(uint64,uint64),uint64)void"                                                             //    (206)
==                                                                                                                                                                                                                                                                               //    (212)
bnz main_l21                                                                                                                                                                                                                                                                     //    (213)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (216)   contracts_unified/core/methods/portal_transfer.py          11      def portal_transfer(vaa: abi.DynamicBytes, *, output: abi.DynamicBytes) -> Expr:
pushbytes 0x903f4535 // "portal_transfer(byte[])byte[]"                                                                                                                                                                                                                          //    (219)
==                                                                                                                                                                                                                                                                               //    (225)
bnz main_l20                                                                                                                                                                                                                                                                     //    (226)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (229)   contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
pushbytes 0xabb4088e // "account_move(address,((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[]),((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[])[],byte[],uint64)void"                                                                  //    (232)
==                                                                                                                                                                                                                                                                               //    (238)
bnz main_l19                                                                                                                                                                                                                                                                     //    (239)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (242)   contracts_unified/core/methods/liquidate.py                89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
pushbytes 0x7716a1b3 // "liquidate(address,((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[]),((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[])[],byte[],uint64)void"                                                                     //    (245)
==                                                                                                                                                                                                                                                                               //    (251)
bnz main_l18                                                                                                                                                                                                                                                                     //    (252)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (255)   contracts_unified/core/methods/clean_orders.py             15      def clean_orders(orders: abi.DynamicArray[OrderData]) -> Expr:
pushbytes 0x6dd96ba8 // "clean_orders((byte,address,uint64,uint64,uint8,uint64,uint64,uint8,uint64,uint64)[])void"                                                                                                                                                               //    (258)
==                                                                                                                                                                                                                                                                               //    (264)
bnz main_l17                                                                                                                                                                                                                                                                     //    (265)
txna ApplicationArgs 0                                                                                                                                                                                                                                                           //    (268)   contracts_unified/core/methods/fund_mbr.py                 11      def fund_mbr(payment_txn: abi.PaymentTransaction) -> Expr:
pushbytes 0xd1474b5a // "fund_mbr(pay)void"                                                                                                                                                                                                                                      //    (271)
==                                                                                                                                                                                                                                                                               //    (277)
bnz main_l16                                                                                                                                                                                                                                                                     //    (278)
err                                                                                                                                                                                                                                                                              //    (281)   core_map.py                                                        CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
main_l16:                                                                                                                                                                                                                                                                        //            contracts_unified/core/methods/fund_mbr.py                         def fund_mbr(payment_txn: abi.PaymentTransaction) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (282)   contracts_unified/core/main.py                             119     CORE_ROUTER.add_method_handler(fund_mbr, 'fund_mbr', MethodConfig(no_op=CallConfig.CALL), 'Fund this contract minimum balance required')
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (284)
==                                                                                                                                                                                                                                                                               //    (285)
txn ApplicationID                                                                                                                                                                                                                                                                //    (286)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (288)
!=                                                                                                                                                                                                                                                                               //    (289)
&&                                                                                                                                                                                                                                                                               //    (290)
assert                                                                                                                                                                                                                                                                           //    (291)   contracts_unified/core/methods/fund_mbr.py                 11      def fund_mbr(payment_txn: abi.PaymentTransaction) -> Expr:
callsub fundmbrcaster_63                                                                                                                                                                                                                                                         //    (292)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (295)
return                                                                                                                                                                                                                                                                           //    (296)
main_l17:                                                                                                                                                                                                                                                                        //            contracts_unified/core/methods/clean_orders.py             15      def clean_orders(orders: abi.DynamicArray[OrderData]) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (297)   contracts_unified/core/main.py                             113     CORE_ROUTER.add_method_handler(clean_orders, 'clean_orders', MethodConfig(no_op=CallConfig.CALL), 'Clean expired orders from the order book')
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (299)
==                                                                                                                                                                                                                                                                               //    (300)
txn ApplicationID                                                                                                                                                                                                                                                                //    (301)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (303)
!=                                                                                                                                                                                                                                                                               //    (304)
&&                                                                                                                                                                                                                                                                               //    (305)
assert                                                                                                                                                                                                                                                                           //    (306)   contracts_unified/core/methods/clean_orders.py             15      def clean_orders(orders: abi.DynamicArray[OrderData]) -> Expr:
callsub cleanorderscaster_62                                                                                                                                                                                                                                                     //    (307)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (310)
return                                                                                                                                                                                                                                                                           //    (311)
main_l18:                                                                                                                                                                                                                                                                        //            contracts_unified/core/methods/liquidate.py                89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (312)   contracts_unified/core/main.py                             107     CORE_ROUTER.add_method_handler(liquidate, 'liquidate', MethodConfig(no_op=CallConfig.CALL), "Liquidate a user's account")
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (314)
==                                                                                                                                                                                                                                                                               //    (315)
txn ApplicationID                                                                                                                                                                                                                                                                //    (316)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (318)
!=                                                                                                                                                                                                                                                                               //    (319)
&&                                                                                                                                                                                                                                                                               //    (320)
assert                                                                                                                                                                                                                                                                           //    (321)   contracts_unified/core/methods/liquidate.py                89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
callsub liquidatecaster_61                                                                                                                                                                                                                                                       //    (322)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (325)
return                                                                                                                                                                                                                                                                           //    (326)
main_l19:                                                                                                                                                                                                                                                                        //            contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (327)   contracts_unified/core/main.py                             101     CORE_ROUTER.add_method_handler(account_move, 'account_move', MethodConfig(no_op=CallConfig.CALL), 'Moves funds between two accounts')
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (329)
==                                                                                                                                                                                                                                                                               //    (330)
txn ApplicationID                                                                                                                                                                                                                                                                //    (331)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (333)
!=                                                                                                                                                                                                                                                                               //    (334)
&&                                                                                                                                                                                                                                                                               //    (335)
assert                                                                                                                                                                                                                                                                           //    (336)   contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
callsub accountmovecaster_60                                                                                                                                                                                                                                                     //    (337)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (340)
return                                                                                                                                                                                                                                                                           //    (341)
main_l20:                                                                                                                                                                                                                                                                        //            contracts_unified/core/methods/portal_transfer.py          11      def portal_transfer(vaa: abi.DynamicBytes, *, output: abi.DynamicBytes) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (342)   contracts_unified/core/main.py                             95      CORE_ROUTER.add_method_handler(portal_transfer, 'portal_transfer', MethodConfig(no_op=CallConfig.CALL), 'Final transaction in a Wormhole deposit group to transfer control from Wormhole Core to CE')
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (344)
==                                                                                                                                                                                                                                                                               //    (345)
txn ApplicationID                                                                                                                                                                                                                                                                //    (346)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (348)
!=                                                                                                                                                                                                                                                                               //    (349)
&&                                                                                                                                                                                                                                                                               //    (350)
assert                                                                                                                                                                                                                                                                           //    (351)   contracts_unified/core/methods/portal_transfer.py          11      def portal_transfer(vaa: abi.DynamicBytes, *, output: abi.DynamicBytes) -> Expr:
callsub portaltransfercaster_59                                                                                                                                                                                                                                                  //    (352)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (355)
return                                                                                                                                                                                                                                                                           //    (356)
main_l21:                                                                                                                                                                                                                                                                        //            contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (357)   contracts_unified/core/main.py                             89      CORE_ROUTER.add_method_handler(withdraw, 'withdraw', MethodConfig(no_op=CallConfig.CALL), 'Withdraw funds from user account')
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (359)
==                                                                                                                                                                                                                                                                               //    (360)
txn ApplicationID                                                                                                                                                                                                                                                                //    (361)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (363)
!=                                                                                                                                                                                                                                                                               //    (364)
&&                                                                                                                                                                                                                                                                               //    (365)
assert                                                                                                                                                                                                                                                                           //    (366)   contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
callsub withdrawcaster_58                                                                                                                                                                                                                                                        //    (367)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (370)
return                                                                                                                                                                                                                                                                           //    (371)
main_l22:                                                                                                                                                                                                                                                                        //            contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (372)   contracts_unified/core/main.py                             83      CORE_ROUTER.add_method_handler(settle, 'settle', MethodConfig(no_op=CallConfig.CALL), 'Settle two orders')
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (374)
==                                                                                                                                                                                                                                                                               //    (375)
txn ApplicationID                                                                                                                                                                                                                                                                //    (376)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (378)
!=                                                                                                                                                                                                                                                                               //    (379)
&&                                                                                                                                                                                                                                                                               //    (380)
assert                                                                                                                                                                                                                                                                           //    (381)   contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
callsub settlecaster_57                                                                                                                                                                                                                                                          //    (382)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (385)
return                                                                                                                                                                                                                                                                           //    (386)
main_l23:                                                                                                                                                                                                                                                                        //                                                                       60      def add_order(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, opup_budget: Amount) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (387)   contracts_unified/core/main.py                             77      CORE_ROUTER.add_method_handler(add_order, 'add_order', MethodConfig(no_op=CallConfig.CALL), 'Add an order to the order book')
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (389)
==                                                                                                                                                                                                                                                                               //    (390)
txn ApplicationID                                                                                                                                                                                                                                                                //    (391)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (393)
!=                                                                                                                                                                                                                                                                               //    (394)
&&                                                                                                                                                                                                                                                                               //    (395)
assert                                                                                                                                                                                                                                                                           //    (396)   contracts_unified/core/methods/settle.py                   60      def add_order(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, opup_budget: Amount) -> Expr:
callsub addordercaster_56                                                                                                                                                                                                                                                        //    (397)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (400)
return                                                                                                                                                                                                                                                                           //    (401)
main_l24:                                                                                                                                                                                                                                                                        //            contracts_unified/core/methods/pool_move.py                53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (402)   contracts_unified/core/main.py                             71      CORE_ROUTER.add_method_handler(pool_move, 'pool_move', MethodConfig(no_op=CallConfig.CALL), 'Transfer instruments between user and pool')
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (404)
==                                                                                                                                                                                                                                                                               //    (405)
txn ApplicationID                                                                                                                                                                                                                                                                //    (406)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (408)
!=                                                                                                                                                                                                                                                                               //    (409)
&&                                                                                                                                                                                                                                                                               //    (410)
assert                                                                                                                                                                                                                                                                           //    (411)   contracts_unified/core/methods/pool_move.py                53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
callsub poolmovecaster_55                                                                                                                                                                                                                                                        //    (412)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (415)
return                                                                                                                                                                                                                                                                           //    (416)
main_l25:                                                                                                                                                                                                                                                                        //            contracts_unified/core/methods/wormhole_deposit.py         41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (417)   contracts_unified/core/main.py                             65      CORE_ROUTER.add_method_handler(wormhole_deposit, 'wormhole_deposit', MethodConfig(no_op=CallConfig.CALL), 'Deposit assets to user account via Wormhole')
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (419)
==                                                                                                                                                                                                                                                                               //    (420)
txn ApplicationID                                                                                                                                                                                                                                                                //    (421)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (423)
!=                                                                                                                                                                                                                                                                               //    (424)
&&                                                                                                                                                                                                                                                                               //    (425)
assert                                                                                                                                                                                                                                                                           //    (426)   contracts_unified/core/methods/wormhole_deposit.py         41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
callsub wormholedepositcaster_54                                                                                                                                                                                                                                                 //    (427)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (430)
return                                                                                                                                                                                                                                                                           //    (431)
main_l26:                                                                                                                                                                                                                                                                        //            contracts_unified/core/methods/deposit.py                  71      def deposit(account: AccountAddress, deposit_txn: abi.Transaction, payload: DepositWord, instrument_id: InstrumentId, instant_pool_move: Amount, opup_budget: Amount) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (432)   contracts_unified/core/main.py                             59      CORE_ROUTER.add_method_handler(deposit, 'deposit', MethodConfig(no_op=CallConfig.CALL), 'Deposit assets to user account')
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (434)
==                                                                                                                                                                                                                                                                               //    (435)
txn ApplicationID                                                                                                                                                                                                                                                                //    (436)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (438)
!=                                                                                                                                                                                                                                                                               //    (439)
&&                                                                                                                                                                                                                                                                               //    (440)
assert                                                                                                                                                                                                                                                                           //    (441)   contracts_unified/core/methods/deposit.py                  71      def deposit(account: AccountAddress, deposit_txn: abi.Transaction, payload: DepositWord, instrument_id: InstrumentId, instant_pool_move: Amount, opup_budget: Amount) -> Expr:
callsub depositcaster_53                                                                                                                                                                                                                                                         //    (442)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (445)
return                                                                                                                                                                                                                                                                           //    (446)
main_l27:                                                                                                                                                                                                                                                                        //            contracts_unified/core/methods/update_parameter.py         33      def update_parameter(key_to_update: abi.DynamicBytes, updated_value: abi.DynamicBytes) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (447)   contracts_unified/core/main.py                             53      CORE_ROUTER.add_method_handler(update_parameter, 'update_parameter', MethodConfig(no_op=CallConfig.CALL), 'Update a global parameter')
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (449)
==                                                                                                                                                                                                                                                                               //    (450)
txn ApplicationID                                                                                                                                                                                                                                                                //    (451)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (453)
!=                                                                                                                                                                                                                                                                               //    (454)
&&                                                                                                                                                                                                                                                                               //    (455)
assert                                                                                                                                                                                                                                                                           //    (456)   contracts_unified/core/methods/update_parameter.py         33      def update_parameter(key_to_update: abi.DynamicBytes, updated_value: abi.DynamicBytes) -> Expr:
callsub updateparametercaster_52                                                                                                                                                                                                                                                 //    (457)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (460)
return                                                                                                                                                                                                                                                                           //    (461)
main_l28:                                                                                                                                                                                                                                                                        //            contracts_unified/core/methods/update_instrument.py        53      def update_instrument(info: UpdateInstrumentInfo, opup_budget: Amount) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (462)   contracts_unified/core/main.py                             47      CORE_ROUTER.add_method_handler(update_instrument, 'update_instrument', MethodConfig(no_op=CallConfig.CALL), 'Add a new instrument (ASA) to the Core')
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (464)
==                                                                                                                                                                                                                                                                               //    (465)
txn ApplicationID                                                                                                                                                                                                                                                                //    (466)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (468)
!=                                                                                                                                                                                                                                                                               //    (469)
&&                                                                                                                                                                                                                                                                               //    (470)
assert                                                                                                                                                                                                                                                                           //    (471)   contracts_unified/core/methods/update_instrument.py        53      def update_instrument(info: UpdateInstrumentInfo, opup_budget: Amount) -> Expr:
callsub updateinstrumentcaster_51                                                                                                                                                                                                                                                //    (472)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (475)
return                                                                                                                                                                                                                                                                           //    (476)
main_l29:                                                                                                                                                                                                                                                                        //            contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
txn OnCompletion                                                                                                                                                                                                                                                                 //    (477)   contracts_unified/core/main.py                             41      CORE_ROUTER.add_method_handler(create, 'create', MethodConfig(no_op=CallConfig.CREATE), 'Create C3 Core contract')
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (479)
==                                                                                                                                                                                                                                                                               //    (480)
txn ApplicationID                                                                                                                                                                                                                                                                //    (481)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (483)
==                                                                                                                                                                                                                                                                               //    (484)
&&                                                                                                                                                                                                                                                                               //    (485)
assert                                                                                                                                                                                                                                                                           //    (486)   contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
callsub createcaster_50                                                                                                                                                                                                                                                          //    (487)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (490)
return                                                                                                                                                                                                                                                                           //    (491)
main_l30:                                                                                                                                                                                                                                                                        //            contracts_unified/core/main.py                             36      OnCompleteAction.always(update())
txn OnCompletion                                                                                                                                                                                                                                                                 //    (492)
pushint 4 // UpdateApplication                                                                                                                                                                                                                                                   //    (494)
==                                                                                                                                                                                                                                                                               //    (496)
bnz main_l34                                                                                                                                                                                                                                                                     //    (497)
txn OnCompletion                                                                                                                                                                                                                                                                 //    (500)                                                              37      OnCompleteAction.always(delete())
pushint 5 // DeleteApplication                                                                                                                                                                                                                                                   //    (502)
==                                                                                                                                                                                                                                                                               //    (504)
bnz main_l33                                                                                                                                                                                                                                                                     //    (505)
err                                                                                                                                                                                                                                                                              //    (508)                                                              35      BareCallActions(update_application=OnCompleteAction.always(update()), delete_application=OnCompleteAction.always(delete()))
main_l33:                                                                                                                                                                                                                                                                        //                                                                       37      OnCompleteAction.always(delete())
callsub delete_23                                                                                                                                                                                                                                                                //    (509)                                                                      delete()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (512)                                                                      OnCompleteAction.always(delete())
return                                                                                                                                                                                                                                                                           //    (513)
main_l34:                                                                                                                                                                                                                                                                        //                                                                       36      OnCompleteAction.always(update())
callsub update_22                                                                                                                                                                                                                                                                //    (514)                                                                      update()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (517)                                                                      OnCompleteAction.always(update())
return                                                                                                                                                                                                                                                                           //    (518)
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/state_handler/global_handler.py     104     def set_address(key, address) -> Expr:
// set_address                                                                                                                                                                                                                                                                   //
setaddress_0:                                                                                                                                                                                                                                                                    //
proto 2 0                                                                                                                                                                                                                                                                        //    (519)
frame_dig -1                                                                                                                                                                                                                                                                     //    (522)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
len                                                                                                                                                                                                                                                                              //    (524)   contracts_unified/core/state_handler/global_handler.py     108     Len(address)
pushint 32 // 32                                                                                                                                                                                                                                                                 //    (525)                                                                      Int(ADDRESS_SIZE)
==                                                                                                                                                                                                                                                                               //    (527)                                                                      Len(address) == Int(ADDRESS_SIZE)
assert                                                                                                                                                                                                                                                                           //    (528)                                                                      Assert(Len(address) == Int(ADDRESS_SIZE))
frame_dig -2                                                                                                                                                                                                                                                                     //    (529)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
frame_dig -1                                                                                                                                                                                                                                                                     //    (531)
app_global_put                                                                                                                                                                                                                                                                   //    (533)   contracts_unified/core/state_handler/global_handler.py     109     App.globalPut(key, address)
retsub                                                                                                                                                                                                                                                                           //    (534)                                                              104     def set_address(key, address) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       174     def ensure_mbr_fund() -> Expr:
// ensure_mbr_fund                                                                                                                                                                                                                                                               //
ensurembrfund_1:                                                                                                                                                                                                                                                                 //
proto 0 0                                                                                                                                                                                                                                                                        //    (535)
global CurrentApplicationAddress                                                                                                                                                                                                                                                 //    (538)                                                              177     Global.current_application_address()
min_balance                                                                                                                                                                                                                                                                      //    (540)                                                                      MinBalance(Global.current_application_address())
bytec 11 // "m"                                                                                                                                                                                                                                                                  //    (541)                                                              30      Bytes('m')
app_global_get                                                                                                                                                                                                                                                                   //    (543)                                                              177     App.globalGet(KEY_MBR_FUND)
<=                                                                                                                                                                                                                                                                               //    (544)                                                                      MinBalance(Global.current_application_address()) <= App.globalGet(KEY_MBR_FUND)
assert                                                                                                                                                                                                                                                                           //    (545)                                                                      Assert(MinBalance(Global.current_application_address()) <= App.globalGet(KEY_MBR_FUND))
retsub                                                                                                                                                                                                                                                                           //    (546)                                                              174     def ensure_mbr_fund() -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       202     def get_instrument(instrument_id: InstrumentId, *, output: InstrumentListElement) -> Expr:
// get_instrument                                                                                                                                                                                                                                                                //
getinstrument_2:                                                                                                                                                                                                                                                                 //
proto 1 1                                                                                                                                                                                                                                                                        //    (547)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (550)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
bytec_3 // "i"                                                                                                                                                                                                                                                                   //    (551)   contracts_unified/core/state_handler/global_handler.py     210     Bytes('i')
frame_dig -1                                                                                                                                                                                                                                                                     //    (552)                                                                      instrument_id.get()
pushint 78 // 78                                                                                                                                                                                                                                                                 //    (554)                                                                      Int(GlobalStateHandler.instrument_size)
*                                                                                                                                                                                                                                                                                //    (556)                                                                      instrument_id.get() * Int(GlobalStateHandler.instrument_size)
pushint 78 // 78                                                                                                                                                                                                                                                                 //    (557)                                                                      Int(GlobalStateHandler.instrument_size)
box_extract                                                                                                                                                                                                                                                                      //    (559)                                                                      App.box_extract(Bytes('i'), instrument_id.get() * Int(GlobalStateHandler.instrument_size), Int(GlobalStateHandler.instrument_size))
frame_bury 0                                                                                                                                                                                                                                                                     //    (560)                                                                      output.decode(App.box_extract(Bytes('i'), instrument_id.get() * Int(GlobalStateHandler.instrument_size), Int(GlobalStateHandler.instrument_size)))
retsub                                                                                                                                                                                                                                                                           //    (562)                                                              202     def get_instrument(instrument_id: InstrumentId, *, output: InstrumentListElement) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/state_handler/local_handler.py      39      def get_position(account: AccountAddress, instrument_id: InstrumentId, *, output: UserInstrumentData) -> Expr:
// get_position                                                                                                                                                                                                                                                                  //
getposition_3:                                                                                                                                                                                                                                                                   //
proto 2 1                                                                                                                                                                                                                                                                        //    (563)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (566)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (567)
frame_dig -1                                                                                                                                                                                                                                                                     //    (568)   contracts_unified/core/state_handler/local_handler.py      50      instrument_id.get()
pushint 24 // 24                                                                                                                                                                                                                                                                 //    (570)                                                                      Int(LocalStateHandler.position_size)
*                                                                                                                                                                                                                                                                                //    (572)                                                                      instrument_id.get() * Int(LocalStateHandler.position_size)
frame_bury 1                                                                                                                                                                                                                                                                     //    (573)                                                                      offset.set(instrument_id.get() * Int(LocalStateHandler.position_size))
frame_dig -2                                                                                                                                                                                                                                                                     //    (575)                                                              25      account.get()
box_get                                                                                                                                                                                                                                                                          //    (577)                                                                      App.box_get(account.get())
store 3                                                                                                                                                                                                                                                                          //    (578)
store 2                                                                                                                                                                                                                                                                          //    (580)
load 2                                                                                                                                                                                                                                                                           //    (582)                                                              27      box_contents.value()
len                                                                                                                                                                                                                                                                              //    (584)                                                                      Len(box_contents.value())
frame_dig 1                                                                                                                                                                                                                                                                      //    (585)                                                                      offset.get()
<=                                                                                                                                                                                                                                                                               //    (587)                                                                      Len(box_contents.value()) <= offset.get()
bz getposition_3_l2                                                                                                                                                                                                                                                              //    (588)                                                                      If(Len(box_contents.value()) <= offset.get())
frame_dig -2                                                                                                                                                                                                                                                                     //    (591)                                                              29      account.get()
box_del                                                                                                                                                                                                                                                                          //    (593)                                                                      App.box_delete(account.get())
pop                                                                                                                                                                                                                                                                              //    (594)                                                                      Pop(App.box_delete(account.get()))
frame_dig -2                                                                                                                                                                                                                                                                     //    (595)                                                              30      account.get()
frame_dig 1                                                                                                                                                                                                                                                                      //    (597)                                                                      offset.get()
pushint 24 // 24                                                                                                                                                                                                                                                                 //    (599)                                                                      Int(LocalStateHandler.position_size)
+                                                                                                                                                                                                                                                                                //    (601)                                                                      offset.get() + Int(LocalStateHandler.position_size)
box_create                                                                                                                                                                                                                                                                       //    (602)                                                                      App.box_create(account.get(), offset.get() + Int(LocalStateHandler.position_size))
pop                                                                                                                                                                                                                                                                              //    (603)                                                                      Pop(App.box_create(account.get(), offset.get() + Int(LocalStateHandler.position_size)))
frame_dig -2                                                                                                                                                                                                                                                                     //    (604)                                                              31      account.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (606)                                                                      Int(0)
load 2                                                                                                                                                                                                                                                                           //    (607)                                                                      box_contents.value()
box_replace                                                                                                                                                                                                                                                                      //    (609)                                                                      App.box_replace(account.get(), Int(0), box_contents.value())
callsub ensurembrfund_1                                                                                                                                                                                                                                                          //    (610)                                                              33      GlobalStateHandler.ensure_mbr_fund()
getposition_3_l2:                                                                                                                                                                                                                                                                //                                                                       27      If(Len(box_contents.value()) <= offset.get())
frame_dig -2                                                                                                                                                                                                                                                                     //    (613)                                                              56      account.get()
frame_dig 1                                                                                                                                                                                                                                                                      //    (615)                                                                      offset.get()
pushint 24 // 24                                                                                                                                                                                                                                                                 //    (617)                                                                      Int(LocalStateHandler.position_size)
box_extract                                                                                                                                                                                                                                                                      //    (619)                                                                      App.box_extract(account.get(), offset.get(), Int(LocalStateHandler.position_size))
frame_bury 0                                                                                                                                                                                                                                                                     //    (620)                                                                      output.decode(App.box_extract(account.get(), offset.get(), Int(LocalStateHandler.position_size)))
retsub                                                                                                                                                                                                                                                                           //    (622)                                                              39      def get_position(account: AccountAddress, instrument_id: InstrumentId, *, output: UserInstrumentData) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       67      def get_user_instrument_count(account: AccountAddress, *, output: abi.Uint64) -> Expr:
// get_user_instrument_count                                                                                                                                                                                                                                                     //
getuserinstrumentcount_4:                                                                                                                                                                                                                                                        //
proto 1 1                                                                                                                                                                                                                                                                        //    (623)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (626)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_dig -1                                                                                                                                                                                                                                                                     //    (627)   contracts_unified/core/state_handler/local_handler.py      70      account.get()
box_len                                                                                                                                                                                                                                                                          //    (629)                                                                      App.box_length(account.get())
store 11                                                                                                                                                                                                                                                                         //    (630)
pushint 24 // 24                                                                                                                                                                                                                                                                 //    (632)                                                              71      Int(LocalStateHandler.position_size)
/                                                                                                                                                                                                                                                                                //    (634)                                                                      box_length.value() / Int(LocalStateHandler.position_size)
frame_bury 0                                                                                                                                                                                                                                                                     //    (635)                                                                      output.set(box_length.value() / Int(LocalStateHandler.position_size))
frame_dig 0                                                                                                                                                                                                                                                                      //    (637)                                                              72      output.get()
bytec_1 // "c"                                                                                                                                                                                                                                                                   //    (639)   contracts_unified/core/state_handler/global_handler.py     29      Bytes('c')
app_global_get                                                                                                                                                                                                                                                                   //    (640)                                                              70      App.globalGet(KEY_INSTRUMENT_COUNT)
>                                                                                                                                                                                                                                                                                //    (641)   contracts_unified/core/state_handler/local_handler.py      72      output.get() > GlobalStateHandler.get_instrument_count()
bz getuserinstrumentcount_4_l2                                                                                                                                                                                                                                                   //    (642)                                                                      If(output.get() > GlobalStateHandler.get_instrument_count())
bytec_1 // "c"                                                                                                                                                                                                                                                                   //    (645)   contracts_unified/core/state_handler/global_handler.py     29      Bytes('c')
app_global_get                                                                                                                                                                                                                                                                   //    (646)                                                              70      App.globalGet(KEY_INSTRUMENT_COUNT)
frame_bury 0                                                                                                                                                                                                                                                                     //    (647)   contracts_unified/core/state_handler/local_handler.py      73      output.set(GlobalStateHandler.get_instrument_count())
getuserinstrumentcount_4_l2:                                                                                                                                                                                                                                                     //                                                                       72      If(output.get() > GlobalStateHandler.get_instrument_count())
retsub                                                                                                                                                                                                                                                                           //    (649)                                                              67      def get_user_instrument_count(account: AccountAddress, *, output: abi.Uint64) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/library/math.py                          21      def unsigned_min(lhs: Expr, rhs: Expr) -> Expr:
// unsigned_min                                                                                                                                                                                                                                                                  //
unsignedmin_5:                                                                                                                                                                                                                                                                   //
proto 2 1                                                                                                                                                                                                                                                                        //    (650)
frame_dig -2                                                                                                                                                                                                                                                                     //    (653)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
frame_dig -1                                                                                                                                                                                                                                                                     //    (655)
<                                                                                                                                                                                                                                                                                //    (657)   contracts_unified/library/math.py                          23      lhs < rhs
bnz unsignedmin_5_l2                                                                                                                                                                                                                                                             //    (658)                                                                      If(lhs < rhs, lhs, rhs)
frame_dig -1                                                                                                                                                                                                                                                                     //    (661)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
b unsignedmin_5_l3                                                                                                                                                                                                                                                               //    (663)   contracts_unified/library/math.py                          23      If(lhs < rhs, lhs, rhs)
unsignedmin_5_l2:                                                                                                                                                                                                                                                                //
frame_dig -2                                                                                                                                                                                                                                                                     //    (666)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
unsignedmin_5_l3:                                                                                                                                                                                                                                                                //            contracts_unified/library/math.py                          23      If(lhs < rhs, lhs, rhs)
retsub                                                                                                                                                                                                                                                                           //    (668)                                                              21      def unsigned_min(lhs: Expr, rhs: Expr) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       33      def teal_expt(base: InterestRate, raised_to: abi.Uint64, *, output: InterestRate) -> Expr:
// teal_expt                                                                                                                                                                                                                                                                     //
tealexpt_6:                                                                                                                                                                                                                                                                      //
proto 2 1                                                                                                                                                                                                                                                                        //    (669)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (672)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (673)   contracts_unified/library/math.py                          33      def teal_expt(base: InterestRate, raised_to: abi.Uint64, *, output: InterestRate) -> Expr:
frame_dig -2                                                                                                                                                                                                                                                                     //    (674)                                                              44      power.set(base)
frame_bury 1                                                                                                                                                                                                                                                                     //    (676)
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (678)                                                              45      Int(RATE_ONE)
frame_bury 0                                                                                                                                                                                                                                                                     //    (679)                                                                      output.set(Int(RATE_ONE))
tealexpt_6_l1:                                                                                                                                                                                                                                                                   //                                                                       47      While(raised_to.get() > Int(0))
frame_dig -1                                                                                                                                                                                                                                                                     //    (681)                                                                      raised_to.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (683)                                                                      Int(0)
>                                                                                                                                                                                                                                                                                //    (684)                                                                      raised_to.get() > Int(0)
bz tealexpt_6_l5                                                                                                                                                                                                                                                                 //    (685)                                                                      While(raised_to.get() > Int(0))
frame_dig -1                                                                                                                                                                                                                                                                     //    (688)                                                              48      raised_to.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (690)                                                                      Int(1)
&                                                                                                                                                                                                                                                                                //    (691)                                                                      raised_to.get() & Int(1)
bnz tealexpt_6_l4                                                                                                                                                                                                                                                                //    (692)                                                                      If(raised_to.get() & Int(1))
tealexpt_6_l3:                                                                                                                                                                                                                                                                   //                                                                       47      While(raised_to.get() > Int(0))
frame_dig 1                                                                                                                                                                                                                                                                      //    (695)                                                              50      power.get()
frame_dig 1                                                                                                                                                                                                                                                                      //    (697)                                                                      power.get()
mulw                                                                                                                                                                                                                                                                             //    (699)                                                                      WideRatio([power.get(), power.get()], [Int(RATE_ONE)])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (700)
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (701)                                                                      Int(RATE_ONE)
divmodw                                                                                                                                                                                                                                                                          //    (702)                                                                      WideRatio([power.get(), power.get()], [Int(RATE_ONE)])
pop                                                                                                                                                                                                                                                                              //    (703)
pop                                                                                                                                                                                                                                                                              //    (704)
swap                                                                                                                                                                                                                                                                             //    (705)
!                                                                                                                                                                                                                                                                                //    (706)
assert                                                                                                                                                                                                                                                                           //    (707)
frame_bury 1                                                                                                                                                                                                                                                                     //    (708)                                                                      power.set(WideRatio([power.get(), power.get()], [Int(RATE_ONE)]))
frame_dig -1                                                                                                                                                                                                                                                                     //    (710)                                                              51      raised_to.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (712)                                                                      Int(1)
shr                                                                                                                                                                                                                                                                              //    (713)                                                                      raised_to.get() >> Int(1)
frame_bury -1                                                                                                                                                                                                                                                                    //    (714)                                                                      raised_to.set(raised_to.get() >> Int(1))
b tealexpt_6_l1                                                                                                                                                                                                                                                                  //    (716)                                                              47      While(raised_to.get() > Int(0))
tealexpt_6_l4:                                                                                                                                                                                                                                                                   //                                                                       48      If(raised_to.get() & Int(1))
frame_dig 0                                                                                                                                                                                                                                                                      //    (719)                                                              49      output.get()
frame_dig 1                                                                                                                                                                                                                                                                      //    (721)                                                                      power.get()
mulw                                                                                                                                                                                                                                                                             //    (723)                                                                      WideRatio([output.get(), power.get()], [Int(RATE_ONE)])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (724)
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (725)                                                                      Int(RATE_ONE)
divmodw                                                                                                                                                                                                                                                                          //    (726)                                                                      WideRatio([output.get(), power.get()], [Int(RATE_ONE)])
pop                                                                                                                                                                                                                                                                              //    (727)
pop                                                                                                                                                                                                                                                                              //    (728)
swap                                                                                                                                                                                                                                                                             //    (729)
!                                                                                                                                                                                                                                                                                //    (730)
assert                                                                                                                                                                                                                                                                           //    (731)
frame_bury 0                                                                                                                                                                                                                                                                     //    (732)                                                                      output.set(WideRatio([output.get(), power.get()], [Int(RATE_ONE)]))
b tealexpt_6_l3                                                                                                                                                                                                                                                                  //    (734)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
tealexpt_6_l5:                                                                                                                                                                                                                                                                   //            contracts_unified/library/math.py                          47      While(raised_to.get() > Int(0))
retsub                                                                                                                                                                                                                                                                           //    (737)                                                              33      def teal_expt(base: InterestRate, raised_to: abi.Uint64, *, output: InterestRate) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/library/signed_math.py                   25      def signed_neg(value: Expr) -> Expr:
// signed_neg                                                                                                                                                                                                                                                                    //
signedneg_7:                                                                                                                                                                                                                                                                     //
proto 1 1                                                                                                                                                                                                                                                                        //    (738)
frame_dig -1                                                                                                                                                                                                                                                                     //    (741)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
!                                                                                                                                                                                                                                                                                //    (743)   contracts_unified/library/signed_math.py                   28      Not(value)
bnz signedneg_7_l2                                                                                                                                                                                                                                                               //    (744)                                                                      If(Not(value), value, ~value + Int(1))
frame_dig -1                                                                                                                                                                                                                                                                     //    (747)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
~                                                                                                                                                                                                                                                                                //    (749)   contracts_unified/library/signed_math.py                   28      ~value
intc_1 // 1                                                                                                                                                                                                                                                                      //    (750)                                                                      Int(1)
+                                                                                                                                                                                                                                                                                //    (751)                                                                      ~value + Int(1)
b signedneg_7_l3                                                                                                                                                                                                                                                                 //    (752)                                                                      If(Not(value), value, ~value + Int(1))
signedneg_7_l2:                                                                                                                                                                                                                                                                  //
frame_dig -1                                                                                                                                                                                                                                                                     //    (755)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
signedneg_7_l3:                                                                                                                                                                                                                                                                  //            contracts_unified/library/signed_math.py                   28      If(Not(value), value, ~value + Int(1))
retsub                                                                                                                                                                                                                                                                           //    (757)                                                              25      def signed_neg(value: Expr) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       31      def signed_abs(value: Expr) -> Expr:
// signed_abs                                                                                                                                                                                                                                                                    //
signedabs_8:                                                                                                                                                                                                                                                                     //
proto 1 1                                                                                                                                                                                                                                                                        //    (758)
frame_dig -1                                                                                                                                                                                                                                                                     //    (761)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (763)   contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (764)                                                                      value & Int(9223372036854775808)
bnz signedabs_8_l2                                                                                                                                                                                                                                                               //    (765)                                                              33      If(signed_ltz(value), signed_neg(value), value)
frame_dig -1                                                                                                                                                                                                                                                                     //    (768)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
b signedabs_8_l3                                                                                                                                                                                                                                                                 //    (770)   contracts_unified/library/signed_math.py                   33      If(signed_ltz(value), signed_neg(value), value)
signedabs_8_l2:                                                                                                                                                                                                                                                                  //
frame_dig -1                                                                                                                                                                                                                                                                     //    (773)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
callsub signedneg_7                                                                                                                                                                                                                                                              //    (775)   contracts_unified/library/signed_math.py                   33      signed_neg(value)
signedabs_8_l3:                                                                                                                                                                                                                                                                  //                                                                               If(signed_ltz(value), signed_neg(value), value)
retsub                                                                                                                                                                                                                                                                           //    (778)                                                              31      def signed_abs(value: Expr) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       37      def signed_add(lhs: Expr, rhs: Expr) -> Expr:
// signed_add                                                                                                                                                                                                                                                                    //
signedadd_9:                                                                                                                                                                                                                                                                     //
proto 2 1                                                                                                                                                                                                                                                                        //    (779)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (782)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_dig -2                                                                                                                                                                                                                                                                     //    (783)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
frame_dig -1                                                                                                                                                                                                                                                                     //    (785)
addw                                                                                                                                                                                                                                                                             //    (787)   contracts_unified/library/signed_math.py                   39      MultiValue(Op.addw, [TealType.uint64, TealType.uint64], args=[lhs, rhs])
store 5                                                                                                                                                                                                                                                                          //    (788)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
store 4                                                                                                                                                                                                                                                                          //    (790)
frame_dig -2                                                                                                                                                                                                                                                                     //    (792)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (794)   contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (795)                                                                      value & Int(9223372036854775808)
frame_bury 0                                                                                                                                                                                                                                                                     //    (796)                                                              49      (signed := abi.Uint64()).set(signed_ltz(lhs))
frame_dig 0                                                                                                                                                                                                                                                                      //    (798)                                                              53      signed.get()
frame_dig -1                                                                                                                                                                                                                                                                     //    (800)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (802)   contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (803)                                                                      value & Int(9223372036854775808)
!=                                                                                                                                                                                                                                                                               //    (804)                                                              53      signed.get() != signed_ltz(rhs)
frame_dig 0                                                                                                                                                                                                                                                                      //    (805)                                                              54      signed.get()
load 5                                                                                                                                                                                                                                                                           //    (807)                                                                      add_result.output_slots[1].load()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (809)                                                              22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (810)                                                                      value & Int(9223372036854775808)
==                                                                                                                                                                                                                                                                               //    (811)                                                              54      signed.get() == signed_ltz(add_result.output_slots[1].load())
||                                                                                                                                                                                                                                                                               //    (812)                                                              52      Or(signed.get() != signed_ltz(rhs), signed.get() == signed_ltz(add_result.output_slots[1].load()))
assert                                                                                                                                                                                                                                                                           //    (813)                                                              51      Assert(Or(signed.get() != signed_ltz(rhs), signed.get() == signed_ltz(add_result.output_slots[1].load())))
load 5                                                                                                                                                                                                                                                                           //    (814)                                                              57      add_result.output_slots[1].load()
frame_bury 0                                                                                                                                                                                                                                                                     //    (816)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
retsub                                                                                                                                                                                                                                                                           //    (818)   contracts_unified/library/signed_math.py                   37      def signed_add(lhs: Expr, rhs: Expr) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       61      def signed_sub(lhs: Expr, rhs: Expr) -> Expr:
// signed_sub                                                                                                                                                                                                                                                                    //
signedsub_10:                                                                                                                                                                                                                                                                    //
proto 2 1                                                                                                                                                                                                                                                                        //    (819)
frame_dig -2                                                                                                                                                                                                                                                                     //    (822)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
frame_dig -1                                                                                                                                                                                                                                                                     //    (824)
callsub signedneg_7                                                                                                                                                                                                                                                              //    (826)   contracts_unified/library/signed_math.py                   63      signed_neg(rhs)
callsub signedadd_9                                                                                                                                                                                                                                                              //    (829)                                                                      signed_add(lhs, signed_neg(rhs))
retsub                                                                                                                                                                                                                                                                           //    (832)                                                              61      def signed_sub(lhs: Expr, rhs: Expr) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       67      def signed_gte(lhs: Expr, rhs: Expr) -> Expr:
// signed_gte                                                                                                                                                                                                                                                                    //
signedgte_11:                                                                                                                                                                                                                                                                    //
proto 2 1                                                                                                                                                                                                                                                                        //    (833)
frame_dig -2                                                                                                                                                                                                                                                                     //    (836)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (838)   contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (839)                                                                      value & Int(9223372036854775808)
bnz signedgte_11_l4                                                                                                                                                                                                                                                              //    (840)                                                              70      If(signed_ltz(lhs))
frame_dig -1                                                                                                                                                                                                                                                                     //    (843)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (845)   contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (846)                                                                      value & Int(9223372036854775808)
bnz signedgte_11_l3                                                                                                                                                                                                                                                              //    (847)                                                              72      If(signed_ltz(rhs), Int(1), lhs >= rhs)
frame_dig -2                                                                                                                                                                                                                                                                     //    (850)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
frame_dig -1                                                                                                                                                                                                                                                                     //    (852)
>=                                                                                                                                                                                                                                                                               //    (854)   contracts_unified/library/signed_math.py                   72      lhs >= rhs
b signedgte_11_l7                                                                                                                                                                                                                                                                //    (855)                                                                      If(signed_ltz(rhs), Int(1), lhs >= rhs)
signedgte_11_l3:                                                                                                                                                                                                                                                                 //
intc_1 // 1                                                                                                                                                                                                                                                                      //    (858)                                                                      Int(1)
b signedgte_11_l7                                                                                                                                                                                                                                                                //    (859)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
signedgte_11_l4:                                                                                                                                                                                                                                                                 //            contracts_unified/library/signed_math.py                   71      If(signed_ltz(rhs), lhs >= rhs, Int(0))
frame_dig -1                                                                                                                                                                                                                                                                     //    (862)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (864)   contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (865)                                                                      value & Int(9223372036854775808)
bnz signedgte_11_l6                                                                                                                                                                                                                                                              //    (866)                                                              71      If(signed_ltz(rhs), lhs >= rhs, Int(0))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (869)                                                                      Int(0)
b signedgte_11_l7                                                                                                                                                                                                                                                                //    (870)                                                                      If(signed_ltz(rhs), lhs >= rhs, Int(0))
signedgte_11_l6:                                                                                                                                                                                                                                                                 //
frame_dig -2                                                                                                                                                                                                                                                                     //    (873)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
frame_dig -1                                                                                                                                                                                                                                                                     //    (875)
>=                                                                                                                                                                                                                                                                               //    (877)   contracts_unified/library/signed_math.py                   71      lhs >= rhs
signedgte_11_l7:                                                                                                                                                                                                                                                                 //                                                                       72      If(signed_ltz(rhs), Int(1), lhs >= rhs)
retsub                                                                                                                                                                                                                                                                           //    (878)                                                              67      def signed_gte(lhs: Expr, rhs: Expr) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       77      def signed_min(lhs: Expr, rhs: Expr) -> Expr:
// signed_min                                                                                                                                                                                                                                                                    //
signedmin_12:                                                                                                                                                                                                                                                                    //
proto 2 1                                                                                                                                                                                                                                                                        //    (879)
frame_dig -2                                                                                                                                                                                                                                                                     //    (882)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
frame_dig -1                                                                                                                                                                                                                                                                     //    (884)
callsub signedgte_11                                                                                                                                                                                                                                                             //    (886)   contracts_unified/library/signed_math.py                   79      signed_gte(lhs, rhs)
bnz signedmin_12_l2                                                                                                                                                                                                                                                              //    (889)                                                                      If(signed_gte(lhs, rhs), rhs, lhs)
frame_dig -2                                                                                                                                                                                                                                                                     //    (892)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
b signedmin_12_l3                                                                                                                                                                                                                                                                //    (894)   contracts_unified/library/signed_math.py                   79      If(signed_gte(lhs, rhs), rhs, lhs)
signedmin_12_l2:                                                                                                                                                                                                                                                                 //
frame_dig -1                                                                                                                                                                                                                                                                     //    (897)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
signedmin_12_l3:                                                                                                                                                                                                                                                                 //            contracts_unified/library/signed_math.py                   79      If(signed_gte(lhs, rhs), rhs, lhs)
retsub                                                                                                                                                                                                                                                                           //    (899)                                                              77      def signed_min(lhs: Expr, rhs: Expr) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       83      def signed_max(lhs: Expr, rhs: Expr) -> Expr:
// signed_max                                                                                                                                                                                                                                                                    //
signedmax_13:                                                                                                                                                                                                                                                                    //
proto 2 1                                                                                                                                                                                                                                                                        //    (900)
frame_dig -2                                                                                                                                                                                                                                                                     //    (903)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
frame_dig -1                                                                                                                                                                                                                                                                     //    (905)
callsub signedgte_11                                                                                                                                                                                                                                                             //    (907)   contracts_unified/library/signed_math.py                   85      signed_gte(lhs, rhs)
bnz signedmax_13_l2                                                                                                                                                                                                                                                              //    (910)                                                                      If(signed_gte(lhs, rhs), lhs, rhs)
frame_dig -1                                                                                                                                                                                                                                                                     //    (913)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
b signedmax_13_l3                                                                                                                                                                                                                                                                //    (915)   contracts_unified/library/signed_math.py                   85      If(signed_gte(lhs, rhs), lhs, rhs)
signedmax_13_l2:                                                                                                                                                                                                                                                                 //
frame_dig -2                                                                                                                                                                                                                                                                     //    (918)   contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
signedmax_13_l3:                                                                                                                                                                                                                                                                 //            contracts_unified/library/signed_math.py                   85      If(signed_gte(lhs, rhs), lhs, rhs)
retsub                                                                                                                                                                                                                                                                           //    (920)                                                              83      def signed_max(lhs: Expr, rhs: Expr) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
// perform_pool_move                                                                                                                                                                                                                                                             //
performpoolmove_14:                                                                                                                                                                                                                                                              //
proto 3 0                                                                                                                                                                                                                                                                        //    (921)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (924)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 19                                                                                                                                                                                                                                                                          //    (925)   contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (927)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (928)
dupn 14                                                                                                                                                                                                                                                                          //    (929)   contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (931)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (932)   contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (933)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 3                                                                                                                                                                                                                                                                           //    (934)   contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (936)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (937)   contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (938)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (939)   contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (940)   core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (941)   contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
frame_dig -2                                                                                                                                                                                                                                                                     //    (942)   contracts_unified/core/state_handler/global_handler.py     202     def get_instrument(instrument_id: InstrumentId, *, output: InstrumentListElement) -> Expr:
callsub getinstrument_2                                                                                                                                                                                                                                                          //    (944)   contracts_unified/core/internal/perform_pool_move.py       153     GlobalStateHandler.get_instrument(instrument_id)
frame_bury 36                                                                                                                                                                                                                                                                    //    (947)                                                                      instrument_state.set(cast(abi.ReturnedValue, GlobalStateHandler.get_instrument(instrument_id)))
frame_dig 36                                                                                                                                                                                                                                                                     //    (949)                                                              155     instrument_state.asset_id.store_into(asset_id)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (951)
extract_uint64                                                                                                                                                                                                                                                                   //    (952)
frame_bury 10                                                                                                                                                                                                                                                                    //    (953)
frame_dig 36                                                                                                                                                                                                                                                                     //    (955)                                                              157     instrument_state.last_update_time.store_into(old_pool_last_update_time)
pushint 16 // 16                                                                                                                                                                                                                                                                 //    (957)
extract_uint32                                                                                                                                                                                                                                                                   //    (959)
frame_bury 1                                                                                                                                                                                                                                                                     //    (960)
frame_dig 36                                                                                                                                                                                                                                                                     //    (962)                                                              158     instrument_state.borrowed.store_into(old_pool_borrowed)
pushint 62 // 62                                                                                                                                                                                                                                                                 //    (964)
extract_uint64                                                                                                                                                                                                                                                                   //    (966)
frame_bury 3                                                                                                                                                                                                                                                                     //    (967)
frame_dig 36                                                                                                                                                                                                                                                                     //    (969)                                                              159     instrument_state.liquidity.store_into(old_pool_liquidity)
pushint 70 // 70                                                                                                                                                                                                                                                                 //    (971)
extract_uint64                                                                                                                                                                                                                                                                   //    (973)
frame_bury 5                                                                                                                                                                                                                                                                     //    (974)
frame_dig 36                                                                                                                                                                                                                                                                     //    (976)                                                              160     instrument_state.borrow_index.store_into(old_pool_borrow_index)
pushint 20 // 20                                                                                                                                                                                                                                                                 //    (978)
extract_uint64                                                                                                                                                                                                                                                                   //    (980)
frame_bury 7                                                                                                                                                                                                                                                                     //    (981)
frame_dig 36                                                                                                                                                                                                                                                                     //    (983)                                                              161     instrument_state.lend_index.store_into(old_pool_lend_index)
pushint 28 // 28                                                                                                                                                                                                                                                                 //    (985)
extract_uint64                                                                                                                                                                                                                                                                   //    (987)
frame_bury 9                                                                                                                                                                                                                                                                     //    (988)
frame_dig 36                                                                                                                                                                                                                                                                     //    (990)                                                              164     instrument_state.optimal_utilization.store_into(optimal_utilization_ratio)
pushint 36 // 36                                                                                                                                                                                                                                                                 //    (992)
extract_uint16                                                                                                                                                                                                                                                                   //    (994)
frame_bury 15                                                                                                                                                                                                                                                                    //    (995)
frame_dig 15                                                                                                                                                                                                                                                                     //    (997)                                                              165     optimal_utilization_ratio.get()
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (999)                                                                      Int(RATE_ONE)
mulw                                                                                                                                                                                                                                                                             //    (1000)                                                                     WideRatio([optimal_utilization_ratio.get(), Int(RATE_ONE)], [Int(RATIO_ONE)])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1001)
intc 4 // 1000                                                                                                                                                                                                                                                                   //    (1002)                                                                     Int(RATIO_ONE)
divmodw                                                                                                                                                                                                                                                                          //    (1004)                                                                     WideRatio([optimal_utilization_ratio.get(), Int(RATE_ONE)], [Int(RATIO_ONE)])
pop                                                                                                                                                                                                                                                                              //    (1005)
pop                                                                                                                                                                                                                                                                              //    (1006)
swap                                                                                                                                                                                                                                                                             //    (1007)
!                                                                                                                                                                                                                                                                                //    (1008)
assert                                                                                                                                                                                                                                                                           //    (1009)
frame_bury 16                                                                                                                                                                                                                                                                    //    (1010)                                                                     optimal_utilization_rate.set(WideRatio([optimal_utilization_ratio.get(), Int(RATE_ONE)], [Int(RATIO_ONE)]))
frame_dig 36                                                                                                                                                                                                                                                                     //    (1012)                                                             166     instrument_state.min_rate.store_into(min_rate)
pushint 38 // 38                                                                                                                                                                                                                                                                 //    (1014)
extract_uint64                                                                                                                                                                                                                                                                   //    (1016)
frame_bury 17                                                                                                                                                                                                                                                                    //    (1017)
frame_dig 36                                                                                                                                                                                                                                                                     //    (1019)                                                             167     instrument_state.opt_rate.store_into(opt_rate)
pushint 46 // 46                                                                                                                                                                                                                                                                 //    (1021)
extract_uint64                                                                                                                                                                                                                                                                   //    (1023)
frame_bury 18                                                                                                                                                                                                                                                                    //    (1024)
frame_dig 36                                                                                                                                                                                                                                                                     //    (1026)                                                             168     instrument_state.max_rate.store_into(max_rate)
pushint 54 // 54                                                                                                                                                                                                                                                                 //    (1028)
extract_uint64                                                                                                                                                                                                                                                                   //    (1030)
frame_bury 19                                                                                                                                                                                                                                                                    //    (1031)
frame_dig 36                                                                                                                                                                                                                                                                     //    (1033)                                                             171     instrument_state.initial_haircut.store_into(initial_haircut)
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (1035)
extract_uint16                                                                                                                                                                                                                                                                   //    (1037)
frame_bury 11                                                                                                                                                                                                                                                                    //    (1038)
frame_dig 36                                                                                                                                                                                                                                                                     //    (1040)                                                             172     instrument_state.initial_margin.store_into(initial_margin)
pushint 10 // 10                                                                                                                                                                                                                                                                 //    (1042)
extract_uint16                                                                                                                                                                                                                                                                   //    (1044)
frame_bury 12                                                                                                                                                                                                                                                                    //    (1045)
frame_dig 36                                                                                                                                                                                                                                                                     //    (1047)                                                             173     instrument_state.maintenance_haircut.store_into(maintenance_haircut)
pushint 12 // 12                                                                                                                                                                                                                                                                 //    (1049)
extract_uint16                                                                                                                                                                                                                                                                   //    (1051)
frame_bury 13                                                                                                                                                                                                                                                                    //    (1052)
frame_dig 36                                                                                                                                                                                                                                                                     //    (1054)                                                             174     instrument_state.maintenance_margin.store_into(maintenance_margin)
pushint 14 // 14                                                                                                                                                                                                                                                                 //    (1056)
extract_uint16                                                                                                                                                                                                                                                                   //    (1058)
frame_bury 14                                                                                                                                                                                                                                                                    //    (1059)
global LatestTimestamp                                                                                                                                                                                                                                                           //    (1061)  contracts_unified/core/state_handler/global_handler.py     58      Global.latest_timestamp()
bytec 12 // "t"                                                                                                                                                                                                                                                                  //    (1063)                                                             28      Bytes('t')
app_global_get                                                                                                                                                                                                                                                                   //    (1065)                                                             58      App.globalGet(KEY_INIT_TIMESTAMP)
-                                                                                                                                                                                                                                                                                //    (1066)                                                                     Global.latest_timestamp() - App.globalGet(KEY_INIT_TIMESTAMP)
frame_bury 0                                                                                                                                                                                                                                                                     //    (1067)  contracts_unified/core/internal/perform_pool_move.py       178     new_pool_last_update_time.set(GlobalStateHandler.get_relative_timestamp())
frame_dig 0                                                                                                                                                                                                                                                                      //    (1069)
intc 7 // 4294967296                                                                                                                                                                                                                                                             //    (1071)
<                                                                                                                                                                                                                                                                                //    (1073)
assert                                                                                                                                                                                                                                                                           //    (1074)
frame_dig 5                                                                                                                                                                                                                                                                      //    (1075)                                                             192     old_pool_liquidity.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1077)                                                                     Int(0)
==                                                                                                                                                                                                                                                                               //    (1078)                                                                     old_pool_liquidity.get() == Int(0)
bnz performpoolmove_14_l23                                                                                                                                                                                                                                                       //    (1079)                                                                     If(old_pool_liquidity.get() == Int(0))
frame_dig 3                                                                                                                                                                                                                                                                      //    (1082)                                                             194     old_pool_borrowed.get()
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (1084)                                                                     Int(RATE_ONE)
mulw                                                                                                                                                                                                                                                                             //    (1085)                                                                     WideRatio([old_pool_borrowed.get(), Int(RATE_ONE)], [old_pool_liquidity.get()])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1086)
frame_dig 5                                                                                                                                                                                                                                                                      //    (1087)                                                                     old_pool_liquidity.get()
divmodw                                                                                                                                                                                                                                                                          //    (1089)                                                                     WideRatio([old_pool_borrowed.get(), Int(RATE_ONE)], [old_pool_liquidity.get()])
pop                                                                                                                                                                                                                                                                              //    (1090)
pop                                                                                                                                                                                                                                                                              //    (1091)
swap                                                                                                                                                                                                                                                                             //    (1092)
!                                                                                                                                                                                                                                                                                //    (1093)
assert                                                                                                                                                                                                                                                                           //    (1094)
performpoolmove_14_l2:                                                                                                                                                                                                                                                           //                                                                       202     If(old_utilization_rate.get() < optimal_utilization_rate.get())
frame_bury 27                                                                                                                                                                                                                                                                    //    (1095)                                                             191     old_utilization_rate.set(If(old_pool_liquidity.get() == Int(0)).Then(Int(0)).Else(WideRatio([old_pool_borrowed.get(), Int(RATE_ONE)], [old_pool_liquidity.get()])))
frame_dig 27                                                                                                                                                                                                                                                                     //    (1097)                                                             202     old_utilization_rate.get()
frame_dig 16                                                                                                                                                                                                                                                                     //    (1099)                                                                     optimal_utilization_rate.get()
<                                                                                                                                                                                                                                                                                //    (1101)                                                                     old_utilization_rate.get() < optimal_utilization_rate.get()
bnz performpoolmove_14_l22                                                                                                                                                                                                                                                       //    (1102)                                                                     If(old_utilization_rate.get() < optimal_utilization_rate.get())
frame_dig 18                                                                                                                                                                                                                                                                     //    (1105)                                                             211     opt_rate.get()
frame_dig 27                                                                                                                                                                                                                                                                     //    (1107)                                                             213     old_utilization_rate.get()
frame_dig 16                                                                                                                                                                                                                                                                     //    (1109)                                                                     optimal_utilization_rate.get()
-                                                                                                                                                                                                                                                                                //    (1111)                                                                     old_utilization_rate.get() - optimal_utilization_rate.get()
frame_dig 19                                                                                                                                                                                                                                                                     //    (1112)                                                                     max_rate.get()
frame_dig 18                                                                                                                                                                                                                                                                     //    (1114)                                                                     opt_rate.get()
-                                                                                                                                                                                                                                                                                //    (1116)                                                                     max_rate.get() - opt_rate.get()
mulw                                                                                                                                                                                                                                                                             //    (1117)                                                             212     WideRatio([old_utilization_rate.get() - optimal_utilization_rate.get(), max_rate.get() - opt_rate.get()], [Int(RATE_ONE) - optimal_utilization_rate.get()])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1118)
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (1119)                                                             214     Int(RATE_ONE)
frame_dig 16                                                                                                                                                                                                                                                                     //    (1120)                                                                     optimal_utilization_rate.get()
-                                                                                                                                                                                                                                                                                //    (1122)                                                                     Int(RATE_ONE) - optimal_utilization_rate.get()
divmodw                                                                                                                                                                                                                                                                          //    (1123)                                                             212     WideRatio([old_utilization_rate.get() - optimal_utilization_rate.get(), max_rate.get() - opt_rate.get()], [Int(RATE_ONE) - optimal_utilization_rate.get()])
pop                                                                                                                                                                                                                                                                              //    (1124)
pop                                                                                                                                                                                                                                                                              //    (1125)
swap                                                                                                                                                                                                                                                                             //    (1126)
!                                                                                                                                                                                                                                                                                //    (1127)
assert                                                                                                                                                                                                                                                                           //    (1128)
+                                                                                                                                                                                                                                                                                //    (1129)                                                             211     opt_rate.get() + WideRatio([old_utilization_rate.get() - optimal_utilization_rate.get(), max_rate.get() - opt_rate.get()], [Int(RATE_ONE) - optimal_utilization_rate.get()])
performpoolmove_14_l4:                                                                                                                                                                                                                                                           //                                                                       242     If(old_pool_borrowed.get() == Int(0))
frame_bury 28                                                                                                                                                                                                                                                                    //    (1130)                                                             201     old_interest_rate.set(If(old_utilization_rate.get() < optimal_utilization_rate.get()).Then(min_rate.get() + WideRatio([old_utilization_rate.get(), opt_rate.get() - min_rate.get()], [optimal_utilization_rate.get()])).Else(opt_rate.get() + WideRatio([old_utilization_rate.get() - optimal_utilization_rate.get(), max_rate.get() - opt_rate.get()], [Int(RATE_ONE) - optimal_utilization_rate.get()])))
frame_dig 0                                                                                                                                                                                                                                                                      //    (1132)                                                             221     new_pool_last_update_time.get()
frame_dig 1                                                                                                                                                                                                                                                                      //    (1134)                                                                     old_pool_last_update_time.get()
-                                                                                                                                                                                                                                                                                //    (1136)                                                                     new_pool_last_update_time.get() - old_pool_last_update_time.get()
frame_bury 29                                                                                                                                                                                                                                                                    //    (1137)                                                                     delta_time.set(new_pool_last_update_time.get() - old_pool_last_update_time.get())
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (1139)                                                             225     Int(RATE_ONE)
frame_dig 28                                                                                                                                                                                                                                                                     //    (1140)                                                                     old_interest_rate.get()
+                                                                                                                                                                                                                                                                                //    (1142)                                                                     Int(RATE_ONE) + old_interest_rate.get()
frame_bury 30                                                                                                                                                                                                                                                                    //    (1143)                                                                     compounding_per_second_rate.set(Int(RATE_ONE) + old_interest_rate.get())
frame_dig 30                                                                                                                                                                                                                                                                     //    (1145)  contracts_unified/library/math.py                          33      def teal_expt(base: InterestRate, raised_to: abi.Uint64, *, output: InterestRate) -> Expr:
frame_dig 29                                                                                                                                                                                                                                                                     //    (1147)
callsub tealexpt_6                                                                                                                                                                                                                                                               //    (1149)  contracts_unified/core/internal/perform_pool_move.py       226     teal_expt(compounding_per_second_rate, delta_time)
frame_bury 31                                                                                                                                                                                                                                                                    //    (1152)                                                                     compounding_per_period_rate.set(teal_expt(compounding_per_second_rate, delta_time))
frame_dig 31                                                                                                                                                                                                                                                                     //    (1154)                                                             229     compounding_per_period_rate.get()
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (1156)                                                                     Int(RATE_ONE)
-                                                                                                                                                                                                                                                                                //    (1157)                                                                     compounding_per_period_rate.get() - Int(RATE_ONE)
frame_dig 3                                                                                                                                                                                                                                                                      //    (1158)                                                                     old_pool_borrowed.get()
mulw                                                                                                                                                                                                                                                                             //    (1160)                                                             228     WideRatio([compounding_per_period_rate.get() - Int(RATE_ONE), old_pool_borrowed.get()], [Int(RATE_ONE)])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1161)
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (1162)                                                             230     Int(RATE_ONE)
divmodw                                                                                                                                                                                                                                                                          //    (1163)                                                             228     WideRatio([compounding_per_period_rate.get() - Int(RATE_ONE), old_pool_borrowed.get()], [Int(RATE_ONE)])
pop                                                                                                                                                                                                                                                                              //    (1164)
pop                                                                                                                                                                                                                                                                              //    (1165)
swap                                                                                                                                                                                                                                                                             //    (1166)
!                                                                                                                                                                                                                                                                                //    (1167)
assert                                                                                                                                                                                                                                                                           //    (1168)
frame_bury 32                                                                                                                                                                                                                                                                    //    (1169)                                                             227     pool_accrued_interest.set(WideRatio([compounding_per_period_rate.get() - Int(RATE_ONE), old_pool_borrowed.get()], [Int(RATE_ONE)]))
frame_dig 3                                                                                                                                                                                                                                                                      //    (1171)                                                             236     old_pool_borrowed.get()
frame_dig 32                                                                                                                                                                                                                                                                     //    (1173)                                                                     pool_accrued_interest.get()
+                                                                                                                                                                                                                                                                                //    (1175)                                                                     old_pool_borrowed.get() + pool_accrued_interest.get()
frame_bury 2                                                                                                                                                                                                                                                                     //    (1176)                                                                     new_pool_borrowed.set(old_pool_borrowed.get() + pool_accrued_interest.get())
frame_dig 5                                                                                                                                                                                                                                                                      //    (1178)                                                             237     old_pool_liquidity.get()
frame_dig 32                                                                                                                                                                                                                                                                     //    (1180)                                                                     pool_accrued_interest.get()
+                                                                                                                                                                                                                                                                                //    (1182)                                                                     old_pool_liquidity.get() + pool_accrued_interest.get()
frame_bury 4                                                                                                                                                                                                                                                                     //    (1183)                                                                     new_pool_liquidity.set(old_pool_liquidity.get() + pool_accrued_interest.get())
frame_dig 3                                                                                                                                                                                                                                                                      //    (1185)                                                             242     old_pool_borrowed.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1187)                                                                     Int(0)
==                                                                                                                                                                                                                                                                               //    (1188)                                                                     old_pool_borrowed.get() == Int(0)
bnz performpoolmove_14_l21                                                                                                                                                                                                                                                       //    (1189)                                                                     If(old_pool_borrowed.get() == Int(0))
frame_dig 7                                                                                                                                                                                                                                                                      //    (1192)                                                             247     old_pool_borrow_index.get()
frame_dig 2                                                                                                                                                                                                                                                                      //    (1194)                                                                     new_pool_borrowed.get()
mulw                                                                                                                                                                                                                                                                             //    (1196)                                                                     WideRatio([old_pool_borrow_index.get(), new_pool_borrowed.get()], [old_pool_borrowed.get()])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1197)
frame_dig 3                                                                                                                                                                                                                                                                      //    (1198)                                                                     old_pool_borrowed.get()
divmodw                                                                                                                                                                                                                                                                          //    (1200)                                                                     WideRatio([old_pool_borrow_index.get(), new_pool_borrowed.get()], [old_pool_borrowed.get()])
pop                                                                                                                                                                                                                                                                              //    (1201)
pop                                                                                                                                                                                                                                                                              //    (1202)
swap                                                                                                                                                                                                                                                                             //    (1203)
!                                                                                                                                                                                                                                                                                //    (1204)
assert                                                                                                                                                                                                                                                                           //    (1205)
performpoolmove_14_l6:                                                                                                                                                                                                                                                           //                                                                       251     If(old_pool_liquidity.get() == Int(0))
frame_bury 6                                                                                                                                                                                                                                                                     //    (1206)                                                             241     new_pool_borrow_index.set(If(old_pool_borrowed.get() == Int(0)).Then(Int(RATE_ONE)).Else(WideRatio([old_pool_borrow_index.get(), new_pool_borrowed.get()], [old_pool_borrowed.get()])))
frame_dig 5                                                                                                                                                                                                                                                                      //    (1208)                                                             251     old_pool_liquidity.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1210)                                                                     Int(0)
==                                                                                                                                                                                                                                                                               //    (1211)                                                                     old_pool_liquidity.get() == Int(0)
bnz performpoolmove_14_l20                                                                                                                                                                                                                                                       //    (1212)                                                                     If(old_pool_liquidity.get() == Int(0))
frame_dig 9                                                                                                                                                                                                                                                                      //    (1215)                                                             256     old_pool_lend_index.get()
frame_dig 4                                                                                                                                                                                                                                                                      //    (1217)                                                                     new_pool_liquidity.get()
mulw                                                                                                                                                                                                                                                                             //    (1219)                                                                     WideRatio([old_pool_lend_index.get(), new_pool_liquidity.get()], [old_pool_liquidity.get()])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1220)
frame_dig 5                                                                                                                                                                                                                                                                      //    (1221)                                                                     old_pool_liquidity.get()
divmodw                                                                                                                                                                                                                                                                          //    (1223)                                                                     WideRatio([old_pool_lend_index.get(), new_pool_liquidity.get()], [old_pool_liquidity.get()])
pop                                                                                                                                                                                                                                                                              //    (1224)
pop                                                                                                                                                                                                                                                                              //    (1225)
swap                                                                                                                                                                                                                                                                             //    (1226)
!                                                                                                                                                                                                                                                                                //    (1227)
assert                                                                                                                                                                                                                                                                           //    (1228)
performpoolmove_14_l8:                                                                                                                                                                                                                                                           //                                                                       261     If(account.get() != Global.zero_address())
frame_bury 8                                                                                                                                                                                                                                                                     //    (1229)                                                             250     new_pool_lend_index.set(If(old_pool_liquidity.get() == Int(0)).Then(Int(RATE_ONE)).Else(WideRatio([old_pool_lend_index.get(), new_pool_liquidity.get()], [old_pool_liquidity.get()])))
frame_dig -3                                                                                                                                                                                                                                                                     //    (1231)                                                             261     account.get()
global ZeroAddress                                                                                                                                                                                                                                                               //    (1233)                                                                     Global.zero_address()
!=                                                                                                                                                                                                                                                                               //    (1235)                                                                     account.get() != Global.zero_address()
bz performpoolmove_14_l24                                                                                                                                                                                                                                                        //    (1236)                                                                     If(account.get() != Global.zero_address())
frame_dig -3                                                                                                                                                                                                                                                                     //    (1239)  contracts_unified/core/state_handler/local_handler.py      39      def get_position(account: AccountAddress, instrument_id: InstrumentId, *, output: UserInstrumentData) -> Expr:
frame_dig -2                                                                                                                                                                                                                                                                     //    (1241)
callsub getposition_3                                                                                                                                                                                                                                                            //    (1243)  contracts_unified/core/internal/perform_pool_move.py       265     LocalStateHandler.get_position(account, instrument_id)
frame_bury 20                                                                                                                                                                                                                                                                    //    (1246)                                                                     user_position.set(cast(abi.ReturnedValue, LocalStateHandler.get_position(account, instrument_id)))
frame_dig 20                                                                                                                                                                                                                                                                     //    (1248)                                                             266     user_position.cash.store_into(old_user_cash)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1250)
extract_uint64                                                                                                                                                                                                                                                                   //    (1251)
frame_bury 26                                                                                                                                                                                                                                                                    //    (1252)
frame_dig 20                                                                                                                                                                                                                                                                     //    (1254)                                                             267     user_position.principal.store_into(old_user_principal)
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (1256)
extract_uint64                                                                                                                                                                                                                                                                   //    (1258)
frame_bury 22                                                                                                                                                                                                                                                                    //    (1259)
frame_dig 20                                                                                                                                                                                                                                                                     //    (1261)                                                             268     user_position.index.store_into(old_user_index)
pushint 16 // 16                                                                                                                                                                                                                                                                 //    (1263)
extract_uint64                                                                                                                                                                                                                                                                   //    (1265)
frame_bury 24                                                                                                                                                                                                                                                                    //    (1266)
frame_dig 24                                                                                                                                                                                                                                                                     //    (1268)                                                             272     old_user_index.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1270)                                                                     Int(0)
==                                                                                                                                                                                                                                                                               //    (1271)                                                                     old_user_index.get() == Int(0)
bnz performpoolmove_14_l19                                                                                                                                                                                                                                                       //    (1272)                                                                     If(old_user_index.get() == Int(0))
frame_dig 22                                                                                                                                                                                                                                                                     //    (1275)                                                             276     old_user_principal.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (1277)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (1278)                                                                     value & Int(9223372036854775808)
bnz performpoolmove_14_l18                                                                                                                                                                                                                                                       //    (1279)
frame_dig 22                                                                                                                                                                                                                                                                     //    (1282)  contracts_unified/core/internal/perform_pool_move.py       69      user_principal.get()
frame_dig 8                                                                                                                                                                                                                                                                      //    (1284)                                                                     pool_lend_index.get()
mulw                                                                                                                                                                                                                                                                             //    (1286)                                                                     WideRatio([user_principal.get(), pool_lend_index.get()], [user_index.get()])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1287)
frame_dig 24                                                                                                                                                                                                                                                                     //    (1288)                                                                     user_index.get()
divmodw                                                                                                                                                                                                                                                                          //    (1290)                                                                     WideRatio([user_principal.get(), pool_lend_index.get()], [user_index.get()])
pop                                                                                                                                                                                                                                                                              //    (1291)
pop                                                                                                                                                                                                                                                                              //    (1292)
swap                                                                                                                                                                                                                                                                             //    (1293)
!                                                                                                                                                                                                                                                                                //    (1294)
assert                                                                                                                                                                                                                                                                           //    (1295)
performpoolmove_14_l12:                                                                                                                                                                                                                                                          //                                                                       337     If(signed_ltz(new_pool_borrowed.get()))
frame_bury 21                                                                                                                                                                                                                                                                    //    (1296)                                                             271     new_user_principal.set(If(old_user_index.get() == Int(0)).Then(Int(0)).ElseIf(signed_ltz(old_user_principal.get())).Then(calculate_accrued_borrow(old_user_principal, old_user_index, new_pool_borrow_index)).Else(calculate_accrued_lend(old_user_principal, old_user_index, new_pool_lend_index)))
frame_dig 4                                                                                                                                                                                                                                                                      //    (1298)                                                             292     new_pool_liquidity.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1300)                                                                     Int(0)
frame_dig 21                                                                                                                                                                                                                                                                     //    (1301)                                                                     new_user_principal.get()
callsub signedmax_13                                                                                                                                                                                                                                                             //    (1303)                                                                     signed_max(Int(0), new_user_principal.get())
>=                                                                                                                                                                                                                                                                               //    (1306)                                                                     new_pool_liquidity.get() >= signed_max(Int(0), new_user_principal.get())
assert                                                                                                                                                                                                                                                                           //    (1307)                                                                     Assert(new_pool_liquidity.get() >= signed_max(Int(0), new_user_principal.get()))
frame_dig -1                                                                                                                                                                                                                                                                     //    (1308)                                                             319     transfer_amount.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1310)                                                             320     Int(0)
frame_dig 21                                                                                                                                                                                                                                                                     //    (1311)                                                                     new_user_principal.get()
callsub signedmin_12                                                                                                                                                                                                                                                             //    (1313)                                                                     signed_min(Int(0), new_user_principal.get())
callsub signedadd_9                                                                                                                                                                                                                                                              //    (1316)                                                             318     signed_add(transfer_amount.get(), signed_min(Int(0), new_user_principal.get()))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1319)                                                             322     Int(0)
frame_dig 21                                                                                                                                                                                                                                                                     //    (1320)                                                                     new_user_principal.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (1322)                                                                     signed_neg(new_user_principal.get())
callsub signedmin_12                                                                                                                                                                                                                                                             //    (1325)                                                                     signed_min(Int(0), signed_neg(new_user_principal.get()))
callsub signedmax_13                                                                                                                                                                                                                                                             //    (1328)                                                             317     signed_max(signed_add(transfer_amount.get(), signed_min(Int(0), new_user_principal.get())), signed_min(Int(0), signed_neg(new_user_principal.get())))
frame_bury 33                                                                                                                                                                                                                                                                    //    (1331)                                                             316     liquidity_transfer.set(signed_max(signed_add(transfer_amount.get(), signed_min(Int(0), new_user_principal.get())), signed_min(Int(0), signed_neg(new_user_principal.get()))))
frame_dig -1                                                                                                                                                                                                                                                                     //    (1333)                                                             327     transfer_amount.get()
frame_dig 33                                                                                                                                                                                                                                                                     //    (1335)                                                             328     liquidity_transfer.get()
callsub signedsub_10                                                                                                                                                                                                                                                             //    (1337)                                                             326     signed_sub(transfer_amount.get(), liquidity_transfer.get())
frame_bury 34                                                                                                                                                                                                                                                                    //    (1340)                                                             325     borrowed_transfer.set(signed_sub(transfer_amount.get(), liquidity_transfer.get()))
frame_dig 2                                                                                                                                                                                                                                                                      //    (1342)                                                             333     new_pool_borrowed.get()
frame_dig 34                                                                                                                                                                                                                                                                     //    (1344)                                                                     borrowed_transfer.get()
callsub signedsub_10                                                                                                                                                                                                                                                             //    (1346)                                                                     signed_sub(new_pool_borrowed.get(), borrowed_transfer.get())
frame_bury 2                                                                                                                                                                                                                                                                     //    (1349)                                                                     new_pool_borrowed.set(signed_sub(new_pool_borrowed.get(), borrowed_transfer.get()))
frame_dig 2                                                                                                                                                                                                                                                                      //    (1351)                                                             337     new_pool_borrowed.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (1353)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (1354)                                                                     value & Int(9223372036854775808)
bnz performpoolmove_14_l17                                                                                                                                                                                                                                                       //    (1355)  contracts_unified/core/internal/perform_pool_move.py       337     If(signed_ltz(new_pool_borrowed.get()))
performpoolmove_14_l13:                                                                                                                                                                                                                                                          //                                                                       364     If(signed_ltz(new_user_principal.get()))
frame_dig 4                                                                                                                                                                                                                                                                      //    (1358)                                                             352     new_pool_liquidity.get()
frame_dig 33                                                                                                                                                                                                                                                                     //    (1360)                                                                     liquidity_transfer.get()
callsub signedadd_9                                                                                                                                                                                                                                                              //    (1362)                                                                     signed_add(new_pool_liquidity.get(), liquidity_transfer.get())
frame_bury 4                                                                                                                                                                                                                                                                     //    (1365)                                                                     new_pool_liquidity.set(signed_add(new_pool_liquidity.get(), liquidity_transfer.get()))
frame_dig 4                                                                                                                                                                                                                                                                      //    (1367)                                                             355     new_pool_liquidity.get()
frame_dig 2                                                                                                                                                                                                                                                                      //    (1369)                                                                     new_pool_borrowed.get()
>=                                                                                                                                                                                                                                                                               //    (1371)                                                                     new_pool_liquidity.get() >= new_pool_borrowed.get()
assert                                                                                                                                                                                                                                                                           //    (1372)                                                                     Assert(new_pool_liquidity.get() >= new_pool_borrowed.get())
frame_dig 21                                                                                                                                                                                                                                                                     //    (1373)                                                             358     new_user_principal.get()
frame_dig -1                                                                                                                                                                                                                                                                     //    (1375)                                                                     transfer_amount.get()
callsub signedadd_9                                                                                                                                                                                                                                                              //    (1377)                                                                     signed_add(new_user_principal.get(), transfer_amount.get())
frame_bury 21                                                                                                                                                                                                                                                                    //    (1380)                                                                     new_user_principal.set(signed_add(new_user_principal.get(), transfer_amount.get()))
frame_dig 26                                                                                                                                                                                                                                                                     //    (1382)                                                             359     old_user_cash.get()
frame_dig -1                                                                                                                                                                                                                                                                     //    (1384)                                                                     transfer_amount.get()
callsub signedsub_10                                                                                                                                                                                                                                                             //    (1386)                                                                     signed_sub(old_user_cash.get(), transfer_amount.get())
frame_bury 25                                                                                                                                                                                                                                                                    //    (1389)                                                                     new_user_cash.set(signed_sub(old_user_cash.get(), transfer_amount.get()))
frame_dig 25                                                                                                                                                                                                                                                                     //    (1391)                                                             360     new_user_cash.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (1393)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (1394)                                                                     value & Int(9223372036854775808)
!                                                                                                                                                                                                                                                                                //    (1395)  contracts_unified/core/internal/perform_pool_move.py       360     Not(signed_ltz(new_user_cash.get()))
assert                                                                                                                                                                                                                                                                           //    (1396)                                                                     Assert(Not(signed_ltz(new_user_cash.get())))
frame_dig 21                                                                                                                                                                                                                                                                     //    (1397)                                                             364     new_user_principal.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (1399)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (1400)                                                                     value & Int(9223372036854775808)
bnz performpoolmove_14_l16                                                                                                                                                                                                                                                       //    (1401)  contracts_unified/core/internal/perform_pool_move.py       364     If(signed_ltz(new_user_principal.get()))
frame_dig 8                                                                                                                                                                                                                                                                      //    (1404)                                                             366     new_pool_lend_index.get()
performpoolmove_14_l15:                                                                                                                                                                                                                                                          //                                                                       364     If(signed_ltz(new_user_principal.get()))
frame_bury 23                                                                                                                                                                                                                                                                    //    (1406)                                                             363     new_user_index.set(If(signed_ltz(new_user_principal.get())).Then(new_pool_borrow_index.get()).Else(new_pool_lend_index.get()))
frame_dig 25                                                                                                                                                                                                                                                                     //    (1408)                                                             370     user_position.set(new_user_cash, new_user_principal, new_user_index)
itob                                                                                                                                                                                                                                                                             //    (1410)
frame_dig 21                                                                                                                                                                                                                                                                     //    (1411)
itob                                                                                                                                                                                                                                                                             //    (1413)
concat                                                                                                                                                                                                                                                                           //    (1414)
frame_dig 23                                                                                                                                                                                                                                                                     //    (1415)
itob                                                                                                                                                                                                                                                                             //    (1417)
concat                                                                                                                                                                                                                                                                           //    (1418)
frame_bury 20                                                                                                                                                                                                                                                                    //    (1419)
frame_dig -3                                                                                                                                                                                                                                                                     //    (1421)  contracts_unified/core/state_handler/local_handler.py      63      account.get()
frame_dig -2                                                                                                                                                                                                                                                                     //    (1423)                                                                     instrument_id.get()
pushint 24 // 24                                                                                                                                                                                                                                                                 //    (1425)                                                                     Int(LocalStateHandler.position_size)
*                                                                                                                                                                                                                                                                                //    (1427)                                                                     instrument_id.get() * Int(LocalStateHandler.position_size)
frame_dig 20                                                                                                                                                                                                                                                                     //    (1428)                                                                     data.encode()
box_replace                                                                                                                                                                                                                                                                      //    (1430)                                                                     App.box_replace(account.get(), instrument_id.get() * Int(LocalStateHandler.position_size), data.encode())
b performpoolmove_14_l24                                                                                                                                                                                                                                                         //    (1431)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
performpoolmove_14_l16:                                                                                                                                                                                                                                                          //            contracts_unified/core/internal/perform_pool_move.py       364     If(signed_ltz(new_user_principal.get()))
frame_dig 6                                                                                                                                                                                                                                                                      //    (1434)                                                             365     new_pool_borrow_index.get()
b performpoolmove_14_l15                                                                                                                                                                                                                                                         //    (1436)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
performpoolmove_14_l17:                                                                                                                                                                                                                                                          //            contracts_unified/core/internal/perform_pool_move.py       337     If(signed_ltz(new_pool_borrowed.get()))
frame_dig 2                                                                                                                                                                                                                                                                      //    (1439)                                                             339     new_pool_borrowed.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (1441)                                                                     signed_neg(new_pool_borrowed.get())
frame_bury 35                                                                                                                                                                                                                                                                    //    (1444)                                                                     remainder.set(signed_neg(new_pool_borrowed.get()))
frame_dig 8                                                                                                                                                                                                                                                                      //    (1446)                                                             343     new_pool_lend_index.get()
frame_dig 8                                                                                                                                                                                                                                                                      //    (1448)                                                                     new_pool_lend_index.get()
frame_dig 35                                                                                                                                                                                                                                                                     //    (1450)                                                                     remainder.get()
mulw                                                                                                                                                                                                                                                                             //    (1452)                                                                     WideRatio([new_pool_lend_index.get(), remainder.get()], [new_pool_liquidity.get()])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1453)
frame_dig 4                                                                                                                                                                                                                                                                      //    (1454)                                                                     new_pool_liquidity.get()
divmodw                                                                                                                                                                                                                                                                          //    (1456)                                                                     WideRatio([new_pool_lend_index.get(), remainder.get()], [new_pool_liquidity.get()])
pop                                                                                                                                                                                                                                                                              //    (1457)
pop                                                                                                                                                                                                                                                                              //    (1458)
swap                                                                                                                                                                                                                                                                             //    (1459)
!                                                                                                                                                                                                                                                                                //    (1460)
assert                                                                                                                                                                                                                                                                           //    (1461)
+                                                                                                                                                                                                                                                                                //    (1462)                                                                     new_pool_lend_index.get() + WideRatio([new_pool_lend_index.get(), remainder.get()], [new_pool_liquidity.get()])
frame_bury 8                                                                                                                                                                                                                                                                     //    (1463)                                                                     new_pool_lend_index.set(new_pool_lend_index.get() + WideRatio([new_pool_lend_index.get(), remainder.get()], [new_pool_liquidity.get()]))
frame_dig 4                                                                                                                                                                                                                                                                      //    (1465)                                                             346     new_pool_liquidity.get()
frame_dig 35                                                                                                                                                                                                                                                                     //    (1467)                                                                     remainder.get()
callsub signedadd_9                                                                                                                                                                                                                                                              //    (1469)                                                                     signed_add(new_pool_liquidity.get(), remainder.get())
frame_bury 4                                                                                                                                                                                                                                                                     //    (1472)                                                                     new_pool_liquidity.set(signed_add(new_pool_liquidity.get(), remainder.get()))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1474)                                                             349     Int(0)
frame_bury 2                                                                                                                                                                                                                                                                     //    (1475)                                                                     new_pool_borrowed.set(Int(0))
b performpoolmove_14_l13                                                                                                                                                                                                                                                         //    (1477)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
performpoolmove_14_l18:                                                                                                                                                                                                                                                          //            contracts_unified/library/signed_math.py                   22      value & Int(9223372036854775808)
frame_dig 22                                                                                                                                                                                                                                                                     //    (1480)  contracts_unified/core/internal/perform_pool_move.py       55      user_principal.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (1482)                                                                     signed_neg(user_principal.get())
frame_bury 38                                                                                                                                                                                                                                                                    //    (1485)                                                                     borrowed.set(signed_neg(user_principal.get()))
frame_dig 38                                                                                                                                                                                                                                                                     //    (1487)                                                             56      borrowed.get()
frame_dig 6                                                                                                                                                                                                                                                                      //    (1489)                                                                     pool_borrow_index.get()
mulw                                                                                                                                                                                                                                                                             //    (1491)                                                                     WideRatio([borrowed.get(), pool_borrow_index.get()], [user_index.get()])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1492)
frame_dig 24                                                                                                                                                                                                                                                                     //    (1493)                                                                     user_index.get()
divmodw                                                                                                                                                                                                                                                                          //    (1495)                                                                     WideRatio([borrowed.get(), pool_borrow_index.get()], [user_index.get()])
pop                                                                                                                                                                                                                                                                              //    (1496)
pop                                                                                                                                                                                                                                                                              //    (1497)
swap                                                                                                                                                                                                                                                                             //    (1498)
!                                                                                                                                                                                                                                                                                //    (1499)
assert                                                                                                                                                                                                                                                                           //    (1500)
frame_bury 39                                                                                                                                                                                                                                                                    //    (1501)                                                                     result.set(WideRatio([borrowed.get(), pool_borrow_index.get()], [user_index.get()]))
frame_dig 39                                                                                                                                                                                                                                                                     //    (1503)                                                             57      result.get()
frame_dig 39                                                                                                                                                                                                                                                                     //    (1505)                                                                     result.get()
frame_dig 38                                                                                                                                                                                                                                                                     //    (1507)                                                                     borrowed.get()
==                                                                                                                                                                                                                                                                               //    (1509)                                                                     result.get() == borrowed.get()
+                                                                                                                                                                                                                                                                                //    (1510)                                                                     result.get() + (result.get() == borrowed.get())
callsub signedneg_7                                                                                                                                                                                                                                                              //    (1511)                                                                     signed_neg(result.get() + (result.get() == borrowed.get()))
b performpoolmove_14_l12                                                                                                                                                                                                                                                         //    (1514)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
performpoolmove_14_l19:                                                                                                                                                                                                                                                          //            contracts_unified/core/internal/perform_pool_move.py       272     If(old_user_index.get() == Int(0))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1517)                                                             274     Int(0)
b performpoolmove_14_l12                                                                                                                                                                                                                                                         //    (1518)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
performpoolmove_14_l20:                                                                                                                                                                                                                                                          //            contracts_unified/core/internal/perform_pool_move.py       251     If(old_pool_liquidity.get() == Int(0))
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (1521)                                                             253     Int(RATE_ONE)
b performpoolmove_14_l8                                                                                                                                                                                                                                                          //    (1522)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
performpoolmove_14_l21:                                                                                                                                                                                                                                                          //            contracts_unified/core/internal/perform_pool_move.py       242     If(old_pool_borrowed.get() == Int(0))
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (1525)                                                             244     Int(RATE_ONE)
b performpoolmove_14_l6                                                                                                                                                                                                                                                          //    (1526)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
performpoolmove_14_l22:                                                                                                                                                                                                                                                          //            contracts_unified/core/internal/perform_pool_move.py       202     If(old_utilization_rate.get() < optimal_utilization_rate.get())
frame_dig 17                                                                                                                                                                                                                                                                     //    (1529)                                                             204     min_rate.get()
frame_dig 27                                                                                                                                                                                                                                                                     //    (1531)                                                             206     old_utilization_rate.get()
frame_dig 18                                                                                                                                                                                                                                                                     //    (1533)                                                                     opt_rate.get()
frame_dig 17                                                                                                                                                                                                                                                                     //    (1535)                                                                     min_rate.get()
-                                                                                                                                                                                                                                                                                //    (1537)                                                                     opt_rate.get() - min_rate.get()
mulw                                                                                                                                                                                                                                                                             //    (1538)                                                             205     WideRatio([old_utilization_rate.get(), opt_rate.get() - min_rate.get()], [optimal_utilization_rate.get()])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1539)
frame_dig 16                                                                                                                                                                                                                                                                     //    (1540)                                                             207     optimal_utilization_rate.get()
divmodw                                                                                                                                                                                                                                                                          //    (1542)                                                             205     WideRatio([old_utilization_rate.get(), opt_rate.get() - min_rate.get()], [optimal_utilization_rate.get()])
pop                                                                                                                                                                                                                                                                              //    (1543)
pop                                                                                                                                                                                                                                                                              //    (1544)
swap                                                                                                                                                                                                                                                                             //    (1545)
!                                                                                                                                                                                                                                                                                //    (1546)
assert                                                                                                                                                                                                                                                                           //    (1547)
+                                                                                                                                                                                                                                                                                //    (1548)                                                             204     min_rate.get() + WideRatio([old_utilization_rate.get(), opt_rate.get() - min_rate.get()], [optimal_utilization_rate.get()])
b performpoolmove_14_l4                                                                                                                                                                                                                                                          //    (1549)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
performpoolmove_14_l23:                                                                                                                                                                                                                                                          //            contracts_unified/core/internal/perform_pool_move.py       192     If(old_pool_liquidity.get() == Int(0))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1552)                                                             193     Int(0)
b performpoolmove_14_l2                                                                                                                                                                                                                                                          //    (1553)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
performpoolmove_14_l24:                                                                                                                                                                                                                                                          //            contracts_unified/core/internal/perform_pool_move.py       261     If(account.get() != Global.zero_address())
frame_dig 10                                                                                                                                                                                                                                                                     //    (1556)                                                             375     new_instrument_state.set(asset_id, initial_haircut, initial_margin, maintenance_haircut, maintenance_margin, new_pool_last_update_time, new_pool_borrow_index, new_pool_lend_index, optimal_utilization_ratio, min_rate, opt_rate, max_rate, new_pool_borrowed, new_pool_liquidity)
itob                                                                                                                                                                                                                                                                             //    (1558)
frame_dig 11                                                                                                                                                                                                                                                                     //    (1559)
itob                                                                                                                                                                                                                                                                             //    (1561)
extract 6 0                                                                                                                                                                                                                                                                      //    (1562)
concat                                                                                                                                                                                                                                                                           //    (1565)
frame_dig 12                                                                                                                                                                                                                                                                     //    (1566)
itob                                                                                                                                                                                                                                                                             //    (1568)
extract 6 0                                                                                                                                                                                                                                                                      //    (1569)
concat                                                                                                                                                                                                                                                                           //    (1572)
frame_dig 13                                                                                                                                                                                                                                                                     //    (1573)
itob                                                                                                                                                                                                                                                                             //    (1575)
extract 6 0                                                                                                                                                                                                                                                                      //    (1576)
concat                                                                                                                                                                                                                                                                           //    (1579)
frame_dig 14                                                                                                                                                                                                                                                                     //    (1580)
itob                                                                                                                                                                                                                                                                             //    (1582)
extract 6 0                                                                                                                                                                                                                                                                      //    (1583)
concat                                                                                                                                                                                                                                                                           //    (1586)
frame_dig 0                                                                                                                                                                                                                                                                      //    (1587)
itob                                                                                                                                                                                                                                                                             //    (1589)
extract 4 0                                                                                                                                                                                                                                                                      //    (1590)
concat                                                                                                                                                                                                                                                                           //    (1593)
frame_dig 6                                                                                                                                                                                                                                                                      //    (1594)
itob                                                                                                                                                                                                                                                                             //    (1596)
concat                                                                                                                                                                                                                                                                           //    (1597)
frame_dig 8                                                                                                                                                                                                                                                                      //    (1598)
itob                                                                                                                                                                                                                                                                             //    (1600)
concat                                                                                                                                                                                                                                                                           //    (1601)
frame_dig 15                                                                                                                                                                                                                                                                     //    (1602)
itob                                                                                                                                                                                                                                                                             //    (1604)
extract 6 0                                                                                                                                                                                                                                                                      //    (1605)
concat                                                                                                                                                                                                                                                                           //    (1608)
frame_dig 17                                                                                                                                                                                                                                                                     //    (1609)
itob                                                                                                                                                                                                                                                                             //    (1611)
concat                                                                                                                                                                                                                                                                           //    (1612)
frame_dig 18                                                                                                                                                                                                                                                                     //    (1613)
itob                                                                                                                                                                                                                                                                             //    (1615)
concat                                                                                                                                                                                                                                                                           //    (1616)
frame_dig 19                                                                                                                                                                                                                                                                     //    (1617)
itob                                                                                                                                                                                                                                                                             //    (1619)
concat                                                                                                                                                                                                                                                                           //    (1620)
frame_dig 2                                                                                                                                                                                                                                                                      //    (1621)
itob                                                                                                                                                                                                                                                                             //    (1623)
concat                                                                                                                                                                                                                                                                           //    (1624)
frame_dig 4                                                                                                                                                                                                                                                                      //    (1625)
itob                                                                                                                                                                                                                                                                             //    (1627)
concat                                                                                                                                                                                                                                                                           //    (1628)
frame_bury 37                                                                                                                                                                                                                                                                    //    (1629)
bytec_3 // "i"                                                                                                                                                                                                                                                                   //    (1631)  contracts_unified/core/state_handler/global_handler.py     221     Bytes('i')
frame_dig -2                                                                                                                                                                                                                                                                     //    (1632)                                                                     instrument_id.get()
pushint 78 // 78                                                                                                                                                                                                                                                                 //    (1634)                                                                     Int(GlobalStateHandler.instrument_size)
*                                                                                                                                                                                                                                                                                //    (1636)                                                                     instrument_id.get() * Int(GlobalStateHandler.instrument_size)
frame_dig 37                                                                                                                                                                                                                                                                     //    (1637)                                                                     new_entry.encode()
box_replace                                                                                                                                                                                                                                                                      //    (1639)                                                                     App.box_replace(Bytes('i'), instrument_id.get() * Int(GlobalStateHandler.instrument_size), new_entry.encode())
retsub                                                                                                                                                                                                                                                                           //    (1640)  contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/library/pricecaster.py                   47      def get_normalized_price(instrument_id: InstrumentId, *, output: abi.Uint64) -> Expr:
// get_normalized_price                                                                                                                                                                                                                                                          //
getnormalizedprice_15:                                                                                                                                                                                                                                                           //
proto 1 1                                                                                                                                                                                                                                                                        //    (1641)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1644)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (1645)
dupn 2                                                                                                                                                                                                                                                                           //    (1646)  contracts_unified/library/pricecaster.py                   47      def get_normalized_price(instrument_id: InstrumentId, *, output: abi.Uint64) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1648)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 3                                                                                                                                                                                                                                                                           //    (1649)  contracts_unified/library/pricecaster.py                   47      def get_normalized_price(instrument_id: InstrumentId, *, output: abi.Uint64) -> Expr:
bytec 4 // "p"                                                                                                                                                                                                                                                                   //    (1651)  contracts_unified/core/state_handler/global_handler.py     31      Bytes('p')
app_global_get                                                                                                                                                                                                                                                                   //    (1653)                                                             82      App.globalGet(KEY_PRICECASTER_ID)
frame_bury 4                                                                                                                                                                                                                                                                     //    (1654)  contracts_unified/library/pricecaster.py                   62      pricecaster.set(GlobalStateHandler.get_pricecaster_id())
frame_dig -1                                                                                                                                                                                                                                                                     //    (1656)                                                             65      instrument_id.get()
pushint 92 // 92                                                                                                                                                                                                                                                                 //    (1658)                                                                     Int(entry_size)
*                                                                                                                                                                                                                                                                                //    (1660)                                                                     instrument_id.get() * Int(entry_size)
frame_bury 5                                                                                                                                                                                                                                                                     //    (1661)                                                                     ptr.set(instrument_id.get() * Int(entry_size))
frame_dig 5                                                                                                                                                                                                                                                                      //    (1663)                                                             68      ptr.get()
pushint 127 // 127                                                                                                                                                                                                                                                               //    (1665)                                                                     Int(slot_size)
/                                                                                                                                                                                                                                                                                //    (1667)                                                                     ptr.get() / Int(slot_size)
frame_bury 6                                                                                                                                                                                                                                                                     //    (1668)                                                                     start.set(ptr.get() / Int(slot_size))
frame_dig 5                                                                                                                                                                                                                                                                      //    (1670)                                                             71      ptr.get()
pushint 92 // 92                                                                                                                                                                                                                                                                 //    (1672)                                                                     Int(entry_size)
+                                                                                                                                                                                                                                                                                //    (1674)                                                                     ptr.get() + Int(entry_size)
pushint 127 // 127                                                                                                                                                                                                                                                               //    (1675)                                                                     Int(slot_size)
/                                                                                                                                                                                                                                                                                //    (1677)                                                                     (ptr.get() + Int(entry_size)) / Int(slot_size)
frame_bury 7                                                                                                                                                                                                                                                                     //    (1678)                                                                     end.set((ptr.get() + Int(entry_size)) / Int(slot_size))
frame_dig 4                                                                                                                                                                                                                                                                      //    (1680)                                                             74      pricecaster.get()
frame_dig 6                                                                                                                                                                                                                                                                      //    (1682)                                                                     start.get()
itob                                                                                                                                                                                                                                                                             //    (1684)                                                             44      Itob(page)
extract 7 1                                                                                                                                                                                                                                                                      //    (1685)                                                                     Extract(Itob(page), Int(7), Int(1))
app_global_get_ex                                                                                                                                                                                                                                                                //    (1688)                                                             74      App.globalGetEx(pricecaster.get(), _get_key(start.get()))
store 8                                                                                                                                                                                                                                                                          //    (1689)
store 7                                                                                                                                                                                                                                                                          //    (1691)
load 8                                                                                                                                                                                                                                                                           //    (1693)                                                             75      page.hasValue()
assert                                                                                                                                                                                                                                                                           //    (1695)                                                                     Assert(page.hasValue())
load 7                                                                                                                                                                                                                                                                           //    (1696)                                                             76      page.value()
store 6                                                                                                                                                                                                                                                                          //    (1698)                                                                     data.store(page.value())
frame_dig 6                                                                                                                                                                                                                                                                      //    (1700)                                                             79      start.get()
frame_dig 7                                                                                                                                                                                                                                                                      //    (1702)                                                                     end.get()
<                                                                                                                                                                                                                                                                                //    (1704)                                                                     start.get() < end.get()
bz getnormalizedprice_15_l2                                                                                                                                                                                                                                                      //    (1705)                                                                     If(start.get() < end.get())
frame_dig 4                                                                                                                                                                                                                                                                      //    (1708)                                                             81      pricecaster.get()
frame_dig 7                                                                                                                                                                                                                                                                      //    (1710)                                                                     end.get()
itob                                                                                                                                                                                                                                                                             //    (1712)                                                             44      Itob(page)
extract 7 1                                                                                                                                                                                                                                                                      //    (1713)                                                                     Extract(Itob(page), Int(7), Int(1))
app_global_get_ex                                                                                                                                                                                                                                                                //    (1716)                                                             81      App.globalGetEx(pricecaster.get(), _get_key(end.get()))
store 10                                                                                                                                                                                                                                                                         //    (1717)
store 9                                                                                                                                                                                                                                                                          //    (1719)
load 10                                                                                                                                                                                                                                                                          //    (1721)                                                             82      page2.hasValue()
assert                                                                                                                                                                                                                                                                           //    (1723)                                                                     Assert(page2.hasValue())
load 6                                                                                                                                                                                                                                                                           //    (1724)                                                             83      data.load()
load 9                                                                                                                                                                                                                                                                           //    (1726)                                                                     page2.value()
concat                                                                                                                                                                                                                                                                           //    (1728)                                                                     Concat(data.load(), page2.value())
store 6                                                                                                                                                                                                                                                                          //    (1729)                                                                     data.store(Concat(data.load(), page2.value()))
getnormalizedprice_15_l2:                                                                                                                                                                                                                                                        //                                                                       79      If(start.get() < end.get())
load 6                                                                                                                                                                                                                                                                           //    (1731)                                                             87      data.load()
frame_dig 5                                                                                                                                                                                                                                                                      //    (1733)                                                                     ptr.get()
pushint 127 // 127                                                                                                                                                                                                                                                               //    (1735)                                                                     Int(slot_size)
%                                                                                                                                                                                                                                                                                //    (1737)                                                                     ptr.get() % Int(slot_size)
pushint 92 // 92                                                                                                                                                                                                                                                                 //    (1738)                                                                     Int(entry_size)
extract3                                                                                                                                                                                                                                                                         //    (1740)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 3                                                                                                                                                                                                                                                                     //    (1741)  contracts_unified/library/pricecaster.py                   87      entry.decode(Extract(data.load(), ptr.get() % Int(slot_size), Int(entry_size)))
frame_dig 3                                                                                                                                                                                                                                                                      //    (1743)                                                             88      entry.normalized_price.store_into(output)
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (1745)
extract_uint64                                                                                                                                                                                                                                                                   //    (1747)
frame_bury 0                                                                                                                                                                                                                                                                     //    (1748)
retsub                                                                                                                                                                                                                                                                           //    (1750)                                                             47      def get_normalized_price(instrument_id: InstrumentId, *, output: abi.Uint64) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/internal/health_check.py                    def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
// health_check                                                                                                                                                                                                                                                                  //
healthcheck_16:                                                                                                                                                                                                                                                                  //
proto 2 1                                                                                                                                                                                                                                                                        //    (1751)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1754)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (1755)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (1756)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1757)
dupn 3                                                                                                                                                                                                                                                                           //    (1758)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (1760)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1761)
dupn 10                                                                                                                                                                                                                                                                          //    (1762)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1764)                                                             77      Int(0)
frame_bury 0                                                                                                                                                                                                                                                                     //    (1765)                                                                     output.set(Int(0))
frame_dig -2                                                                                                                                                                                                                                                                     //    (1767)  contracts_unified/core/state_handler/local_handler.py      67      def get_user_instrument_count(account: AccountAddress, *, output: abi.Uint64) -> Expr:
callsub getuserinstrumentcount_4                                                                                                                                                                                                                                                 //    (1769)  contracts_unified/core/internal/health_check.py            80      LocalStateHandler.get_user_instrument_count(account)
frame_bury 1                                                                                                                                                                                                                                                                     //    (1772)                                                                     count.set(cast(abi.ReturnedValue, LocalStateHandler.get_user_instrument_count(account)))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1774)                                                             82      Int(0)
frame_bury 6                                                                                                                                                                                                                                                                     //    (1775)                                                                     instrument_id.set(Int(0))
frame_dig 6                                                                                                                                                                                                                                                                      //    (1777)
intc 5 // 256                                                                                                                                                                                                                                                                    //    (1779)
<                                                                                                                                                                                                                                                                                //    (1781)
assert                                                                                                                                                                                                                                                                           //    (1782)
healthcheck_16_l1:                                                                                                                                                                                                                                                               //                                                                       81      For(instrument_id.set(Int(0)), instrument_id.get() < count.get(), instrument_id.set(instrument_id.get() + Int(1)))
frame_dig 6                                                                                                                                                                                                                                                                      //    (1783)                                                             83      instrument_id.get()
frame_dig 1                                                                                                                                                                                                                                                                      //    (1785)                                                                     count.get()
<                                                                                                                                                                                                                                                                                //    (1787)                                                                     instrument_id.get() < count.get()
bz healthcheck_16_l17                                                                                                                                                                                                                                                            //    (1788)                                                             81      For(instrument_id.set(Int(0)), instrument_id.get() < count.get(), instrument_id.set(instrument_id.get() + Int(1)))
frame_dig -2                                                                                                                                                                                                                                                                     //    (1791)  contracts_unified/core/state_handler/local_handler.py      39      def get_position(account: AccountAddress, instrument_id: InstrumentId, *, output: UserInstrumentData) -> Expr:
frame_dig 6                                                                                                                                                                                                                                                                      //    (1793)
callsub getposition_3                                                                                                                                                                                                                                                            //    (1795)  contracts_unified/core/internal/health_check.py            88      LocalStateHandler.get_position(account, instrument_id)
frame_bury 2                                                                                                                                                                                                                                                                     //    (1798)                                                                     user_data.set(cast(abi.ReturnedValue, LocalStateHandler.get_position(account, instrument_id)))
frame_dig 2                                                                                                                                                                                                                                                                      //    (1800)                                                             89      cash.set(user_data.cash)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1802)
extract_uint64                                                                                                                                                                                                                                                                   //    (1803)
frame_bury 3                                                                                                                                                                                                                                                                     //    (1804)
frame_dig 2                                                                                                                                                                                                                                                                      //    (1806)                                                             90      principal.set(user_data.principal)
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (1808)
extract_uint64                                                                                                                                                                                                                                                                   //    (1810)
frame_bury 4                                                                                                                                                                                                                                                                     //    (1811)
frame_dig 2                                                                                                                                                                                                                                                                      //    (1813)                                                             91      index.set(user_data.index)
pushint 16 // 16                                                                                                                                                                                                                                                                 //    (1815)
extract_uint64                                                                                                                                                                                                                                                                   //    (1817)
frame_bury 5                                                                                                                                                                                                                                                                     //    (1818)
frame_dig 3                                                                                                                                                                                                                                                                      //    (1820)                                                             93      cash.get()
frame_dig 4                                                                                                                                                                                                                                                                      //    (1822)                                                                     principal.get()
|                                                                                                                                                                                                                                                                                //    (1824)                                                                     cash.get() | principal.get()
bnz healthcheck_16_l4                                                                                                                                                                                                                                                            //    (1825)                                                                     If(cash.get() | principal.get())
healthcheck_16_l3:                                                                                                                                                                                                                                                               //                                                                       81      For(instrument_id.set(Int(0)), instrument_id.get() < count.get(), instrument_id.set(instrument_id.get() + Int(1)))
frame_dig 6                                                                                                                                                                                                                                                                      //    (1828)                                                             84      instrument_id.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (1830)                                                                     Int(1)
+                                                                                                                                                                                                                                                                                //    (1831)                                                                     instrument_id.get() + Int(1)
frame_bury 6                                                                                                                                                                                                                                                                     //    (1832)                                                                     instrument_id.set(instrument_id.get() + Int(1))
frame_dig 6                                                                                                                                                                                                                                                                      //    (1834)
intc 5 // 256                                                                                                                                                                                                                                                                    //    (1836)
<                                                                                                                                                                                                                                                                                //    (1838)
assert                                                                                                                                                                                                                                                                           //    (1839)
b healthcheck_16_l1                                                                                                                                                                                                                                                              //    (1840)                                                             81      For(instrument_id.set(Int(0)), instrument_id.get() < count.get(), instrument_id.set(instrument_id.get() + Int(1)))
healthcheck_16_l4:                                                                                                                                                                                                                                                               //                                                                       101     If(principal.get() != Int(0))
frame_dig 6                                                                                                                                                                                                                                                                      //    (1843)  contracts_unified/library/pricecaster.py                   47      def get_normalized_price(instrument_id: InstrumentId, *, output: abi.Uint64) -> Expr:
callsub getnormalizedprice_15                                                                                                                                                                                                                                                    //    (1845)  contracts_unified/core/internal/health_check.py            95      get_normalized_price(instrument_id)
frame_bury 14                                                                                                                                                                                                                                                                    //    (1848)                                                                     price.set(cast(abi.ReturnedValue, get_normalized_price(instrument_id)))
frame_dig 6                                                                                                                                                                                                                                                                      //    (1850)  contracts_unified/core/state_handler/global_handler.py     202     def get_instrument(instrument_id: InstrumentId, *, output: InstrumentListElement) -> Expr:
callsub getinstrument_2                                                                                                                                                                                                                                                          //    (1852)  contracts_unified/core/internal/health_check.py            98      GlobalStateHandler.get_instrument(instrument_id)
frame_bury 7                                                                                                                                                                                                                                                                     //    (1855)                                                                     instrument.set(cast(abi.ReturnedValue, GlobalStateHandler.get_instrument(instrument_id)))
frame_dig 4                                                                                                                                                                                                                                                                      //    (1857)                                                             101     principal.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1859)                                                                     Int(0)
!=                                                                                                                                                                                                                                                                               //    (1860)                                                                     principal.get() != Int(0)
bnz healthcheck_16_l14                                                                                                                                                                                                                                                           //    (1861)                                                                     If(principal.get() != Int(0))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1864)                                                             117     Int(0)
frame_bury 10                                                                                                                                                                                                                                                                    //    (1865)                                                                     has_lend.set(Int(0))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1867)                                                             118     Int(0)
frame_bury 8                                                                                                                                                                                                                                                                     //    (1868)                                                                     loaned_balance.set(Int(0))
healthcheck_16_l6:                                                                                                                                                                                                                                                               //                                                                       126     If(use_maint.get())
frame_dig 3                                                                                                                                                                                                                                                                      //    (1870)                                                             122     cash.get()
frame_dig 8                                                                                                                                                                                                                                                                      //    (1872)                                                                     loaned_balance.get()
callsub signedadd_9                                                                                                                                                                                                                                                              //    (1874)                                                                     signed_add(cash.get(), loaned_balance.get())
frame_bury 9                                                                                                                                                                                                                                                                     //    (1877)                                                                     balance_sum.set(signed_add(cash.get(), loaned_balance.get()))
frame_dig -1                                                                                                                                                                                                                                                                     //    (1879)                                                             126     use_maint.get()
bnz healthcheck_16_l13                                                                                                                                                                                                                                                           //    (1881)                                                                     If(use_maint.get())
frame_dig 7                                                                                                                                                                                                                                                                      //    (1884)                                                             132     instrument.initial_haircut.store_into(haircut)
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (1886)
extract_uint16                                                                                                                                                                                                                                                                   //    (1888)
frame_bury 11                                                                                                                                                                                                                                                                    //    (1889)
frame_dig 7                                                                                                                                                                                                                                                                      //    (1891)                                                             133     instrument.initial_margin.store_into(margin)
pushint 10 // 10                                                                                                                                                                                                                                                                 //    (1893)
extract_uint16                                                                                                                                                                                                                                                                   //    (1895)
frame_bury 12                                                                                                                                                                                                                                                                    //    (1896)
healthcheck_16_l8:                                                                                                                                                                                                                                                               //                                                                       141     If(signed_ltz(balance_sum.get()))
frame_dig 7                                                                                                                                                                                                                                                                      //    (1898)                                                             137     instrument.optimal_utilization.store_into(optimal_utilization)
pushint 36 // 36                                                                                                                                                                                                                                                                 //    (1900)
extract_uint16                                                                                                                                                                                                                                                                   //    (1902)
frame_bury 13                                                                                                                                                                                                                                                                    //    (1903)
frame_dig 9                                                                                                                                                                                                                                                                      //    (1905)                                                             141     balance_sum.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (1907)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (1908)                                                                     value & Int(9223372036854775808)
bnz healthcheck_16_l12                                                                                                                                                                                                                                                           //    (1909)  contracts_unified/core/internal/health_check.py            141     If(signed_ltz(balance_sum.get()))
frame_dig 0                                                                                                                                                                                                                                                                      //    (1912)                                                             146     output.get()
frame_dig 14                                                                                                                                                                                                                                                                     //    (1914)                                                                     price.get()
frame_dig 9                                                                                                                                                                                                                                                                      //    (1916)                                                                     balance_sum.get()
mulw                                                                                                                                                                                                                                                                             //    (1918)                                                                     WideRatio([price.get(), balance_sum.get(), Int(RATIO_ONE) - haircut.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE)])
intc 4 // 1000                                                                                                                                                                                                                                                                   //    (1919)                                                                     Int(RATIO_ONE)
frame_dig 11                                                                                                                                                                                                                                                                     //    (1921)                                                                     haircut.get()
-                                                                                                                                                                                                                                                                                //    (1923)                                                                     Int(RATIO_ONE) - haircut.get()
uncover 2                                                                                                                                                                                                                                                                        //    (1924)                                                                     WideRatio([price.get(), balance_sum.get(), Int(RATIO_ONE) - haircut.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE)])
dig 1                                                                                                                                                                                                                                                                            //    (1926)
*                                                                                                                                                                                                                                                                                //    (1928)
cover 2                                                                                                                                                                                                                                                                          //    (1929)
mulw                                                                                                                                                                                                                                                                             //    (1931)
cover 2                                                                                                                                                                                                                                                                          //    (1932)
+                                                                                                                                                                                                                                                                                //    (1934)
swap                                                                                                                                                                                                                                                                             //    (1935)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1936)
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (1937)                                                                     Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE)
divmodw                                                                                                                                                                                                                                                                          //    (1938)                                                                     WideRatio([price.get(), balance_sum.get(), Int(RATIO_ONE) - haircut.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE)])
pop                                                                                                                                                                                                                                                                              //    (1939)
pop                                                                                                                                                                                                                                                                              //    (1940)
swap                                                                                                                                                                                                                                                                             //    (1941)
!                                                                                                                                                                                                                                                                                //    (1942)
assert                                                                                                                                                                                                                                                                           //    (1943)
callsub signedadd_9                                                                                                                                                                                                                                                              //    (1944)                                                                     signed_add(output.get(), WideRatio([price.get(), balance_sum.get(), Int(RATIO_ONE) - haircut.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE)]))
frame_bury 0                                                                                                                                                                                                                                                                     //    (1947)                                                                     output.set(signed_add(output.get(), WideRatio([price.get(), balance_sum.get(), Int(RATIO_ONE) - haircut.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE)])))
healthcheck_16_l10:                                                                                                                                                                                                                                                              //                                                                       151     If(has_lend.get())
frame_dig 10                                                                                                                                                                                                                                                                     //    (1949)                                                                     has_lend.get()
bz healthcheck_16_l3                                                                                                                                                                                                                                                             //    (1951)                                                                     If(has_lend.get())
frame_dig 0                                                                                                                                                                                                                                                                      //    (1954)                                                             155     output.get()
frame_dig 14                                                                                                                                                                                                                                                                     //    (1956)                                                             157     price.get()
frame_dig 8                                                                                                                                                                                                                                                                      //    (1958)                                                                     loaned_balance.get()
mulw                                                                                                                                                                                                                                                                             //    (1960)                                                             156     WideRatio([price.get(), loaned_balance.get(), Int(RATIO_ONE) - haircut.get(), optimal_utilization.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE * RATIO_ONE)])
intc 4 // 1000                                                                                                                                                                                                                                                                   //    (1961)                                                             157     Int(RATIO_ONE)
frame_dig 11                                                                                                                                                                                                                                                                     //    (1963)                                                                     haircut.get()
-                                                                                                                                                                                                                                                                                //    (1965)                                                                     Int(RATIO_ONE) - haircut.get()
uncover 2                                                                                                                                                                                                                                                                        //    (1966)                                                             156     WideRatio([price.get(), loaned_balance.get(), Int(RATIO_ONE) - haircut.get(), optimal_utilization.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE * RATIO_ONE)])
dig 1                                                                                                                                                                                                                                                                            //    (1968)
*                                                                                                                                                                                                                                                                                //    (1970)
cover 2                                                                                                                                                                                                                                                                          //    (1971)
mulw                                                                                                                                                                                                                                                                             //    (1973)
cover 2                                                                                                                                                                                                                                                                          //    (1974)
+                                                                                                                                                                                                                                                                                //    (1976)
swap                                                                                                                                                                                                                                                                             //    (1977)
frame_dig 13                                                                                                                                                                                                                                                                     //    (1978)                                                             157     optimal_utilization.get()
uncover 2                                                                                                                                                                                                                                                                        //    (1980)                                                             156     WideRatio([price.get(), loaned_balance.get(), Int(RATIO_ONE) - haircut.get(), optimal_utilization.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE * RATIO_ONE)])
dig 1                                                                                                                                                                                                                                                                            //    (1982)
*                                                                                                                                                                                                                                                                                //    (1984)
cover 2                                                                                                                                                                                                                                                                          //    (1985)
mulw                                                                                                                                                                                                                                                                             //    (1987)
cover 2                                                                                                                                                                                                                                                                          //    (1988)
+                                                                                                                                                                                                                                                                                //    (1990)
swap                                                                                                                                                                                                                                                                             //    (1991)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (1992)
intc 8 // 1000000000000000                                                                                                                                                                                                                                                       //    (1993)                                                             159     Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE * RATIO_ONE)
divmodw                                                                                                                                                                                                                                                                          //    (1995)                                                             156     WideRatio([price.get(), loaned_balance.get(), Int(RATIO_ONE) - haircut.get(), optimal_utilization.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE * RATIO_ONE)])
pop                                                                                                                                                                                                                                                                              //    (1996)
pop                                                                                                                                                                                                                                                                              //    (1997)
swap                                                                                                                                                                                                                                                                             //    (1998)
!                                                                                                                                                                                                                                                                                //    (1999)
assert                                                                                                                                                                                                                                                                           //    (2000)
callsub signedsub_10                                                                                                                                                                                                                                                             //    (2001)                                                             154     signed_sub(output.get(), WideRatio([price.get(), loaned_balance.get(), Int(RATIO_ONE) - haircut.get(), optimal_utilization.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE * RATIO_ONE)]))
frame_bury 0                                                                                                                                                                                                                                                                     //    (2004)                                                             153     output.set(signed_sub(output.get(), WideRatio([price.get(), loaned_balance.get(), Int(RATIO_ONE) - haircut.get(), optimal_utilization.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE * RATIO_ONE)])))
b healthcheck_16_l3                                                                                                                                                                                                                                                              //    (2006)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
healthcheck_16_l12:                                                                                                                                                                                                                                                              //            contracts_unified/core/internal/health_check.py            141     If(signed_ltz(balance_sum.get()))
frame_dig 0                                                                                                                                                                                                                                                                      //    (2009)                                                             143     output.get()
frame_dig 14                                                                                                                                                                                                                                                                     //    (2011)                                                                     price.get()
frame_dig 9                                                                                                                                                                                                                                                                      //    (2013)                                                                     balance_sum.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (2015)                                                                     signed_neg(balance_sum.get())
mulw                                                                                                                                                                                                                                                                             //    (2018)                                                                     WideRatio([price.get(), signed_neg(balance_sum.get()), Int(RATIO_ONE) + margin.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE)])
intc 4 // 1000                                                                                                                                                                                                                                                                   //    (2019)                                                                     Int(RATIO_ONE)
frame_dig 12                                                                                                                                                                                                                                                                     //    (2021)                                                                     margin.get()
+                                                                                                                                                                                                                                                                                //    (2023)                                                                     Int(RATIO_ONE) + margin.get()
uncover 2                                                                                                                                                                                                                                                                        //    (2024)                                                                     WideRatio([price.get(), signed_neg(balance_sum.get()), Int(RATIO_ONE) + margin.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE)])
dig 1                                                                                                                                                                                                                                                                            //    (2026)
*                                                                                                                                                                                                                                                                                //    (2028)
cover 2                                                                                                                                                                                                                                                                          //    (2029)
mulw                                                                                                                                                                                                                                                                             //    (2031)
cover 2                                                                                                                                                                                                                                                                          //    (2032)
+                                                                                                                                                                                                                                                                                //    (2034)
swap                                                                                                                                                                                                                                                                             //    (2035)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2036)
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (2037)                                                                     Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE)
divmodw                                                                                                                                                                                                                                                                          //    (2038)                                                                     WideRatio([price.get(), signed_neg(balance_sum.get()), Int(RATIO_ONE) + margin.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE)])
pop                                                                                                                                                                                                                                                                              //    (2039)
pop                                                                                                                                                                                                                                                                              //    (2040)
swap                                                                                                                                                                                                                                                                             //    (2041)
!                                                                                                                                                                                                                                                                                //    (2042)
assert                                                                                                                                                                                                                                                                           //    (2043)
callsub signedsub_10                                                                                                                                                                                                                                                             //    (2044)                                                                     signed_sub(output.get(), WideRatio([price.get(), signed_neg(balance_sum.get()), Int(RATIO_ONE) + margin.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE)]))
frame_bury 0                                                                                                                                                                                                                                                                     //    (2047)                                                                     output.set(signed_sub(output.get(), WideRatio([price.get(), signed_neg(balance_sum.get()), Int(RATIO_ONE) + margin.get()], [Int(PRICECASTER_RESCALE_FACTOR * RATIO_ONE)])))
b healthcheck_16_l10                                                                                                                                                                                                                                                             //    (2049)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
healthcheck_16_l13:                                                                                                                                                                                                                                                              //            contracts_unified/core/internal/health_check.py            126     If(use_maint.get())
frame_dig 7                                                                                                                                                                                                                                                                      //    (2052)                                                             128     instrument.maintenance_haircut.store_into(haircut)
pushint 12 // 12                                                                                                                                                                                                                                                                 //    (2054)
extract_uint16                                                                                                                                                                                                                                                                   //    (2056)
frame_bury 11                                                                                                                                                                                                                                                                    //    (2057)
frame_dig 7                                                                                                                                                                                                                                                                      //    (2059)                                                             129     instrument.maintenance_margin.store_into(margin)
pushint 14 // 14                                                                                                                                                                                                                                                                 //    (2061)
extract_uint16                                                                                                                                                                                                                                                                   //    (2063)
frame_bury 12                                                                                                                                                                                                                                                                    //    (2064)
b healthcheck_16_l8                                                                                                                                                                                                                                                              //    (2066)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
healthcheck_16_l14:                                                                                                                                                                                                                                                              //            contracts_unified/core/internal/health_check.py            104     If(has_lend.get())
frame_dig 4                                                                                                                                                                                                                                                                      //    (2069)                                                             103     principal.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (2071)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (2072)                                                                     value & Int(9223372036854775808)
!                                                                                                                                                                                                                                                                                //    (2073)  contracts_unified/core/internal/health_check.py            103     Not(signed_ltz(principal.get()))
frame_bury 10                                                                                                                                                                                                                                                                    //    (2074)                                                                     has_lend.set(Not(signed_ltz(principal.get())))
frame_dig 10                                                                                                                                                                                                                                                                     //    (2076)                                                             104     has_lend.get()
bnz healthcheck_16_l16                                                                                                                                                                                                                                                           //    (2078)                                                                     If(has_lend.get())
frame_dig 7                                                                                                                                                                                                                                                                      //    (2081)                                                             111     instrument.borrow_index.use(lambda borrow_index: loaned_balance.set(calculate_accrued_borrow(principal, index, borrow_index)))
pushint 20 // 20                                                                                                                                                                                                                                                                 //    (2083)
extract_uint64                                                                                                                                                                                                                                                                   //    (2085)
frame_bury 16                                                                                                                                                                                                                                                                    //    (2086)
frame_dig 4                                                                                                                                                                                                                                                                      //    (2088)  contracts_unified/core/internal/perform_pool_move.py       55      user_principal.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (2090)                                                                     signed_neg(user_principal.get())
frame_bury 17                                                                                                                                                                                                                                                                    //    (2093)                                                                     borrowed.set(signed_neg(user_principal.get()))
frame_dig 17                                                                                                                                                                                                                                                                     //    (2095)                                                             56      borrowed.get()
frame_dig 16                                                                                                                                                                                                                                                                     //    (2097)                                                                     pool_borrow_index.get()
mulw                                                                                                                                                                                                                                                                             //    (2099)                                                                     WideRatio([borrowed.get(), pool_borrow_index.get()], [user_index.get()])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2100)
frame_dig 5                                                                                                                                                                                                                                                                      //    (2101)                                                                     user_index.get()
divmodw                                                                                                                                                                                                                                                                          //    (2103)                                                                     WideRatio([borrowed.get(), pool_borrow_index.get()], [user_index.get()])
pop                                                                                                                                                                                                                                                                              //    (2104)
pop                                                                                                                                                                                                                                                                              //    (2105)
swap                                                                                                                                                                                                                                                                             //    (2106)
!                                                                                                                                                                                                                                                                                //    (2107)
assert                                                                                                                                                                                                                                                                           //    (2108)
frame_bury 18                                                                                                                                                                                                                                                                    //    (2109)                                                                     result.set(WideRatio([borrowed.get(), pool_borrow_index.get()], [user_index.get()]))
frame_dig 18                                                                                                                                                                                                                                                                     //    (2111)                                                             57      result.get()
frame_dig 18                                                                                                                                                                                                                                                                     //    (2113)                                                                     result.get()
frame_dig 17                                                                                                                                                                                                                                                                     //    (2115)                                                                     borrowed.get()
==                                                                                                                                                                                                                                                                               //    (2117)                                                                     result.get() == borrowed.get()
+                                                                                                                                                                                                                                                                                //    (2118)                                                                     result.get() + (result.get() == borrowed.get())
callsub signedneg_7                                                                                                                                                                                                                                                              //    (2119)                                                                     signed_neg(result.get() + (result.get() == borrowed.get()))
frame_bury 8                                                                                                                                                                                                                                                                     //    (2122)  contracts_unified/core/internal/health_check.py            112     loaned_balance.set(calculate_accrued_borrow(principal, index, borrow_index))
b healthcheck_16_l6                                                                                                                                                                                                                                                              //    (2124)                                                             104     If(has_lend.get())
healthcheck_16_l16:                                                                                                                                                                                                                                                              //
frame_dig 7                                                                                                                                                                                                                                                                      //    (2127)                                                             106     instrument.lend_index.use(lambda lend_index: loaned_balance.set(calculate_accrued_lend(principal, index, lend_index)))
pushint 28 // 28                                                                                                                                                                                                                                                                 //    (2129)
extract_uint64                                                                                                                                                                                                                                                                   //    (2131)
frame_bury 15                                                                                                                                                                                                                                                                    //    (2132)
frame_dig 4                                                                                                                                                                                                                                                                      //    (2134)  contracts_unified/core/internal/perform_pool_move.py       69      user_principal.get()
frame_dig 15                                                                                                                                                                                                                                                                     //    (2136)                                                                     pool_lend_index.get()
mulw                                                                                                                                                                                                                                                                             //    (2138)                                                                     WideRatio([user_principal.get(), pool_lend_index.get()], [user_index.get()])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2139)
frame_dig 5                                                                                                                                                                                                                                                                      //    (2140)                                                                     user_index.get()
divmodw                                                                                                                                                                                                                                                                          //    (2142)                                                                     WideRatio([user_principal.get(), pool_lend_index.get()], [user_index.get()])
pop                                                                                                                                                                                                                                                                              //    (2143)
pop                                                                                                                                                                                                                                                                              //    (2144)
swap                                                                                                                                                                                                                                                                             //    (2145)
!                                                                                                                                                                                                                                                                                //    (2146)
assert                                                                                                                                                                                                                                                                           //    (2147)
frame_bury 8                                                                                                                                                                                                                                                                     //    (2148)  contracts_unified/core/internal/health_check.py            107     loaned_balance.set(calculate_accrued_lend(principal, index, lend_index))
b healthcheck_16_l6                                                                                                                                                                                                                                                              //    (2150)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
healthcheck_16_l17:                                                                                                                                                                                                                                                              //            contracts_unified/core/internal/health_check.py            81      For(instrument_id.set(Int(0)), instrument_id.get() < count.get(), instrument_id.set(instrument_id.get() + Int(1)))
frame_dig -2                                                                                                                                                                                                                                                                     //    (2153)                                                             167     account.get()
frame_dig 0                                                                                                                                                                                                                                                                      //    (2155)                                                                     output.get()
itob                                                                                                                                                                                                                                                                             //    (2157)                                                                     Itob(output.get())
concat                                                                                                                                                                                                                                                                           //    (2158)                                                                     Concat(account.get(), Itob(output.get()))
log                                                                                                                                                                                                                                                                              //    (2159)                                                                     Log(Concat(account.get(), Itob(output.get())))
retsub                                                                                                                                                                                                                                                                           //    (2160)                                                             47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/internal/move.py                    34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
// signed_add_to_cash                                                                                                                                                                                                                                                            //
signedaddtocash_17:                                                                                                                                                                                                                                                              //
proto 3 0                                                                                                                                                                                                                                                                        //    (2161)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (2164)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2165)
dupn 5                                                                                                                                                                                                                                                                           //    (2166)  contracts_unified/core/internal/move.py                    34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (2168)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (2169)  contracts_unified/core/internal/move.py                    34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig -3                                                                                                                                                                                                                                                                     //    (2170)  contracts_unified/core/state_handler/local_handler.py      39      def get_position(account: AccountAddress, instrument_id: InstrumentId, *, output: UserInstrumentData) -> Expr:
frame_dig -2                                                                                                                                                                                                                                                                     //    (2172)
callsub getposition_3                                                                                                                                                                                                                                                            //    (2174)  contracts_unified/core/internal/move.py                    46      LocalStateHandler.get_position(account, instrument_id)
frame_bury 0                                                                                                                                                                                                                                                                     //    (2177)                                                                     data.set(cast(abi.ReturnedValue, LocalStateHandler.get_position(account, instrument_id)))
frame_dig 0                                                                                                                                                                                                                                                                      //    (2179)                                                             49      data.cash.use(lambda cash: new_cash.set(signed_add(amount.get(), cash.get())))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2181)
extract_uint64                                                                                                                                                                                                                                                                   //    (2182)
frame_bury 2                                                                                                                                                                                                                                                                     //    (2183)
frame_dig -1                                                                                                                                                                                                                                                                     //    (2185)                                                             50      amount.get()
frame_dig 2                                                                                                                                                                                                                                                                      //    (2187)                                                                     cash.get()
callsub signedadd_9                                                                                                                                                                                                                                                              //    (2189)                                                                     signed_add(amount.get(), cash.get())
frame_bury 1                                                                                                                                                                                                                                                                     //    (2192)                                                                     new_cash.set(signed_add(amount.get(), cash.get()))
frame_dig 1                                                                                                                                                                                                                                                                      //    (2194)                                                             54      new_cash.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (2196)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (2197)                                                                     value & Int(9223372036854775808)
!                                                                                                                                                                                                                                                                                //    (2198)  contracts_unified/core/internal/move.py                    54      Not(signed_ltz(new_cash.get()))
assert                                                                                                                                                                                                                                                                           //    (2199)                                                                     Assert(Not(signed_ltz(new_cash.get())))
frame_dig 0                                                                                                                                                                                                                                                                      //    (2200)                                                             57      data.principal.use(lambda principal: data.index.use(lambda index: data.set(new_cash, principal, index)))
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (2202)
extract_uint64                                                                                                                                                                                                                                                                   //    (2204)
frame_bury 3                                                                                                                                                                                                                                                                     //    (2205)
frame_dig 0                                                                                                                                                                                                                                                                      //    (2207)                                                             58      data.index.use(lambda index: data.set(new_cash, principal, index))
pushint 16 // 16                                                                                                                                                                                                                                                                 //    (2209)
extract_uint64                                                                                                                                                                                                                                                                   //    (2211)
frame_bury 4                                                                                                                                                                                                                                                                     //    (2212)
frame_dig 1                                                                                                                                                                                                                                                                      //    (2214)                                                             59      data.set(new_cash, principal, index)
itob                                                                                                                                                                                                                                                                             //    (2216)
frame_dig 3                                                                                                                                                                                                                                                                      //    (2217)
itob                                                                                                                                                                                                                                                                             //    (2219)
concat                                                                                                                                                                                                                                                                           //    (2220)
frame_dig 4                                                                                                                                                                                                                                                                      //    (2221)
itob                                                                                                                                                                                                                                                                             //    (2223)
concat                                                                                                                                                                                                                                                                           //    (2224)
frame_bury 0                                                                                                                                                                                                                                                                     //    (2225)
frame_dig -3                                                                                                                                                                                                                                                                     //    (2227)  contracts_unified/core/state_handler/local_handler.py      63      account.get()
frame_dig -2                                                                                                                                                                                                                                                                     //    (2229)                                                                     instrument_id.get()
pushint 24 // 24                                                                                                                                                                                                                                                                 //    (2231)                                                                     Int(LocalStateHandler.position_size)
*                                                                                                                                                                                                                                                                                //    (2233)                                                                     instrument_id.get() * Int(LocalStateHandler.position_size)
frame_dig 0                                                                                                                                                                                                                                                                      //    (2234)                                                                     data.encode()
box_replace                                                                                                                                                                                                                                                                      //    (2236)                                                                     App.box_replace(account.get(), instrument_id.get() * Int(LocalStateHandler.position_size), data.encode())
retsub                                                                                                                                                                                                                                                                           //    (2237)  contracts_unified/core/internal/move.py                    34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       71      def signed_add_to_pool(account: AccountAddress, instrument_id: InstrumentId, amount: SignedAmount) -> Expr:
// signed_add_to_pool                                                                                                                                                                                                                                                            //
signedaddtopool_18:                                                                                                                                                                                                                                                              //
proto 3 0                                                                                                                                                                                                                                                                        //    (2238)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (2241)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2242)
dupn 5                                                                                                                                                                                                                                                                           //    (2243)  contracts_unified/core/internal/move.py                    71      def signed_add_to_pool(account: AccountAddress, instrument_id: InstrumentId, amount: SignedAmount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (2245)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (2246)  contracts_unified/core/internal/move.py                    71      def signed_add_to_pool(account: AccountAddress, instrument_id: InstrumentId, amount: SignedAmount) -> Expr:
frame_dig -3                                                                                                                                                                                                                                                                     //    (2247)  contracts_unified/core/state_handler/local_handler.py      39      def get_position(account: AccountAddress, instrument_id: InstrumentId, *, output: UserInstrumentData) -> Expr:
frame_dig -2                                                                                                                                                                                                                                                                     //    (2249)
callsub getposition_3                                                                                                                                                                                                                                                            //    (2251)  contracts_unified/core/internal/move.py                    83      LocalStateHandler.get_position(account, instrument_id)
frame_bury 0                                                                                                                                                                                                                                                                     //    (2254)                                                                     data.set(cast(abi.ReturnedValue, LocalStateHandler.get_position(account, instrument_id)))
frame_dig 0                                                                                                                                                                                                                                                                      //    (2256)                                                             86      data.principal.use(lambda principal: new_principal.set(signed_add(amount.get(), principal.get())))
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (2258)
extract_uint64                                                                                                                                                                                                                                                                   //    (2260)
frame_bury 2                                                                                                                                                                                                                                                                     //    (2261)
frame_dig -1                                                                                                                                                                                                                                                                     //    (2263)                                                             87      amount.get()
frame_dig 2                                                                                                                                                                                                                                                                      //    (2265)                                                                     principal.get()
callsub signedadd_9                                                                                                                                                                                                                                                              //    (2267)                                                                     signed_add(amount.get(), principal.get())
frame_bury 1                                                                                                                                                                                                                                                                     //    (2270)                                                                     new_principal.set(signed_add(amount.get(), principal.get()))
frame_dig 0                                                                                                                                                                                                                                                                      //    (2272)                                                             91      data.cash.use(lambda cash: data.index.use(lambda index: data.set(cash, new_principal, index)))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2274)
extract_uint64                                                                                                                                                                                                                                                                   //    (2275)
frame_bury 3                                                                                                                                                                                                                                                                     //    (2276)
frame_dig 0                                                                                                                                                                                                                                                                      //    (2278)                                                             92      data.index.use(lambda index: data.set(cash, new_principal, index))
pushint 16 // 16                                                                                                                                                                                                                                                                 //    (2280)
extract_uint64                                                                                                                                                                                                                                                                   //    (2282)
frame_bury 4                                                                                                                                                                                                                                                                     //    (2283)
frame_dig 3                                                                                                                                                                                                                                                                      //    (2285)                                                             93      data.set(cash, new_principal, index)
itob                                                                                                                                                                                                                                                                             //    (2287)
frame_dig 1                                                                                                                                                                                                                                                                      //    (2288)
itob                                                                                                                                                                                                                                                                             //    (2290)
concat                                                                                                                                                                                                                                                                           //    (2291)
frame_dig 4                                                                                                                                                                                                                                                                      //    (2292)
itob                                                                                                                                                                                                                                                                             //    (2294)
concat                                                                                                                                                                                                                                                                           //    (2295)
frame_bury 0                                                                                                                                                                                                                                                                     //    (2296)
frame_dig -3                                                                                                                                                                                                                                                                     //    (2298)  contracts_unified/core/state_handler/local_handler.py      63      account.get()
frame_dig -2                                                                                                                                                                                                                                                                     //    (2300)                                                                     instrument_id.get()
pushint 24 // 24                                                                                                                                                                                                                                                                 //    (2302)                                                                     Int(LocalStateHandler.position_size)
*                                                                                                                                                                                                                                                                                //    (2304)                                                                     instrument_id.get() * Int(LocalStateHandler.position_size)
frame_dig 0                                                                                                                                                                                                                                                                      //    (2305)                                                                     data.encode()
box_replace                                                                                                                                                                                                                                                                      //    (2307)                                                                     App.box_replace(account.get(), instrument_id.get() * Int(LocalStateHandler.position_size), data.encode())
retsub                                                                                                                                                                                                                                                                           //    (2308)  contracts_unified/core/internal/move.py                    71      def signed_add_to_pool(account: AccountAddress, instrument_id: InstrumentId, amount: SignedAmount) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       158     def signed_account_move_baskets(source_account: AccountAddress, destination_account: AccountAddress, cash_basket: SignedInstrumentBasket, pool_basket: SignedInstrumentBasket, allow_negative_assets: abi.Bool, allow_negative_liabilities: abi.Bool) -> Expr:
// signed_account_move_baskets                                                                                                                                                                                                                                                   //
signedaccountmovebaskets_19:                                                                                                                                                                                                                                                     //
proto 6 0                                                                                                                                                                                                                                                                        //    (2309)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2312)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 2                                                                                                                                                                                                                                                                           //    (2313)  contracts_unified/core/internal/move.py                    158     def signed_account_move_baskets(source_account: AccountAddress, destination_account: AccountAddress, cash_basket: SignedInstrumentBasket, pool_basket: SignedInstrumentBasket, allow_negative_assets: abi.Bool, allow_negative_liabilities: abi.Bool) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (2315)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2316)
dupn 4                                                                                                                                                                                                                                                                           //    (2317)  contracts_unified/core/internal/move.py                    158     def signed_account_move_baskets(source_account: AccountAddress, destination_account: AccountAddress, cash_basket: SignedInstrumentBasket, pool_basket: SignedInstrumentBasket, allow_negative_assets: abi.Bool, allow_negative_liabilities: abi.Bool) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (2319)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2320)
dupn 3                                                                                                                                                                                                                                                                           //    (2321)  contracts_unified/core/internal/move.py                    158     def signed_account_move_baskets(source_account: AccountAddress, destination_account: AccountAddress, cash_basket: SignedInstrumentBasket, pool_basket: SignedInstrumentBasket, allow_negative_assets: abi.Bool, allow_negative_liabilities: abi.Bool) -> Expr:
frame_dig -4                                                                                                                                                                                                                                                                     //    (2323)                                                             173     cash_basket.length()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2325)
extract_uint16                                                                                                                                                                                                                                                                   //    (2326)
frame_bury 2                                                                                                                                                                                                                                                                     //    (2327)
frame_dig 2                                                                                                                                                                                                                                                                      //    (2329)
frame_bury 1                                                                                                                                                                                                                                                                     //    (2331)                                                                     length.set(cash_basket.length())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2333)                                                             174     Int(0)
frame_bury 0                                                                                                                                                                                                                                                                     //    (2334)                                                                     i.set(Int(0))
signedaccountmovebaskets_19_l1:                                                                                                                                                                                                                                                  //                                                                               For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig 0                                                                                                                                                                                                                                                                      //    (2336)                                                                     i.get()
frame_dig 1                                                                                                                                                                                                                                                                      //    (2338)                                                                     length.get()
<                                                                                                                                                                                                                                                                                //    (2340)                                                                     i.get() < length.get()
bnz signedaccountmovebaskets_19_l7                                                                                                                                                                                                                                               //    (2341)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig -3                                                                                                                                                                                                                                                                     //    (2344)                                                             185     pool_basket.length()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2346)
extract_uint16                                                                                                                                                                                                                                                                   //    (2347)
frame_bury 8                                                                                                                                                                                                                                                                     //    (2348)
frame_dig 8                                                                                                                                                                                                                                                                      //    (2350)
frame_bury 1                                                                                                                                                                                                                                                                     //    (2352)                                                                     length.set(pool_basket.length())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2354)                                                             186     Int(0)
frame_bury 0                                                                                                                                                                                                                                                                     //    (2355)                                                                     i.set(Int(0))
signedaccountmovebaskets_19_l3:                                                                                                                                                                                                                                                  //                                                                               For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig 0                                                                                                                                                                                                                                                                      //    (2357)                                                                     i.get()
frame_dig 1                                                                                                                                                                                                                                                                      //    (2359)                                                                     length.get()
<                                                                                                                                                                                                                                                                                //    (2361)                                                                     i.get() < length.get()
bz signedaccountmovebaskets_19_l10                                                                                                                                                                                                                                               //    (2362)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig -3                                                                                                                                                                                                                                                                     //    (2365)                                                             187     pool_basket[i.get()].use(lambda instrument_amount: instrument_amount.instrument.use(lambda instrument: instrument_amount.amount.use(lambda amount: cast(Expr, account_move_single_pool(source_account, destination_account, instrument, amount, allow_negative_liabilities)))))
pushint 9 // 9                                                                                                                                                                                                                                                                   //    (2367)
frame_dig 0                                                                                                                                                                                                                                                                      //    (2369)                                                                     i.get()
*                                                                                                                                                                                                                                                                                //    (2371)                                                                     pool_basket[i.get()].use(lambda instrument_amount: instrument_amount.instrument.use(lambda instrument: instrument_amount.amount.use(lambda amount: cast(Expr, account_move_single_pool(source_account, destination_account, instrument, amount, allow_negative_liabilities)))))
pushint 2 // 2                                                                                                                                                                                                                                                                   //    (2372)
+                                                                                                                                                                                                                                                                                //    (2374)
pushint 9 // 9                                                                                                                                                                                                                                                                   //    (2375)
extract3                                                                                                                                                                                                                                                                         //    (2377)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 9                                                                                                                                                                                                                                                                     //    (2378)  contracts_unified/core/internal/move.py                    187     pool_basket[i.get()].use(lambda instrument_amount: instrument_amount.instrument.use(lambda instrument: instrument_amount.amount.use(lambda amount: cast(Expr, account_move_single_pool(source_account, destination_account, instrument, amount, allow_negative_liabilities)))))
frame_dig 9                                                                                                                                                                                                                                                                      //    (2380)                                                             188     instrument_amount.instrument.use(lambda instrument: instrument_amount.amount.use(lambda amount: cast(Expr, account_move_single_pool(source_account, destination_account, instrument, amount, allow_negative_liabilities))))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2382)
getbyte                                                                                                                                                                                                                                                                          //    (2383)
frame_bury 11                                                                                                                                                                                                                                                                    //    (2384)
frame_dig 9                                                                                                                                                                                                                                                                      //    (2386)                                                             189     instrument_amount.amount.use(lambda amount: cast(Expr, account_move_single_pool(source_account, destination_account, instrument, amount, allow_negative_liabilities)))
intc_1 // 1                                                                                                                                                                                                                                                                      //    (2388)
extract_uint64                                                                                                                                                                                                                                                                   //    (2389)
frame_bury 12                                                                                                                                                                                                                                                                    //    (2390)
frame_dig -1                                                                                                                                                                                                                                                                     //    (2392)                                                             145     allow_negative.get()
!                                                                                                                                                                                                                                                                                //    (2394)                                                                     Not(allow_negative.get())
frame_dig 12                                                                                                                                                                                                                                                                     //    (2395)                                                                     amount.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (2397)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (2398)                                                                     value & Int(9223372036854775808)
&&                                                                                                                                                                                                                                                                               //    (2399)  contracts_unified/core/internal/move.py                    145     And(Not(allow_negative.get()), signed_ltz(amount.get()))
bnz signedaccountmovebaskets_19_l6                                                                                                                                                                                                                                               //    (2400)                                                                     If(And(Not(allow_negative.get()), signed_ltz(amount.get())), Reject())
frame_dig 12                                                                                                                                                                                                                                                                     //    (2403)                                                             148     amount.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (2405)                                                                     signed_neg(amount.get())
frame_bury 13                                                                                                                                                                                                                                                                    //    (2408)                                                                     inv_amount.set(signed_neg(amount.get()))
frame_dig -6                                                                                                                                                                                                                                                                     //    (2410)                                                             71      def signed_add_to_pool(account: AccountAddress, instrument_id: InstrumentId, amount: SignedAmount) -> Expr:
frame_dig 11                                                                                                                                                                                                                                                                     //    (2412)
frame_dig 13                                                                                                                                                                                                                                                                     //    (2414)
callsub signedaddtopool_18                                                                                                                                                                                                                                                       //    (2416)                                                             151     signed_add_to_pool(source_account, instrument_id, inv_amount)
frame_dig -5                                                                                                                                                                                                                                                                     //    (2419)                                                             71      def signed_add_to_pool(account: AccountAddress, instrument_id: InstrumentId, amount: SignedAmount) -> Expr:
frame_dig 11                                                                                                                                                                                                                                                                     //    (2421)
frame_dig 12                                                                                                                                                                                                                                                                     //    (2423)
callsub signedaddtopool_18                                                                                                                                                                                                                                                       //    (2425)                                                             154     signed_add_to_pool(destination_account, instrument_id, amount)
frame_dig 0                                                                                                                                                                                                                                                                      //    (2428)                                                             186     i.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (2430)                                                                     Int(1)
+                                                                                                                                                                                                                                                                                //    (2431)                                                                     i.get() + Int(1)
frame_bury 0                                                                                                                                                                                                                                                                     //    (2432)                                                                     i.set(i.get() + Int(1))
b signedaccountmovebaskets_19_l3                                                                                                                                                                                                                                                 //    (2434)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
signedaccountmovebaskets_19_l6:                                                                                                                                                                                                                                                  //                                                                       145     If(And(Not(allow_negative.get()), signed_ltz(amount.get())), Reject())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2437)                                                                     Reject()
return                                                                                                                                                                                                                                                                           //    (2438)
signedaccountmovebaskets_19_l7:                                                                                                                                                                                                                                                  //                                                                       118     If(And(Not(allow_negative.get()), signed_ltz(amount.get())), Reject())
frame_dig -4                                                                                                                                                                                                                                                                     //    (2439)                                                             175     cash_basket[i.get()].use(lambda instrument_amount: instrument_amount.instrument.use(lambda instrument: instrument_amount.amount.use(lambda amount: cast(Expr, account_move_single_cash(source_account, destination_account, instrument, amount, allow_negative_assets)))))
pushint 9 // 9                                                                                                                                                                                                                                                                   //    (2441)
frame_dig 0                                                                                                                                                                                                                                                                      //    (2443)                                                                     i.get()
*                                                                                                                                                                                                                                                                                //    (2445)                                                                     cash_basket[i.get()].use(lambda instrument_amount: instrument_amount.instrument.use(lambda instrument: instrument_amount.amount.use(lambda amount: cast(Expr, account_move_single_cash(source_account, destination_account, instrument, amount, allow_negative_assets)))))
pushint 2 // 2                                                                                                                                                                                                                                                                   //    (2446)
+                                                                                                                                                                                                                                                                                //    (2448)
pushint 9 // 9                                                                                                                                                                                                                                                                   //    (2449)
extract3                                                                                                                                                                                                                                                                         //    (2451)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 3                                                                                                                                                                                                                                                                     //    (2452)  contracts_unified/core/internal/move.py                    175     cash_basket[i.get()].use(lambda instrument_amount: instrument_amount.instrument.use(lambda instrument: instrument_amount.amount.use(lambda amount: cast(Expr, account_move_single_cash(source_account, destination_account, instrument, amount, allow_negative_assets)))))
frame_dig 3                                                                                                                                                                                                                                                                      //    (2454)                                                             176     instrument_amount.instrument.use(lambda instrument: instrument_amount.amount.use(lambda amount: cast(Expr, account_move_single_cash(source_account, destination_account, instrument, amount, allow_negative_assets))))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2456)
getbyte                                                                                                                                                                                                                                                                          //    (2457)
frame_bury 5                                                                                                                                                                                                                                                                     //    (2458)
frame_dig 3                                                                                                                                                                                                                                                                      //    (2460)                                                             177     instrument_amount.amount.use(lambda amount: cast(Expr, account_move_single_cash(source_account, destination_account, instrument, amount, allow_negative_assets)))
intc_1 // 1                                                                                                                                                                                                                                                                      //    (2462)
extract_uint64                                                                                                                                                                                                                                                                   //    (2463)
frame_bury 6                                                                                                                                                                                                                                                                     //    (2464)
frame_dig -2                                                                                                                                                                                                                                                                     //    (2466)                                                             118     allow_negative.get()
!                                                                                                                                                                                                                                                                                //    (2468)                                                                     Not(allow_negative.get())
frame_dig 6                                                                                                                                                                                                                                                                      //    (2469)                                                                     amount.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (2471)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (2472)                                                                     value & Int(9223372036854775808)
&&                                                                                                                                                                                                                                                                               //    (2473)  contracts_unified/core/internal/move.py                    118     And(Not(allow_negative.get()), signed_ltz(amount.get()))
bnz signedaccountmovebaskets_19_l9                                                                                                                                                                                                                                               //    (2474)                                                                     If(And(Not(allow_negative.get()), signed_ltz(amount.get())), Reject())
frame_dig 6                                                                                                                                                                                                                                                                      //    (2477)                                                             121     amount.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (2479)                                                                     signed_neg(amount.get())
frame_bury 7                                                                                                                                                                                                                                                                     //    (2482)                                                                     inv_amount.set(signed_neg(amount.get()))
frame_dig -6                                                                                                                                                                                                                                                                     //    (2484)                                                             34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig 5                                                                                                                                                                                                                                                                      //    (2486)
frame_dig 7                                                                                                                                                                                                                                                                      //    (2488)
callsub signedaddtocash_17                                                                                                                                                                                                                                                       //    (2490)                                                             124     signed_add_to_cash(source_account, instrument_id, inv_amount)
frame_dig -5                                                                                                                                                                                                                                                                     //    (2493)                                                             34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig 5                                                                                                                                                                                                                                                                      //    (2495)
frame_dig 6                                                                                                                                                                                                                                                                      //    (2497)
callsub signedaddtocash_17                                                                                                                                                                                                                                                       //    (2499)                                                             127     signed_add_to_cash(destination_account, instrument_id, amount)
frame_dig 0                                                                                                                                                                                                                                                                      //    (2502)                                                             174     i.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (2504)                                                                     Int(1)
+                                                                                                                                                                                                                                                                                //    (2505)                                                                     i.get() + Int(1)
frame_bury 0                                                                                                                                                                                                                                                                     //    (2506)                                                                     i.set(i.get() + Int(1))
b signedaccountmovebaskets_19_l1                                                                                                                                                                                                                                                 //    (2508)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
signedaccountmovebaskets_19_l9:                                                                                                                                                                                                                                                  //                                                                       118     If(And(Not(allow_negative.get()), signed_ltz(amount.get())), Reject())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2511)                                                                     Reject()
return                                                                                                                                                                                                                                                                           //    (2512)
signedaccountmovebaskets_19_l10:                                                                                                                                                                                                                                                 //                                                                       186     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
retsub                                                                                                                                                                                                                                                                           //    (2513)                                                             158     def signed_account_move_baskets(source_account: AccountAddress, destination_account: AccountAddress, cash_basket: SignedInstrumentBasket, pool_basket: SignedInstrumentBasket, allow_negative_assets: abi.Bool, allow_negative_liabilities: abi.Bool) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       198     def collect_fees(instrument_id: InstrumentId, amount: Amount) -> Expr:
// collect_fees                                                                                                                                                                                                                                                                  //
collectfees_20:                                                                                                                                                                                                                                                                  //
proto 2 0                                                                                                                                                                                                                                                                        //    (2514)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (2517)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
bytec 5 // "f"                                                                                                                                                                                                                                                                   //    (2518)  contracts_unified/core/state_handler/global_handler.py     38      Bytes('f')
app_global_get                                                                                                                                                                                                                                                                   //    (2520)                                                             152     App.globalGet(KEY_FEE_TARGET)
frame_bury 0                                                                                                                                                                                                                                                                     //    (2521)  contracts_unified/core/internal/move.py                    207     fee_target_account.set(GlobalStateHandler.get_fee_target())
frame_dig 0                                                                                                                                                                                                                                                                      //    (2523)
len                                                                                                                                                                                                                                                                              //    (2525)
pushint 32 // 32                                                                                                                                                                                                                                                                 //    (2526)
==                                                                                                                                                                                                                                                                               //    (2528)
assert                                                                                                                                                                                                                                                                           //    (2529)
frame_dig 0                                                                                                                                                                                                                                                                      //    (2530)                                                             34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig -2                                                                                                                                                                                                                                                                     //    (2532)
frame_dig -1                                                                                                                                                                                                                                                                     //    (2534)
callsub signedaddtocash_17                                                                                                                                                                                                                                                       //    (2536)                                                             208     signed_add_to_cash(fee_target_account, instrument_id, amount)
retsub                                                                                                                                                                                                                                                                           //    (2539)                                                             198     def collect_fees(instrument_id: InstrumentId, amount: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/internal/validate_sender.py         11      def sender_is_sig_validator() -> Expr:
// sender_is_sig_validator                                                                                                                                                                                                                                                       //
senderissigvalidator_21:                                                                                                                                                                                                                                                         //
proto 0 0                                                                                                                                                                                                                                                                        //    (2540)
bytec 6 // "s"                                                                                                                                                                                                                                                                   //    (2543)  contracts_unified/core/state_handler/global_handler.py     34      Bytes('s')
app_global_get                                                                                                                                                                                                                                                                   //    (2545)                                                             116     App.globalGet(KEY_SIGNATURE_VALIDATOR)
txn Sender                                                                                                                                                                                                                                                                       //    (2546)  contracts_unified/core/internal/validate_sender.py         14      Txn.sender()
==                                                                                                                                                                                                                                                                               //    (2548)                                                                     GlobalStateHandler.get_signature_validator() == Txn.sender()
assert                                                                                                                                                                                                                                                                           //    (2549)                                                                     Assert(GlobalStateHandler.get_signature_validator() == Txn.sender())
retsub                                                                                                                                                                                                                                                                           //    (2550)                                                             11      def sender_is_sig_validator() -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/bare_calls/update.py                        def update() -> Expr:
// update                                                                                                                                                                                                                                                                        //
update_22:                                                                                                                                                                                                                                                                       //
proto 0 0                                                                                                                                                                                                                                                                        //    (2551)
global CreatorAddress                                                                                                                                                                                                                                                            //    (2554)  contracts_unified/core/internal/validate_sender.py         19      Global.creator_address()
txn Sender                                                                                                                                                                                                                                                                       //    (2556)                                                                     Txn.sender()
==                                                                                                                                                                                                                                                                               //    (2558)                                                                     Global.creator_address() == Txn.sender()
assert                                                                                                                                                                                                                                                                           //    (2559)                                                                     Assert(Global.creator_address() == Txn.sender())
retsub                                                                                                                                                                                                                                                                           //    (2560)  contracts_unified/core/bare_calls/update.py                11      def update() -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       17      def delete() -> Expr:
// delete                                                                                                                                                                                                                                                                        //
delete_23:                                                                                                                                                                                                                                                                       //
proto 0 0                                                                                                                                                                                                                                                                        //    (2561)
global CreatorAddress                                                                                                                                                                                                                                                            //    (2564)  contracts_unified/core/internal/validate_sender.py         19      Global.creator_address()
txn Sender                                                                                                                                                                                                                                                                       //    (2566)                                                                     Txn.sender()
==                                                                                                                                                                                                                                                                               //    (2568)                                                                     Global.creator_address() == Txn.sender()
assert                                                                                                                                                                                                                                                                           //    (2569)                                                                     Assert(Global.creator_address() == Txn.sender())
retsub                                                                                                                                                                                                                                                                           //    (2570)  contracts_unified/core/bare_calls/update.py                17      def delete() -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/internal/liquidation_calculator.py  50      def calculate_basket_value(cash_basket: SignedInstrumentBasket, add_negatives: abi.Bool, factor: Ratio, use_bonus: abi.Bool, invert_bonus_or_use_margin: abi.Bool, use_opt_utilization: abi.Bool, *, output: Price) -> Expr:
// calculate_basket_value                                                                                                                                                                                                                                                        //
calculatebasketvalue_24:                                                                                                                                                                                                                                                         //
proto 6 1                                                                                                                                                                                                                                                                        //    (2571)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2574)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 2                                                                                                                                                                                                                                                                           //    (2575)  contracts_unified/core/internal/liquidation_calculator.py  50      def calculate_basket_value(cash_basket: SignedInstrumentBasket, add_negatives: abi.Bool, factor: Ratio, use_bonus: abi.Bool, invert_bonus_or_use_margin: abi.Bool, use_opt_utilization: abi.Bool, *, output: Price) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (2577)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2578)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (2579)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2580)
dupn 9                                                                                                                                                                                                                                                                           //    (2581)  contracts_unified/core/internal/liquidation_calculator.py  50      def calculate_basket_value(cash_basket: SignedInstrumentBasket, add_negatives: abi.Bool, factor: Ratio, use_bonus: abi.Bool, invert_bonus_or_use_margin: abi.Bool, use_opt_utilization: abi.Bool, *, output: Price) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2583)                                                             76      Int(0)
frame_bury 0                                                                                                                                                                                                                                                                     //    (2584)                                                                     output.set(Int(0))
frame_dig -6                                                                                                                                                                                                                                                                     //    (2586)                                                             79      cash_basket.length()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2588)
extract_uint16                                                                                                                                                                                                                                                                   //    (2589)
frame_bury 9                                                                                                                                                                                                                                                                     //    (2590)
frame_dig 9                                                                                                                                                                                                                                                                      //    (2592)
frame_bury 1                                                                                                                                                                                                                                                                     //    (2594)                                                                     length.set(cash_basket.length())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2596)                                                             80      Int(0)
frame_bury 2                                                                                                                                                                                                                                                                     //    (2597)                                                                     i.set(Int(0))
frame_dig 2                                                                                                                                                                                                                                                                      //    (2599)
intc 5 // 256                                                                                                                                                                                                                                                                    //    (2601)
<                                                                                                                                                                                                                                                                                //    (2603)
assert                                                                                                                                                                                                                                                                           //    (2604)
calculatebasketvalue_24_l1:                                                                                                                                                                                                                                                      //                                                                               For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig 2                                                                                                                                                                                                                                                                      //    (2605)                                                                     i.get()
frame_dig 1                                                                                                                                                                                                                                                                      //    (2607)                                                                     length.get()
<                                                                                                                                                                                                                                                                                //    (2609)                                                                     i.get() < length.get()
bz calculatebasketvalue_24_l16                                                                                                                                                                                                                                                   //    (2610)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig -6                                                                                                                                                                                                                                                                     //    (2613)                                                             81      instrument_amount.set(cash_basket[i.get()])
pushint 9 // 9                                                                                                                                                                                                                                                                   //    (2615)
frame_dig 2                                                                                                                                                                                                                                                                      //    (2617)                                                                     i.get()
*                                                                                                                                                                                                                                                                                //    (2619)                                                                     instrument_amount.set(cash_basket[i.get()])
pushint 2 // 2                                                                                                                                                                                                                                                                   //    (2620)
+                                                                                                                                                                                                                                                                                //    (2622)
pushint 9 // 9                                                                                                                                                                                                                                                                   //    (2623)
extract3                                                                                                                                                                                                                                                                         //    (2625)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 3                                                                                                                                                                                                                                                                     //    (2626)  contracts_unified/core/internal/liquidation_calculator.py  81      instrument_amount.set(cash_basket[i.get()])
frame_dig 3                                                                                                                                                                                                                                                                      //    (2628)                                                             82      instrument_amount.instrument.use(lambda instrument: instrument_amount.amount.use(lambda amount: Seq(If((signed_ltz(amount.get()) != Int(0)) == add_negatives.get()).Then(price.set(cast(abi.ReturnedValue, get_normalized_price(instrument))), instrument_data.set(cast(abi.ReturnedValue, GlobalStateHandler.get_instrument(instrument))), If(use_bonus.get()).Then(margin_or_haircut.set(instrument_data.maintenance_haircut), bonus.set(Int(RATIO_ONE) + WideRatio([factor.get(), margin_or_haircut.get()], [Int(RATIO_ONE)])), output.set(output.get() + If(invert_bonus_or_use_margin.get()).Then(WideRatio([signed_abs(amount.get()), price.get(), Int(RATIO_ONE)], [bonus.get(), Int(PRICECASTER_RESCALE_FACTOR)])).Else(WideRatio([signed_abs(amount.get()), price.get(), bonus.get()], [Int(RATIO_ONE * PRICECASTER_RESCALE_FACTOR)])))).Else(If(invert_bonus_or_use_margin.get()).Then(instrument_data.initial_margin.use(lambda margin: margin_or_haircut.set(Int(RATIO_ONE) + margin.get()))).Else(instrument_data.initial_haircut.use(lambda haircut: margin_or_haircut.set(Int(RATIO_ONE) - haircut.get()))), If(use_opt_utilization.get()).Then(instrument_data.optimal_utilization.use(lambda opt_util: optimal_utilization.set(Int(RATIO_ONE) - opt_util.get()))).Else(optimal_utilization.set(Int(RATIO_ONE))), output.set(output.get() + WideRatio([signed_abs(amount.get()), price.get(), margin_or_haircut.get(), optimal_utilization.get()], [Int(RATIO_ONE * RATIO_ONE * PRICECASTER_RESCALE_FACTOR)])))))))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2630)
getbyte                                                                                                                                                                                                                                                                          //    (2631)
frame_bury 11                                                                                                                                                                                                                                                                    //    (2632)
frame_dig 3                                                                                                                                                                                                                                                                      //    (2634)                                                             83      instrument_amount.amount.use(lambda amount: Seq(If((signed_ltz(amount.get()) != Int(0)) == add_negatives.get()).Then(price.set(cast(abi.ReturnedValue, get_normalized_price(instrument))), instrument_data.set(cast(abi.ReturnedValue, GlobalStateHandler.get_instrument(instrument))), If(use_bonus.get()).Then(margin_or_haircut.set(instrument_data.maintenance_haircut), bonus.set(Int(RATIO_ONE) + WideRatio([factor.get(), margin_or_haircut.get()], [Int(RATIO_ONE)])), output.set(output.get() + If(invert_bonus_or_use_margin.get()).Then(WideRatio([signed_abs(amount.get()), price.get(), Int(RATIO_ONE)], [bonus.get(), Int(PRICECASTER_RESCALE_FACTOR)])).Else(WideRatio([signed_abs(amount.get()), price.get(), bonus.get()], [Int(RATIO_ONE * PRICECASTER_RESCALE_FACTOR)])))).Else(If(invert_bonus_or_use_margin.get()).Then(instrument_data.initial_margin.use(lambda margin: margin_or_haircut.set(Int(RATIO_ONE) + margin.get()))).Else(instrument_data.initial_haircut.use(lambda haircut: margin_or_haircut.set(Int(RATIO_ONE) - haircut.get()))), If(use_opt_utilization.get()).Then(instrument_data.optimal_utilization.use(lambda opt_util: optimal_utilization.set(Int(RATIO_ONE) - opt_util.get()))).Else(optimal_utilization.set(Int(RATIO_ONE))), output.set(output.get() + WideRatio([signed_abs(amount.get()), price.get(), margin_or_haircut.get(), optimal_utilization.get()], [Int(RATIO_ONE * RATIO_ONE * PRICECASTER_RESCALE_FACTOR)]))))))
intc_1 // 1                                                                                                                                                                                                                                                                      //    (2636)
extract_uint64                                                                                                                                                                                                                                                                   //    (2637)
frame_bury 12                                                                                                                                                                                                                                                                    //    (2638)
frame_dig 12                                                                                                                                                                                                                                                                     //    (2640)                                                             87      amount.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (2642)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (2643)                                                                     value & Int(9223372036854775808)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2644)  contracts_unified/core/internal/liquidation_calculator.py  87      Int(0)
!=                                                                                                                                                                                                                                                                               //    (2645)                                                                     signed_ltz(amount.get()) != Int(0)
frame_dig -5                                                                                                                                                                                                                                                                     //    (2646)                                                                     add_negatives.get()
==                                                                                                                                                                                                                                                                               //    (2648)                                                                     (signed_ltz(amount.get()) != Int(0)) == add_negatives.get()
bnz calculatebasketvalue_24_l4                                                                                                                                                                                                                                                   //    (2649)                                                                     If((signed_ltz(amount.get()) != Int(0)) == add_negatives.get())
calculatebasketvalue_24_l3:                                                                                                                                                                                                                                                      //                                                                       80      For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig 2                                                                                                                                                                                                                                                                      //    (2652)                                                                     i.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (2654)                                                                     Int(1)
+                                                                                                                                                                                                                                                                                //    (2655)                                                                     i.get() + Int(1)
frame_bury 2                                                                                                                                                                                                                                                                     //    (2656)                                                                     i.set(i.get() + Int(1))
frame_dig 2                                                                                                                                                                                                                                                                      //    (2658)
intc 5 // 256                                                                                                                                                                                                                                                                    //    (2660)
<                                                                                                                                                                                                                                                                                //    (2662)
assert                                                                                                                                                                                                                                                                           //    (2663)
b calculatebasketvalue_24_l1                                                                                                                                                                                                                                                     //    (2664)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
calculatebasketvalue_24_l4:                                                                                                                                                                                                                                                      //                                                                       95      If(use_bonus.get())
frame_dig 11                                                                                                                                                                                                                                                                     //    (2667)  contracts_unified/library/pricecaster.py                   47      def get_normalized_price(instrument_id: InstrumentId, *, output: abi.Uint64) -> Expr:
callsub getnormalizedprice_15                                                                                                                                                                                                                                                    //    (2669)  contracts_unified/core/internal/liquidation_calculator.py  90      get_normalized_price(instrument)
frame_bury 4                                                                                                                                                                                                                                                                     //    (2672)                                                                     price.set(cast(abi.ReturnedValue, get_normalized_price(instrument)))
frame_dig 11                                                                                                                                                                                                                                                                     //    (2674)  contracts_unified/core/state_handler/global_handler.py     202     def get_instrument(instrument_id: InstrumentId, *, output: InstrumentListElement) -> Expr:
callsub getinstrument_2                                                                                                                                                                                                                                                          //    (2676)  contracts_unified/core/internal/liquidation_calculator.py  93      GlobalStateHandler.get_instrument(instrument)
frame_bury 5                                                                                                                                                                                                                                                                     //    (2679)                                                                     instrument_data.set(cast(abi.ReturnedValue, GlobalStateHandler.get_instrument(instrument)))
frame_dig -3                                                                                                                                                                                                                                                                     //    (2681)                                                             95      use_bonus.get()
bnz calculatebasketvalue_24_l12                                                                                                                                                                                                                                                  //    (2683)                                                                     If(use_bonus.get())
frame_dig -2                                                                                                                                                                                                                                                                     //    (2686)                                                             120     invert_bonus_or_use_margin.get()
bnz calculatebasketvalue_24_l11                                                                                                                                                                                                                                                  //    (2688)                                                                     If(invert_bonus_or_use_margin.get())
frame_dig 5                                                                                                                                                                                                                                                                      //    (2691)                                                             127     instrument_data.initial_haircut.use(lambda haircut: margin_or_haircut.set(Int(RATIO_ONE) - haircut.get()))
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (2693)
extract_uint16                                                                                                                                                                                                                                                                   //    (2695)
frame_bury 14                                                                                                                                                                                                                                                                    //    (2696)
intc 4 // 1000                                                                                                                                                                                                                                                                   //    (2698)                                                             128     Int(RATIO_ONE)
frame_dig 14                                                                                                                                                                                                                                                                     //    (2700)                                                                     haircut.get()
-                                                                                                                                                                                                                                                                                //    (2702)                                                                     Int(RATIO_ONE) - haircut.get()
frame_bury 6                                                                                                                                                                                                                                                                     //    (2703)                                                                     margin_or_haircut.set(Int(RATIO_ONE) - haircut.get())
frame_dig 6                                                                                                                                                                                                                                                                      //    (2705)
intc 6 // 65536                                                                                                                                                                                                                                                                  //    (2707)
<                                                                                                                                                                                                                                                                                //    (2709)
assert                                                                                                                                                                                                                                                                           //    (2710)
calculatebasketvalue_24_l7:                                                                                                                                                                                                                                                      //                                                                       133     If(use_opt_utilization.get())
frame_dig -1                                                                                                                                                                                                                                                                     //    (2711)                                                                     use_opt_utilization.get()
bnz calculatebasketvalue_24_l10                                                                                                                                                                                                                                                  //    (2713)                                                                     If(use_opt_utilization.get())
intc 4 // 1000                                                                                                                                                                                                                                                                   //    (2716)                                                             140     Int(RATIO_ONE)
frame_bury 7                                                                                                                                                                                                                                                                     //    (2718)                                                                     optimal_utilization.set(Int(RATIO_ONE))
frame_dig 7                                                                                                                                                                                                                                                                      //    (2720)
intc 6 // 65536                                                                                                                                                                                                                                                                  //    (2722)
<                                                                                                                                                                                                                                                                                //    (2724)
assert                                                                                                                                                                                                                                                                           //    (2725)
calculatebasketvalue_24_l9:                                                                                                                                                                                                                                                      //                                                                       95      If(use_bonus.get())
frame_dig 0                                                                                                                                                                                                                                                                      //    (2726)                                                             146     output.get()
frame_dig 12                                                                                                                                                                                                                                                                     //    (2728)                                                             147     amount.get()
callsub signedabs_8                                                                                                                                                                                                                                                              //    (2730)                                                                     signed_abs(amount.get())
frame_dig 4                                                                                                                                                                                                                                                                      //    (2733)                                                                     price.get()
mulw                                                                                                                                                                                                                                                                             //    (2735)                                                                     WideRatio([signed_abs(amount.get()), price.get(), margin_or_haircut.get(), optimal_utilization.get()], [Int(RATIO_ONE * RATIO_ONE * PRICECASTER_RESCALE_FACTOR)])
frame_dig 6                                                                                                                                                                                                                                                                      //    (2736)                                                                     margin_or_haircut.get()
uncover 2                                                                                                                                                                                                                                                                        //    (2738)                                                                     WideRatio([signed_abs(amount.get()), price.get(), margin_or_haircut.get(), optimal_utilization.get()], [Int(RATIO_ONE * RATIO_ONE * PRICECASTER_RESCALE_FACTOR)])
dig 1                                                                                                                                                                                                                                                                            //    (2740)
*                                                                                                                                                                                                                                                                                //    (2742)
cover 2                                                                                                                                                                                                                                                                          //    (2743)
mulw                                                                                                                                                                                                                                                                             //    (2745)
cover 2                                                                                                                                                                                                                                                                          //    (2746)
+                                                                                                                                                                                                                                                                                //    (2748)
swap                                                                                                                                                                                                                                                                             //    (2749)
frame_dig 7                                                                                                                                                                                                                                                                      //    (2750)                                                                     optimal_utilization.get()
uncover 2                                                                                                                                                                                                                                                                        //    (2752)                                                                     WideRatio([signed_abs(amount.get()), price.get(), margin_or_haircut.get(), optimal_utilization.get()], [Int(RATIO_ONE * RATIO_ONE * PRICECASTER_RESCALE_FACTOR)])
dig 1                                                                                                                                                                                                                                                                            //    (2754)
*                                                                                                                                                                                                                                                                                //    (2756)
cover 2                                                                                                                                                                                                                                                                          //    (2757)
mulw                                                                                                                                                                                                                                                                             //    (2759)
cover 2                                                                                                                                                                                                                                                                          //    (2760)
+                                                                                                                                                                                                                                                                                //    (2762)
swap                                                                                                                                                                                                                                                                             //    (2763)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2764)
intc 8 // 1000000000000000                                                                                                                                                                                                                                                       //    (2765)                                                                     Int(RATIO_ONE * RATIO_ONE * PRICECASTER_RESCALE_FACTOR)
divmodw                                                                                                                                                                                                                                                                          //    (2767)                                                                     WideRatio([signed_abs(amount.get()), price.get(), margin_or_haircut.get(), optimal_utilization.get()], [Int(RATIO_ONE * RATIO_ONE * PRICECASTER_RESCALE_FACTOR)])
pop                                                                                                                                                                                                                                                                              //    (2768)
pop                                                                                                                                                                                                                                                                              //    (2769)
swap                                                                                                                                                                                                                                                                             //    (2770)
!                                                                                                                                                                                                                                                                                //    (2771)
assert                                                                                                                                                                                                                                                                           //    (2772)
+                                                                                                                                                                                                                                                                                //    (2773)                                                             146     output.get() + WideRatio([signed_abs(amount.get()), price.get(), margin_or_haircut.get(), optimal_utilization.get()], [Int(RATIO_ONE * RATIO_ONE * PRICECASTER_RESCALE_FACTOR)])
frame_bury 0                                                                                                                                                                                                                                                                     //    (2774)                                                             145     output.set(output.get() + WideRatio([signed_abs(amount.get()), price.get(), margin_or_haircut.get(), optimal_utilization.get()], [Int(RATIO_ONE * RATIO_ONE * PRICECASTER_RESCALE_FACTOR)]))
b calculatebasketvalue_24_l3                                                                                                                                                                                                                                                     //    (2776)                                                             95      If(use_bonus.get())
calculatebasketvalue_24_l10:                                                                                                                                                                                                                                                     //                                                                       133     If(use_opt_utilization.get())
frame_dig 5                                                                                                                                                                                                                                                                      //    (2779)                                                             135     instrument_data.optimal_utilization.use(lambda opt_util: optimal_utilization.set(Int(RATIO_ONE) - opt_util.get()))
pushint 36 // 36                                                                                                                                                                                                                                                                 //    (2781)
extract_uint16                                                                                                                                                                                                                                                                   //    (2783)
frame_bury 15                                                                                                                                                                                                                                                                    //    (2784)
intc 4 // 1000                                                                                                                                                                                                                                                                   //    (2786)                                                             136     Int(RATIO_ONE)
frame_dig 15                                                                                                                                                                                                                                                                     //    (2788)                                                                     opt_util.get()
-                                                                                                                                                                                                                                                                                //    (2790)                                                                     Int(RATIO_ONE) - opt_util.get()
frame_bury 7                                                                                                                                                                                                                                                                     //    (2791)                                                                     optimal_utilization.set(Int(RATIO_ONE) - opt_util.get())
frame_dig 7                                                                                                                                                                                                                                                                      //    (2793)
intc 6 // 65536                                                                                                                                                                                                                                                                  //    (2795)
<                                                                                                                                                                                                                                                                                //    (2797)
assert                                                                                                                                                                                                                                                                           //    (2798)
b calculatebasketvalue_24_l9                                                                                                                                                                                                                                                     //    (2799)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
calculatebasketvalue_24_l11:                                                                                                                                                                                                                                                     //            contracts_unified/core/internal/liquidation_calculator.py  120     If(invert_bonus_or_use_margin.get())
frame_dig 5                                                                                                                                                                                                                                                                      //    (2802)                                                             122     instrument_data.initial_margin.use(lambda margin: margin_or_haircut.set(Int(RATIO_ONE) + margin.get()))
pushint 10 // 10                                                                                                                                                                                                                                                                 //    (2804)
extract_uint16                                                                                                                                                                                                                                                                   //    (2806)
frame_bury 13                                                                                                                                                                                                                                                                    //    (2807)
intc 4 // 1000                                                                                                                                                                                                                                                                   //    (2809)                                                             123     Int(RATIO_ONE)
frame_dig 13                                                                                                                                                                                                                                                                     //    (2811)                                                                     margin.get()
+                                                                                                                                                                                                                                                                                //    (2813)                                                                     Int(RATIO_ONE) + margin.get()
frame_bury 6                                                                                                                                                                                                                                                                     //    (2814)                                                                     margin_or_haircut.set(Int(RATIO_ONE) + margin.get())
frame_dig 6                                                                                                                                                                                                                                                                      //    (2816)
intc 6 // 65536                                                                                                                                                                                                                                                                  //    (2818)
<                                                                                                                                                                                                                                                                                //    (2820)
assert                                                                                                                                                                                                                                                                           //    (2821)
b calculatebasketvalue_24_l7                                                                                                                                                                                                                                                     //    (2822)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
calculatebasketvalue_24_l12:                                                                                                                                                                                                                                                     //            contracts_unified/core/internal/liquidation_calculator.py  107     If(invert_bonus_or_use_margin.get())
frame_dig 5                                                                                                                                                                                                                                                                      //    (2825)                                                             98      margin_or_haircut.set(instrument_data.maintenance_haircut)
pushint 12 // 12                                                                                                                                                                                                                                                                 //    (2827)
extract_uint16                                                                                                                                                                                                                                                                   //    (2829)
frame_bury 6                                                                                                                                                                                                                                                                     //    (2830)
intc 4 // 1000                                                                                                                                                                                                                                                                   //    (2832)                                                             102     Int(RATIO_ONE)
frame_dig -4                                                                                                                                                                                                                                                                     //    (2834)                                                                     factor.get()
frame_dig 6                                                                                                                                                                                                                                                                      //    (2836)                                                                     margin_or_haircut.get()
mulw                                                                                                                                                                                                                                                                             //    (2838)                                                                     WideRatio([factor.get(), margin_or_haircut.get()], [Int(RATIO_ONE)])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2839)
intc 4 // 1000                                                                                                                                                                                                                                                                   //    (2840)                                                                     Int(RATIO_ONE)
divmodw                                                                                                                                                                                                                                                                          //    (2842)                                                                     WideRatio([factor.get(), margin_or_haircut.get()], [Int(RATIO_ONE)])
pop                                                                                                                                                                                                                                                                              //    (2843)
pop                                                                                                                                                                                                                                                                              //    (2844)
swap                                                                                                                                                                                                                                                                             //    (2845)
!                                                                                                                                                                                                                                                                                //    (2846)
assert                                                                                                                                                                                                                                                                           //    (2847)
+                                                                                                                                                                                                                                                                                //    (2848)                                                                     Int(RATIO_ONE) + WideRatio([factor.get(), margin_or_haircut.get()], [Int(RATIO_ONE)])
frame_bury 8                                                                                                                                                                                                                                                                     //    (2849)                                                                     bonus.set(Int(RATIO_ONE) + WideRatio([factor.get(), margin_or_haircut.get()], [Int(RATIO_ONE)]))
frame_dig 0                                                                                                                                                                                                                                                                      //    (2851)                                                             106     output.get()
frame_dig -2                                                                                                                                                                                                                                                                     //    (2853)                                                             107     invert_bonus_or_use_margin.get()
bnz calculatebasketvalue_24_l15                                                                                                                                                                                                                                                  //    (2855)                                                                     If(invert_bonus_or_use_margin.get())
frame_dig 12                                                                                                                                                                                                                                                                     //    (2858)                                                             114     amount.get()
callsub signedabs_8                                                                                                                                                                                                                                                              //    (2860)                                                                     signed_abs(amount.get())
frame_dig 4                                                                                                                                                                                                                                                                      //    (2863)                                                                     price.get()
mulw                                                                                                                                                                                                                                                                             //    (2865)                                                                     WideRatio([signed_abs(amount.get()), price.get(), bonus.get()], [Int(RATIO_ONE * PRICECASTER_RESCALE_FACTOR)])
frame_dig 8                                                                                                                                                                                                                                                                      //    (2866)                                                                     bonus.get()
uncover 2                                                                                                                                                                                                                                                                        //    (2868)                                                                     WideRatio([signed_abs(amount.get()), price.get(), bonus.get()], [Int(RATIO_ONE * PRICECASTER_RESCALE_FACTOR)])
dig 1                                                                                                                                                                                                                                                                            //    (2870)
*                                                                                                                                                                                                                                                                                //    (2872)
cover 2                                                                                                                                                                                                                                                                          //    (2873)
mulw                                                                                                                                                                                                                                                                             //    (2875)
cover 2                                                                                                                                                                                                                                                                          //    (2876)
+                                                                                                                                                                                                                                                                                //    (2878)
swap                                                                                                                                                                                                                                                                             //    (2879)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2880)
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (2881)                                                                     Int(RATIO_ONE * PRICECASTER_RESCALE_FACTOR)
divmodw                                                                                                                                                                                                                                                                          //    (2882)                                                                     WideRatio([signed_abs(amount.get()), price.get(), bonus.get()], [Int(RATIO_ONE * PRICECASTER_RESCALE_FACTOR)])
pop                                                                                                                                                                                                                                                                              //    (2883)
pop                                                                                                                                                                                                                                                                              //    (2884)
swap                                                                                                                                                                                                                                                                             //    (2885)
!                                                                                                                                                                                                                                                                                //    (2886)
assert                                                                                                                                                                                                                                                                           //    (2887)
calculatebasketvalue_24_l14:                                                                                                                                                                                                                                                     //                                                                       107     If(invert_bonus_or_use_margin.get())
+                                                                                                                                                                                                                                                                                //    (2888)                                                             106     output.get() + If(invert_bonus_or_use_margin.get()).Then(WideRatio([signed_abs(amount.get()), price.get(), Int(RATIO_ONE)], [bonus.get(), Int(PRICECASTER_RESCALE_FACTOR)])).Else(WideRatio([signed_abs(amount.get()), price.get(), bonus.get()], [Int(RATIO_ONE * PRICECASTER_RESCALE_FACTOR)]))
frame_bury 0                                                                                                                                                                                                                                                                     //    (2889)                                                             105     output.set(output.get() + If(invert_bonus_or_use_margin.get()).Then(WideRatio([signed_abs(amount.get()), price.get(), Int(RATIO_ONE)], [bonus.get(), Int(PRICECASTER_RESCALE_FACTOR)])).Else(WideRatio([signed_abs(amount.get()), price.get(), bonus.get()], [Int(RATIO_ONE * PRICECASTER_RESCALE_FACTOR)])))
b calculatebasketvalue_24_l3                                                                                                                                                                                                                                                     //    (2891)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
calculatebasketvalue_24_l15:                                                                                                                                                                                                                                                     //            contracts_unified/core/internal/liquidation_calculator.py  107     If(invert_bonus_or_use_margin.get())
frame_dig 12                                                                                                                                                                                                                                                                     //    (2894)                                                             110     amount.get()
callsub signedabs_8                                                                                                                                                                                                                                                              //    (2896)                                                                     signed_abs(amount.get())
frame_dig 4                                                                                                                                                                                                                                                                      //    (2899)                                                                     price.get()
mulw                                                                                                                                                                                                                                                                             //    (2901)                                                                     WideRatio([signed_abs(amount.get()), price.get(), Int(RATIO_ONE)], [bonus.get(), Int(PRICECASTER_RESCALE_FACTOR)])
intc 4 // 1000                                                                                                                                                                                                                                                                   //    (2902)                                                                     Int(RATIO_ONE)
uncover 2                                                                                                                                                                                                                                                                        //    (2904)                                                                     WideRatio([signed_abs(amount.get()), price.get(), Int(RATIO_ONE)], [bonus.get(), Int(PRICECASTER_RESCALE_FACTOR)])
dig 1                                                                                                                                                                                                                                                                            //    (2906)
*                                                                                                                                                                                                                                                                                //    (2908)
cover 2                                                                                                                                                                                                                                                                          //    (2909)
mulw                                                                                                                                                                                                                                                                             //    (2911)
cover 2                                                                                                                                                                                                                                                                          //    (2912)
+                                                                                                                                                                                                                                                                                //    (2914)
swap                                                                                                                                                                                                                                                                             //    (2915)
frame_dig 8                                                                                                                                                                                                                                                                      //    (2916)                                                                     bonus.get()
intc 9 // 1000000000                                                                                                                                                                                                                                                             //    (2918)                                                                     Int(PRICECASTER_RESCALE_FACTOR)
mulw                                                                                                                                                                                                                                                                             //    (2920)                                                                     WideRatio([signed_abs(amount.get()), price.get(), Int(RATIO_ONE)], [bonus.get(), Int(PRICECASTER_RESCALE_FACTOR)])
divmodw                                                                                                                                                                                                                                                                          //    (2921)
pop                                                                                                                                                                                                                                                                              //    (2922)
pop                                                                                                                                                                                                                                                                              //    (2923)
swap                                                                                                                                                                                                                                                                             //    (2924)
!                                                                                                                                                                                                                                                                                //    (2925)
assert                                                                                                                                                                                                                                                                           //    (2926)
b calculatebasketvalue_24_l14                                                                                                                                                                                                                                                    //    (2927)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
calculatebasketvalue_24_l16:                                                                                                                                                                                                                                                     //            contracts_unified/core/internal/liquidation_calculator.py  80      For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
retsub                                                                                                                                                                                                                                                                           //    (2930)                                                             50      def calculate_basket_value(cash_basket: SignedInstrumentBasket, add_negatives: abi.Bool, factor: Ratio, use_bonus: abi.Bool, invert_bonus_or_use_margin: abi.Bool, use_opt_utilization: abi.Bool, *, output: Price) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       159     def scale_basket(basket: SignedInstrumentBasket, numerator: abi.Uint64, denominator: abi.Uint64, *, output: SignedInstrumentBasket) -> Expr:
// scale_basket                                                                                                                                                                                                                                                                  //
scalebasket_25:                                                                                                                                                                                                                                                                  //
proto 3 1                                                                                                                                                                                                                                                                        //    (2931)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (2934)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2935)
dupn 2                                                                                                                                                                                                                                                                           //    (2936)  contracts_unified/core/internal/liquidation_calculator.py  159     def scale_basket(basket: SignedInstrumentBasket, numerator: abi.Uint64, denominator: abi.Uint64, *, output: SignedInstrumentBasket) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (2938)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2939)
dupn 2                                                                                                                                                                                                                                                                           //    (2940)  contracts_unified/core/internal/liquidation_calculator.py  159     def scale_basket(basket: SignedInstrumentBasket, numerator: abi.Uint64, denominator: abi.Uint64, *, output: SignedInstrumentBasket) -> Expr:
frame_dig -3                                                                                                                                                                                                                                                                     //    (2942)                                                             176     basket.length()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2944)
extract_uint16                                                                                                                                                                                                                                                                   //    (2945)
frame_bury 3                                                                                                                                                                                                                                                                     //    (2946)
frame_dig 3                                                                                                                                                                                                                                                                      //    (2948)
frame_bury 1                                                                                                                                                                                                                                                                     //    (2950)                                                                     length.set(basket.length())
frame_dig 1                                                                                                                                                                                                                                                                      //    (2952)                                                             177     length.get()
itob                                                                                                                                                                                                                                                                             //    (2954)                                                                     Itob(length.get())
extract 6 2                                                                                                                                                                                                                                                                      //    (2955)                                                                     Extract(Itob(length.get()), Int(6), Int(2))
store 16                                                                                                                                                                                                                                                                         //    (2958)                                                                     result.store(Extract(Itob(length.get()), Int(6), Int(2)))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2960)                                                             178     Int(0)
frame_bury 2                                                                                                                                                                                                                                                                     //    (2961)                                                                     i.set(Int(0))
frame_dig 2                                                                                                                                                                                                                                                                      //    (2963)
intc 5 // 256                                                                                                                                                                                                                                                                    //    (2965)
<                                                                                                                                                                                                                                                                                //    (2967)
assert                                                                                                                                                                                                                                                                           //    (2968)
scalebasket_25_l1:                                                                                                                                                                                                                                                               //                                                                               For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig 2                                                                                                                                                                                                                                                                      //    (2969)                                                                     i.get()
frame_dig 1                                                                                                                                                                                                                                                                      //    (2971)                                                                     length.get()
<                                                                                                                                                                                                                                                                                //    (2973)                                                                     i.get() < length.get()
bz scalebasket_25_l6                                                                                                                                                                                                                                                             //    (2974)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig -3                                                                                                                                                                                                                                                                     //    (2977)                                                             179     basket[i.get()].use(lambda instrument_amount: instrument_amount.instrument.use(lambda instrument: instrument_amount.amount.use(lambda amount: result.store(Concat(result.load(), Extract(Itob(instrument.get()), Int(7), Int(1)), If(signed_ltz(amount.get())).Then(Itob(signed_neg(WideRatio([signed_neg(amount.get()), numerator.get()], [denominator.get()])))).Else(Itob(WideRatio([amount.get(), numerator.get()], [denominator.get()]))))))))
pushint 9 // 9                                                                                                                                                                                                                                                                   //    (2979)
frame_dig 2                                                                                                                                                                                                                                                                      //    (2981)                                                                     i.get()
*                                                                                                                                                                                                                                                                                //    (2983)                                                                     basket[i.get()].use(lambda instrument_amount: instrument_amount.instrument.use(lambda instrument: instrument_amount.amount.use(lambda amount: result.store(Concat(result.load(), Extract(Itob(instrument.get()), Int(7), Int(1)), If(signed_ltz(amount.get())).Then(Itob(signed_neg(WideRatio([signed_neg(amount.get()), numerator.get()], [denominator.get()])))).Else(Itob(WideRatio([amount.get(), numerator.get()], [denominator.get()]))))))))
pushint 2 // 2                                                                                                                                                                                                                                                                   //    (2984)
+                                                                                                                                                                                                                                                                                //    (2986)
pushint 9 // 9                                                                                                                                                                                                                                                                   //    (2987)
extract3                                                                                                                                                                                                                                                                         //    (2989)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 4                                                                                                                                                                                                                                                                     //    (2990)  contracts_unified/core/internal/liquidation_calculator.py  179     basket[i.get()].use(lambda instrument_amount: instrument_amount.instrument.use(lambda instrument: instrument_amount.amount.use(lambda amount: result.store(Concat(result.load(), Extract(Itob(instrument.get()), Int(7), Int(1)), If(signed_ltz(amount.get())).Then(Itob(signed_neg(WideRatio([signed_neg(amount.get()), numerator.get()], [denominator.get()])))).Else(Itob(WideRatio([amount.get(), numerator.get()], [denominator.get()]))))))))
frame_dig 4                                                                                                                                                                                                                                                                      //    (2992)                                                             180     instrument_amount.instrument.use(lambda instrument: instrument_amount.amount.use(lambda amount: result.store(Concat(result.load(), Extract(Itob(instrument.get()), Int(7), Int(1)), If(signed_ltz(amount.get())).Then(Itob(signed_neg(WideRatio([signed_neg(amount.get()), numerator.get()], [denominator.get()])))).Else(Itob(WideRatio([amount.get(), numerator.get()], [denominator.get()])))))))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (2994)
getbyte                                                                                                                                                                                                                                                                          //    (2995)
frame_bury 6                                                                                                                                                                                                                                                                     //    (2996)
frame_dig 4                                                                                                                                                                                                                                                                      //    (2998)                                                             181     instrument_amount.amount.use(lambda amount: result.store(Concat(result.load(), Extract(Itob(instrument.get()), Int(7), Int(1)), If(signed_ltz(amount.get())).Then(Itob(signed_neg(WideRatio([signed_neg(amount.get()), numerator.get()], [denominator.get()])))).Else(Itob(WideRatio([amount.get(), numerator.get()], [denominator.get()]))))))
intc_1 // 1                                                                                                                                                                                                                                                                      //    (3000)
extract_uint64                                                                                                                                                                                                                                                                   //    (3001)
frame_bury 7                                                                                                                                                                                                                                                                     //    (3002)
load 16                                                                                                                                                                                                                                                                          //    (3004)                                                             184     result.load()
frame_dig 6                                                                                                                                                                                                                                                                      //    (3006)                                                             185     instrument.get()
itob                                                                                                                                                                                                                                                                             //    (3008)                                                                     Itob(instrument.get())
extract 7 1                                                                                                                                                                                                                                                                      //    (3009)                                                                     Extract(Itob(instrument.get()), Int(7), Int(1))
concat                                                                                                                                                                                                                                                                           //    (3012)                                                             183     Concat(result.load(), Extract(Itob(instrument.get()), Int(7), Int(1)), If(signed_ltz(amount.get())).Then(Itob(signed_neg(WideRatio([signed_neg(amount.get()), numerator.get()], [denominator.get()])))).Else(Itob(WideRatio([amount.get(), numerator.get()], [denominator.get()]))))
frame_dig 7                                                                                                                                                                                                                                                                      //    (3013)                                                             186     amount.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (3015)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (3016)                                                                     value & Int(9223372036854775808)
bnz scalebasket_25_l5                                                                                                                                                                                                                                                            //    (3017)  contracts_unified/core/internal/liquidation_calculator.py  186     If(signed_ltz(amount.get()))
frame_dig 7                                                                                                                                                                                                                                                                      //    (3020)                                                             189     amount.get()
frame_dig -2                                                                                                                                                                                                                                                                     //    (3022)                                                                     numerator.get()
mulw                                                                                                                                                                                                                                                                             //    (3024)                                                                     WideRatio([amount.get(), numerator.get()], [denominator.get()])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3025)
frame_dig -1                                                                                                                                                                                                                                                                     //    (3026)                                                                     denominator.get()
divmodw                                                                                                                                                                                                                                                                          //    (3028)                                                                     WideRatio([amount.get(), numerator.get()], [denominator.get()])
pop                                                                                                                                                                                                                                                                              //    (3029)
pop                                                                                                                                                                                                                                                                              //    (3030)
swap                                                                                                                                                                                                                                                                             //    (3031)
!                                                                                                                                                                                                                                                                                //    (3032)
assert                                                                                                                                                                                                                                                                           //    (3033)
itob                                                                                                                                                                                                                                                                             //    (3034)                                                                     Itob(WideRatio([amount.get(), numerator.get()], [denominator.get()]))
scalebasket_25_l4:                                                                                                                                                                                                                                                               //                                                                       178     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
concat                                                                                                                                                                                                                                                                           //    (3035)                                                             183     Concat(result.load(), Extract(Itob(instrument.get()), Int(7), Int(1)), If(signed_ltz(amount.get())).Then(Itob(signed_neg(WideRatio([signed_neg(amount.get()), numerator.get()], [denominator.get()])))).Else(Itob(WideRatio([amount.get(), numerator.get()], [denominator.get()]))))
store 16                                                                                                                                                                                                                                                                         //    (3036)                                                             182     result.store(Concat(result.load(), Extract(Itob(instrument.get()), Int(7), Int(1)), If(signed_ltz(amount.get())).Then(Itob(signed_neg(WideRatio([signed_neg(amount.get()), numerator.get()], [denominator.get()])))).Else(Itob(WideRatio([amount.get(), numerator.get()], [denominator.get()])))))
frame_dig 2                                                                                                                                                                                                                                                                      //    (3038)                                                             178     i.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (3040)                                                                     Int(1)
+                                                                                                                                                                                                                                                                                //    (3041)                                                                     i.get() + Int(1)
frame_bury 2                                                                                                                                                                                                                                                                     //    (3042)                                                                     i.set(i.get() + Int(1))
frame_dig 2                                                                                                                                                                                                                                                                      //    (3044)
intc 5 // 256                                                                                                                                                                                                                                                                    //    (3046)
<                                                                                                                                                                                                                                                                                //    (3048)
assert                                                                                                                                                                                                                                                                           //    (3049)
b scalebasket_25_l1                                                                                                                                                                                                                                                              //    (3050)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
scalebasket_25_l5:                                                                                                                                                                                                                                                               //                                                                       186     If(signed_ltz(amount.get()))
frame_dig 7                                                                                                                                                                                                                                                                      //    (3053)                                                             187     amount.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (3055)                                                                     signed_neg(amount.get())
frame_dig -2                                                                                                                                                                                                                                                                     //    (3058)                                                                     numerator.get()
mulw                                                                                                                                                                                                                                                                             //    (3060)                                                                     WideRatio([signed_neg(amount.get()), numerator.get()], [denominator.get()])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3061)
frame_dig -1                                                                                                                                                                                                                                                                     //    (3062)                                                                     denominator.get()
divmodw                                                                                                                                                                                                                                                                          //    (3064)                                                                     WideRatio([signed_neg(amount.get()), numerator.get()], [denominator.get()])
pop                                                                                                                                                                                                                                                                              //    (3065)
pop                                                                                                                                                                                                                                                                              //    (3066)
swap                                                                                                                                                                                                                                                                             //    (3067)
!                                                                                                                                                                                                                                                                                //    (3068)
assert                                                                                                                                                                                                                                                                           //    (3069)
callsub signedneg_7                                                                                                                                                                                                                                                              //    (3070)                                                                     signed_neg(WideRatio([signed_neg(amount.get()), numerator.get()], [denominator.get()]))
itob                                                                                                                                                                                                                                                                             //    (3073)                                                                     Itob(signed_neg(WideRatio([signed_neg(amount.get()), numerator.get()], [denominator.get()])))
b scalebasket_25_l4                                                                                                                                                                                                                                                              //    (3074)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
scalebasket_25_l6:                                                                                                                                                                                                                                                               //            contracts_unified/core/internal/liquidation_calculator.py  178     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
load 16                                                                                                                                                                                                                                                                          //    (3077)                                                             199     result.load()
frame_bury 0                                                                                                                                                                                                                                                                     //    (3079)                                                                     output.decode(result.load())
retsub                                                                                                                                                                                                                                                                           //    (3081)                                                             159     def scale_basket(basket: SignedInstrumentBasket, numerator: abi.Uint64, denominator: abi.Uint64, *, output: SignedInstrumentBasket) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       204     def closer_to_zero(account: AccountAddress, pool_basket: SignedInstrumentBasket) -> Expr:
// closer_to_zero                                                                                                                                                                                                                                                                //
closertozero_26:                                                                                                                                                                                                                                                                 //
proto 2 0                                                                                                                                                                                                                                                                        //    (3082)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3085)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (3086)  contracts_unified/core/internal/liquidation_calculator.py  204     def closer_to_zero(account: AccountAddress, pool_basket: SignedInstrumentBasket) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (3087)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3088)
dupn 3                                                                                                                                                                                                                                                                           //    (3089)  contracts_unified/core/internal/liquidation_calculator.py  204     def closer_to_zero(account: AccountAddress, pool_basket: SignedInstrumentBasket) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (3091)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3092)
frame_dig -1                                                                                                                                                                                                                                                                     //    (3093)  contracts_unified/core/internal/liquidation_calculator.py  225     pool_basket.length()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3095)
extract_uint16                                                                                                                                                                                                                                                                   //    (3096)
frame_bury 6                                                                                                                                                                                                                                                                     //    (3097)
frame_dig 6                                                                                                                                                                                                                                                                      //    (3099)
frame_bury 0                                                                                                                                                                                                                                                                     //    (3101)                                                                     length.set(pool_basket.length())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3103)                                                             226     Int(0)
frame_bury 1                                                                                                                                                                                                                                                                     //    (3104)                                                                     i.set(Int(0))
frame_dig 1                                                                                                                                                                                                                                                                      //    (3106)
intc 5 // 256                                                                                                                                                                                                                                                                    //    (3108)
<                                                                                                                                                                                                                                                                                //    (3110)
assert                                                                                                                                                                                                                                                                           //    (3111)
closertozero_26_l1:                                                                                                                                                                                                                                                              //                                                                               For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig 1                                                                                                                                                                                                                                                                      //    (3112)                                                                     i.get()
frame_dig 0                                                                                                                                                                                                                                                                      //    (3114)                                                                     length.get()
<                                                                                                                                                                                                                                                                                //    (3116)                                                                     i.get() < length.get()
bz closertozero_26_l6                                                                                                                                                                                                                                                            //    (3117)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig -1                                                                                                                                                                                                                                                                     //    (3120)                                                             227     pool_basket[i.get()].use(lambda entry: Seq(instrument_id.set(entry.instrument), basket_amount.set(entry.amount), pool_data.set(cast(abi.ReturnedValue, LocalStateHandler.get_position(account, instrument_id))), user_pool_balance.set(pool_data.principal), If(signed_ltz(user_pool_balance.get())).Then(Assert(And(Or(signed_ltz(basket_amount.get()), basket_amount.get() == Int(0)), signed_gte(basket_amount.get(), user_pool_balance.get())))).Else(Assert(And(Not(signed_ltz(basket_amount.get())), signed_gte(user_pool_balance.get(), basket_amount.get()))))))
pushint 9 // 9                                                                                                                                                                                                                                                                   //    (3122)
frame_dig 1                                                                                                                                                                                                                                                                      //    (3124)                                                                     i.get()
*                                                                                                                                                                                                                                                                                //    (3126)                                                                     pool_basket[i.get()].use(lambda entry: Seq(instrument_id.set(entry.instrument), basket_amount.set(entry.amount), pool_data.set(cast(abi.ReturnedValue, LocalStateHandler.get_position(account, instrument_id))), user_pool_balance.set(pool_data.principal), If(signed_ltz(user_pool_balance.get())).Then(Assert(And(Or(signed_ltz(basket_amount.get()), basket_amount.get() == Int(0)), signed_gte(basket_amount.get(), user_pool_balance.get())))).Else(Assert(And(Not(signed_ltz(basket_amount.get())), signed_gte(user_pool_balance.get(), basket_amount.get()))))))
pushint 2 // 2                                                                                                                                                                                                                                                                   //    (3127)
+                                                                                                                                                                                                                                                                                //    (3129)
pushint 9 // 9                                                                                                                                                                                                                                                                   //    (3130)
extract3                                                                                                                                                                                                                                                                         //    (3132)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 7                                                                                                                                                                                                                                                                     //    (3133)  contracts_unified/core/internal/liquidation_calculator.py  227     pool_basket[i.get()].use(lambda entry: Seq(instrument_id.set(entry.instrument), basket_amount.set(entry.amount), pool_data.set(cast(abi.ReturnedValue, LocalStateHandler.get_position(account, instrument_id))), user_pool_balance.set(pool_data.principal), If(signed_ltz(user_pool_balance.get())).Then(Assert(And(Or(signed_ltz(basket_amount.get()), basket_amount.get() == Int(0)), signed_gte(basket_amount.get(), user_pool_balance.get())))).Else(Assert(And(Not(signed_ltz(basket_amount.get())), signed_gte(user_pool_balance.get(), basket_amount.get()))))))
frame_dig 7                                                                                                                                                                                                                                                                      //    (3135)                                                             229     instrument_id.set(entry.instrument)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3137)
getbyte                                                                                                                                                                                                                                                                          //    (3138)
frame_bury 3                                                                                                                                                                                                                                                                     //    (3139)
frame_dig 7                                                                                                                                                                                                                                                                      //    (3141)                                                             230     basket_amount.set(entry.amount)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (3143)
extract_uint64                                                                                                                                                                                                                                                                   //    (3144)
frame_bury 5                                                                                                                                                                                                                                                                     //    (3145)
frame_dig -2                                                                                                                                                                                                                                                                     //    (3147)  contracts_unified/core/state_handler/local_handler.py      39      def get_position(account: AccountAddress, instrument_id: InstrumentId, *, output: UserInstrumentData) -> Expr:
frame_dig 3                                                                                                                                                                                                                                                                      //    (3149)
callsub getposition_3                                                                                                                                                                                                                                                            //    (3151)  contracts_unified/core/internal/liquidation_calculator.py  231     LocalStateHandler.get_position(account, instrument_id)
frame_bury 2                                                                                                                                                                                                                                                                     //    (3154)                                                                     pool_data.set(cast(abi.ReturnedValue, LocalStateHandler.get_position(account, instrument_id)))
frame_dig 2                                                                                                                                                                                                                                                                      //    (3156)                                                             232     user_pool_balance.set(pool_data.principal)
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (3158)
extract_uint64                                                                                                                                                                                                                                                                   //    (3160)
frame_bury 4                                                                                                                                                                                                                                                                     //    (3161)
frame_dig 4                                                                                                                                                                                                                                                                      //    (3163)                                                             233     user_pool_balance.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (3165)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (3166)                                                                     value & Int(9223372036854775808)
bnz closertozero_26_l5                                                                                                                                                                                                                                                           //    (3167)  contracts_unified/core/internal/liquidation_calculator.py  233     If(signed_ltz(user_pool_balance.get()))
frame_dig 5                                                                                                                                                                                                                                                                      //    (3170)                                                             240     basket_amount.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (3172)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (3173)                                                                     value & Int(9223372036854775808)
!                                                                                                                                                                                                                                                                                //    (3174)  contracts_unified/core/internal/liquidation_calculator.py  240     Not(signed_ltz(basket_amount.get()))
frame_dig 4                                                                                                                                                                                                                                                                      //    (3175)                                                                     user_pool_balance.get()
frame_dig 5                                                                                                                                                                                                                                                                      //    (3177)                                                                     basket_amount.get()
callsub signedgte_11                                                                                                                                                                                                                                                             //    (3179)                                                                     signed_gte(user_pool_balance.get(), basket_amount.get())
&&                                                                                                                                                                                                                                                                               //    (3182)                                                                     And(Not(signed_ltz(basket_amount.get())), signed_gte(user_pool_balance.get(), basket_amount.get()))
assert                                                                                                                                                                                                                                                                           //    (3183)                                                                     Assert(And(Not(signed_ltz(basket_amount.get())), signed_gte(user_pool_balance.get(), basket_amount.get())))
closertozero_26_l4:                                                                                                                                                                                                                                                              //                                                                       226     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig 1                                                                                                                                                                                                                                                                      //    (3184)                                                                     i.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (3186)                                                                     Int(1)
+                                                                                                                                                                                                                                                                                //    (3187)                                                                     i.get() + Int(1)
frame_bury 1                                                                                                                                                                                                                                                                     //    (3188)                                                                     i.set(i.get() + Int(1))
frame_dig 1                                                                                                                                                                                                                                                                      //    (3190)
intc 5 // 256                                                                                                                                                                                                                                                                    //    (3192)
<                                                                                                                                                                                                                                                                                //    (3194)
assert                                                                                                                                                                                                                                                                           //    (3195)
b closertozero_26_l1                                                                                                                                                                                                                                                             //    (3196)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
closertozero_26_l5:                                                                                                                                                                                                                                                              //                                                                       233     If(signed_ltz(user_pool_balance.get()))
frame_dig 5                                                                                                                                                                                                                                                                      //    (3199)                                                             236     basket_amount.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (3201)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (3202)                                                                     value & Int(9223372036854775808)
frame_dig 5                                                                                                                                                                                                                                                                      //    (3203)  contracts_unified/core/internal/liquidation_calculator.py  236     basket_amount.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3205)                                                                     Int(0)
==                                                                                                                                                                                                                                                                               //    (3206)                                                                     basket_amount.get() == Int(0)
||                                                                                                                                                                                                                                                                               //    (3207)                                                                     Or(signed_ltz(basket_amount.get()), basket_amount.get() == Int(0))
frame_dig 5                                                                                                                                                                                                                                                                      //    (3208)                                                                     basket_amount.get()
frame_dig 4                                                                                                                                                                                                                                                                      //    (3210)                                                                     user_pool_balance.get()
callsub signedgte_11                                                                                                                                                                                                                                                             //    (3212)                                                                     signed_gte(basket_amount.get(), user_pool_balance.get())
&&                                                                                                                                                                                                                                                                               //    (3215)                                                                     And(Or(signed_ltz(basket_amount.get()), basket_amount.get() == Int(0)), signed_gte(basket_amount.get(), user_pool_balance.get()))
assert                                                                                                                                                                                                                                                                           //    (3216)                                                                     Assert(And(Or(signed_ltz(basket_amount.get()), basket_amount.get() == Int(0)), signed_gte(basket_amount.get(), user_pool_balance.get())))
b closertozero_26_l4                                                                                                                                                                                                                                                             //    (3217)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
closertozero_26_l6:                                                                                                                                                                                                                                                              //            contracts_unified/core/internal/liquidation_calculator.py  226     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
retsub                                                                                                                                                                                                                                                                           //    (3220)                                                             204     def closer_to_zero(account: AccountAddress, pool_basket: SignedInstrumentBasket) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/internal/setup.py                   22      def setup(opup_amount: Expr) -> Expr:
// setup                                                                                                                                                                                                                                                                         //
setup_27:                                                                                                                                                                                                                                                                        //
proto 1 0                                                                                                                                                                                                                                                                        //    (3221)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3224)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (3225)  contracts_unified/core/internal/setup.py                   22      def setup(opup_amount: Expr) -> Expr:
txna Applications 1                                                                                                                                                                                                                                                              //    (3226)                                                             31      Txn.applications[1]
frame_bury 0                                                                                                                                                                                                                                                                     //    (3229)                                                                     target.set(Txn.applications[1])
frame_dig -1                                                                                                                                                                                                                                                                     //    (3231)  contracts_unified/core/main.py                             126     CORE_ROUTER.compile_program(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True))
frame_bury 1                                                                                                                                                                                                                                                                     //    (3233)  contracts_unified/core/internal/setup.py                   35      i.set(opup_amount)
setup_27_l1:                                                                                                                                                                                                                                                                     //                                                                       36      While(i.get() >= Global.min_txn_fee())
frame_dig 1                                                                                                                                                                                                                                                                      //    (3235)                                                                     i.get()
global MinTxnFee                                                                                                                                                                                                                                                                 //    (3237)                                                                     Global.min_txn_fee()
>=                                                                                                                                                                                                                                                                               //    (3239)                                                                     i.get() >= Global.min_txn_fee()
bz setup_27_l3                                                                                                                                                                                                                                                                   //    (3240)                                                                     While(i.get() >= Global.min_txn_fee())
itxn_begin                                                                                                                                                                                                                                                                       //    (3243)                                                             37      InnerTxnBuilder.ExecuteMethodCall(app_id=target.get(), method_signature='nop()void', args=[], extra_fields={TxnField.fee: Int(0)})
pushint 6 // appl                                                                                                                                                                                                                                                                //    (3244)
itxn_field TypeEnum                                                                                                                                                                                                                                                              //    (3246)
frame_dig 0                                                                                                                                                                                                                                                                      //    (3248)                                                             38      target.get()
itxn_field ApplicationID                                                                                                                                                                                                                                                         //    (3250)                                                             37      InnerTxnBuilder.ExecuteMethodCall(app_id=target.get(), method_signature='nop()void', args=[], extra_fields={TxnField.fee: Int(0)})
pushbytes 0x58759fa2 // "nop()void"                                                                                                                                                                                                                                              //    (3252)
itxn_field ApplicationArgs                                                                                                                                                                                                                                                       //    (3258)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3260)                                                             41      Int(0)
itxn_field Fee                                                                                                                                                                                                                                                                   //    (3261)                                                             37      InnerTxnBuilder.ExecuteMethodCall(app_id=target.get(), method_signature='nop()void', args=[], extra_fields={TxnField.fee: Int(0)})
itxn_submit                                                                                                                                                                                                                                                                      //    (3263)
frame_dig 1                                                                                                                                                                                                                                                                      //    (3264)                                                             43      i.get()
global MinTxnFee                                                                                                                                                                                                                                                                 //    (3266)                                                                     Global.min_txn_fee()
-                                                                                                                                                                                                                                                                                //    (3268)                                                                     i.get() - Global.min_txn_fee()
frame_bury 1                                                                                                                                                                                                                                                                     //    (3269)                                                                     i.set(i.get() - Global.min_txn_fee())
b setup_27_l1                                                                                                                                                                                                                                                                    //    (3271)                                                             36      While(i.get() >= Global.min_txn_fee())
setup_27_l3:                                                                                                                                                                                                                                                                     //
retsub                                                                                                                                                                                                                                                                           //    (3274)                                                             22      def setup(opup_amount: Expr) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
// account_move                                                                                                                                                                                                                                                                  //
accountmove_28:                                                                                                                                                                                                                                                                  //
proto 5 0                                                                                                                                                                                                                                                                        //    (3275)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3278)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (3279)
dupn 7                                                                                                                                                                                                                                                                           //    (3280)  contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3282)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 4                                                                                                                                                                                                                                                                           //    (3283)  contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (3285)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3286)
dup                                                                                                                                                                                                                                                                              //    (3287)  contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (3288)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3289)
dup                                                                                                                                                                                                                                                                              //    (3290)  contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
frame_dig -1                                                                                                                                                                                                                                                                     //    (3291)                                                             68      opup_budget.get()
callsub setup_27                                                                                                                                                                                                                                                                 //    (3293)                                                                     setup(opup_budget.get())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3296)                                                             71      Int(0)
!                                                                                                                                                                                                                                                                                //    (3297)                                                                     abi_false.set(Int(0))
!                                                                                                                                                                                                                                                                                //    (3298)
frame_bury 0                                                                                                                                                                                                                                                                     //    (3299)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3301)                                                             72      Int(0)
frame_bury 12                                                                                                                                                                                                                                                                    //    (3302)                                                                     abi_zero_int.set(Int(0))
callsub senderissigvalidator_21                                                                                                                                                                                                                                                  //    (3304)                                                             75      sender_is_sig_validator()
frame_dig -3                                                                                                                                                                                                                                                                     //    (3307)                                                             78      delegation_chain.length()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3309)
extract_uint16                                                                                                                                                                                                                                                                   //    (3310)
frame_bury 13                                                                                                                                                                                                                                                                    //    (3311)
frame_dig 13                                                                                                                                                                                                                                                                     //    (3313)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3315)                                                                     Int(0)
==                                                                                                                                                                                                                                                                               //    (3316)                                                                     delegation_chain.length() == Int(0)
assert                                                                                                                                                                                                                                                                           //    (3317)                                                                     Assert(delegation_chain.length() == Int(0))
frame_dig -4                                                                                                                                                                                                                                                                     //    (3318)                                                             81      user_op.operation.use(lambda op_data: Seq(data.decode(op_data.get()), data.operation.use(lambda op: Assert(op.get() == OperationId.AccountMove)), data.destination_account.store_into(destination_account), data.cash.store_into(cash), data.pool.store_into(pool)))
frame_dig -4                                                                                                                                                                                                                                                                     //    (3320)
pushint 72 // 72                                                                                                                                                                                                                                                                 //    (3322)
extract_uint16                                                                                                                                                                                                                                                                   //    (3324)
frame_dig -4                                                                                                                                                                                                                                                                     //    (3325)
pushint 74 // 74                                                                                                                                                                                                                                                                 //    (3327)
extract_uint16                                                                                                                                                                                                                                                                   //    (3329)
substring3                                                                                                                                                                                                                                                                       //    (3330)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 14                                                                                                                                                                                                                                                                    //    (3331)  contracts_unified/core/methods/account_move.py             81      user_op.operation.use(lambda op_data: Seq(data.decode(op_data.get()), data.operation.use(lambda op: Assert(op.get() == OperationId.AccountMove)), data.destination_account.store_into(destination_account), data.cash.store_into(cash), data.pool.store_into(pool)))
frame_dig 14                                                                                                                                                                                                                                                                     //    (3333)                                                             83      op_data.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (3335)
frame_bury 3                                                                                                                                                                                                                                                                     //    (3338)                                                                     data.decode(op_data.get())
frame_dig 3                                                                                                                                                                                                                                                                      //    (3340)                                                             84      data.operation.use(lambda op: Assert(op.get() == OperationId.AccountMove))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3342)
getbyte                                                                                                                                                                                                                                                                          //    (3343)
frame_bury 15                                                                                                                                                                                                                                                                    //    (3344)
frame_dig 15                                                                                                                                                                                                                                                                     //    (3346)                                                                     op.get()
pushint 5 // 5                                                                                                                                                                                                                                                                   //    (3348)  contracts_unified/library/c3types_user.py                  28      Int(5)
==                                                                                                                                                                                                                                                                               //    (3350)  contracts_unified/core/methods/account_move.py             84      op.get() == OperationId.AccountMove
assert                                                                                                                                                                                                                                                                           //    (3351)                                                                     Assert(op.get() == OperationId.AccountMove)
frame_dig 3                                                                                                                                                                                                                                                                      //    (3352)                                                             85      data.destination_account.store_into(destination_account)
extract 1 32                                                                                                                                                                                                                                                                     //    (3354)
frame_bury 8                                                                                                                                                                                                                                                                     //    (3357)
frame_dig 3                                                                                                                                                                                                                                                                      //    (3359)                                                             86      data.cash.store_into(cash)
frame_dig 3                                                                                                                                                                                                                                                                      //    (3361)
pushint 33 // 33                                                                                                                                                                                                                                                                 //    (3363)
extract_uint16                                                                                                                                                                                                                                                                   //    (3365)
frame_dig 3                                                                                                                                                                                                                                                                      //    (3366)
pushint 35 // 35                                                                                                                                                                                                                                                                 //    (3368)
extract_uint16                                                                                                                                                                                                                                                                   //    (3370)
substring3                                                                                                                                                                                                                                                                       //    (3371)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 5                                                                                                                                                                                                                                                                     //    (3372)  contracts_unified/core/methods/account_move.py             86      data.cash.store_into(cash)
frame_dig 3                                                                                                                                                                                                                                                                      //    (3374)                                                             87      data.pool.store_into(pool)
frame_dig 3                                                                                                                                                                                                                                                                      //    (3376)
pushint 35 // 35                                                                                                                                                                                                                                                                 //    (3378)
extract_uint16                                                                                                                                                                                                                                                                   //    (3380)
dig 1                                                                                                                                                                                                                                                                            //    (3381)
len                                                                                                                                                                                                                                                                              //    (3383)
substring3                                                                                                                                                                                                                                                                       //    (3384)
frame_bury 7                                                                                                                                                                                                                                                                     //    (3385)
frame_dig -5                                                                                                                                                                                                                                                                     //    (3387)                                                             92      source_account.get()
frame_dig 8                                                                                                                                                                                                                                                                      //    (3389)                                                                     destination_account.get()
!=                                                                                                                                                                                                                                                                               //    (3391)                                                                     source_account.get() != destination_account.get()
assert                                                                                                                                                                                                                                                                           //    (3392)                                                                     Assert(source_account.get() != destination_account.get())
frame_dig -5                                                                                                                                                                                                                                                                     //    (3393)  contracts_unified/core/internal/liquidation_calculator.py  204     def closer_to_zero(account: AccountAddress, pool_basket: SignedInstrumentBasket) -> Expr:
frame_dig 7                                                                                                                                                                                                                                                                      //    (3395)
callsub closertozero_26                                                                                                                                                                                                                                                          //    (3397)  contracts_unified/core/methods/account_move.py             95      closer_to_zero(source_account, pool)
frame_dig 7                                                                                                                                                                                                                                                                      //    (3400)                                                             98      pool.length()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3402)
extract_uint16                                                                                                                                                                                                                                                                   //    (3403)
frame_bury 16                                                                                                                                                                                                                                                                    //    (3404)
frame_dig 16                                                                                                                                                                                                                                                                     //    (3406)
frame_bury 11                                                                                                                                                                                                                                                                    //    (3408)                                                                     length.set(pool.length())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3410)                                                             99      Int(0)
frame_bury 10                                                                                                                                                                                                                                                                    //    (3411)                                                                     i.set(Int(0))
accountmove_28_l1:                                                                                                                                                                                                                                                               //                                                                               For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig 10                                                                                                                                                                                                                                                                     //    (3413)                                                                     i.get()
frame_dig 11                                                                                                                                                                                                                                                                     //    (3415)                                                                     length.get()
<                                                                                                                                                                                                                                                                                //    (3417)                                                                     i.get() < length.get()
bz accountmove_28_l3                                                                                                                                                                                                                                                             //    (3418)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig 7                                                                                                                                                                                                                                                                      //    (3421)                                                             100     pool[i.get()].use(lambda instrument_amount: instrument_amount.instrument.use(lambda instrument: Seq(cast(Expr, perform_pool_move(source_account, instrument, abi_zero_int)), cast(Expr, perform_pool_move(destination_account, instrument, abi_zero_int)))))
pushint 9 // 9                                                                                                                                                                                                                                                                   //    (3423)
frame_dig 10                                                                                                                                                                                                                                                                     //    (3425)                                                                     i.get()
*                                                                                                                                                                                                                                                                                //    (3427)                                                                     pool[i.get()].use(lambda instrument_amount: instrument_amount.instrument.use(lambda instrument: Seq(cast(Expr, perform_pool_move(source_account, instrument, abi_zero_int)), cast(Expr, perform_pool_move(destination_account, instrument, abi_zero_int)))))
pushint 2 // 2                                                                                                                                                                                                                                                                   //    (3428)
+                                                                                                                                                                                                                                                                                //    (3430)
pushint 9 // 9                                                                                                                                                                                                                                                                   //    (3431)
extract3                                                                                                                                                                                                                                                                         //    (3433)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 17                                                                                                                                                                                                                                                                    //    (3434)  contracts_unified/core/methods/account_move.py             100     pool[i.get()].use(lambda instrument_amount: instrument_amount.instrument.use(lambda instrument: Seq(cast(Expr, perform_pool_move(source_account, instrument, abi_zero_int)), cast(Expr, perform_pool_move(destination_account, instrument, abi_zero_int)))))
frame_dig 17                                                                                                                                                                                                                                                                     //    (3436)                                                             101     instrument_amount.instrument.use(lambda instrument: Seq(cast(Expr, perform_pool_move(source_account, instrument, abi_zero_int)), cast(Expr, perform_pool_move(destination_account, instrument, abi_zero_int))))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3438)
getbyte                                                                                                                                                                                                                                                                          //    (3439)
frame_bury 19                                                                                                                                                                                                                                                                    //    (3440)
frame_dig -5                                                                                                                                                                                                                                                                     //    (3442)  contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
frame_dig 19                                                                                                                                                                                                                                                                     //    (3444)
frame_dig 12                                                                                                                                                                                                                                                                     //    (3446)
callsub performpoolmove_14                                                                                                                                                                                                                                                       //    (3448)  contracts_unified/core/methods/account_move.py             103     perform_pool_move(source_account, instrument, abi_zero_int)
frame_dig 8                                                                                                                                                                                                                                                                      //    (3451)  contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
frame_dig 19                                                                                                                                                                                                                                                                     //    (3453)
frame_dig 12                                                                                                                                                                                                                                                                     //    (3455)
callsub performpoolmove_14                                                                                                                                                                                                                                                       //    (3457)  contracts_unified/core/methods/account_move.py             104     perform_pool_move(destination_account, instrument, abi_zero_int)
frame_dig 10                                                                                                                                                                                                                                                                     //    (3460)                                                             99      i.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (3462)                                                                     Int(1)
+                                                                                                                                                                                                                                                                                //    (3463)                                                                     i.get() + Int(1)
frame_bury 10                                                                                                                                                                                                                                                                    //    (3464)                                                                     i.set(i.get() + Int(1))
b accountmove_28_l1                                                                                                                                                                                                                                                              //    (3466)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
accountmove_28_l3:                                                                                                                                                                                                                                                               //
frame_dig -5                                                                                                                                                                                                                                                                     //    (3469)  contracts_unified/core/internal/move.py                    158     def signed_account_move_baskets(source_account: AccountAddress, destination_account: AccountAddress, cash_basket: SignedInstrumentBasket, pool_basket: SignedInstrumentBasket, allow_negative_assets: abi.Bool, allow_negative_liabilities: abi.Bool) -> Expr:
frame_dig 8                                                                                                                                                                                                                                                                      //    (3471)
frame_dig 5                                                                                                                                                                                                                                                                      //    (3473)
frame_dig 7                                                                                                                                                                                                                                                                      //    (3475)
frame_dig 0                                                                                                                                                                                                                                                                      //    (3477)
frame_dig 0                                                                                                                                                                                                                                                                      //    (3479)
callsub signedaccountmovebaskets_19                                                                                                                                                                                                                                              //    (3481)  contracts_unified/core/methods/account_move.py             111     signed_account_move_baskets(source_account, destination_account, cash, pool, abi_false, abi_false)
frame_dig -5                                                                                                                                                                                                                                                                     //    (3484)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (3486)
callsub healthcheck_16                                                                                                                                                                                                                                                           //    (3488)  contracts_unified/core/methods/account_move.py             115     health_check(source_account, abi_false)
frame_bury 9                                                                                                                                                                                                                                                                     //    (3491)                                                                     health.set(health_check(source_account, abi_false))
frame_dig 9                                                                                                                                                                                                                                                                      //    (3493)                                                             116     health.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (3495)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (3496)                                                                     value & Int(9223372036854775808)
!                                                                                                                                                                                                                                                                                //    (3497)  contracts_unified/core/methods/account_move.py             116     Not(signed_ltz(health.get()))
assert                                                                                                                                                                                                                                                                           //    (3498)                                                                     Assert(Not(signed_ltz(health.get())))
retsub                                                                                                                                                                                                                                                                           //    (3499)                                                             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/state_handler/order_handler.py      32      def get_order_id(order: OrderData, *, output: OrderId) -> Expr:
// get_order_id                                                                                                                                                                                                                                                                  //
getorderid_29:                                                                                                                                                                                                                                                                   //
proto 1 1                                                                                                                                                                                                                                                                        //    (3500)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (3503)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
pushbytes 0x6f72646572 // "order"                                                                                                                                                                                                                                                //    (3504)  contracts_unified/core/state_handler/order_handler.py      24      Bytes('order')
frame_dig -1                                                                                                                                                                                                                                                                     //    (3511)                                                             38      order.encode()
sha512_256                                                                                                                                                                                                                                                                       //    (3513)                                                                     Sha512_256(order.encode())
concat                                                                                                                                                                                                                                                                           //    (3514)                                                                     Concat(ORDER_PREFIX, Sha512_256(order.encode()))
frame_bury 0                                                                                                                                                                                                                                                                     //    (3515)                                                                     output.set(Concat(ORDER_PREFIX, Sha512_256(order.encode())))
pushint 37 // 37                                                                                                                                                                                                                                                                 //    (3517)
frame_dig 0                                                                                                                                                                                                                                                                      //    (3519)
len                                                                                                                                                                                                                                                                              //    (3521)
==                                                                                                                                                                                                                                                                               //    (3522)
assert                                                                                                                                                                                                                                                                           //    (3523)
retsub                                                                                                                                                                                                                                                                           //    (3524)                                                             32      def get_order_id(order: OrderData, *, output: OrderId) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       42      def add_order(order: OrderData) -> Expr:
// add_order                                                                                                                                                                                                                                                                     //
addorder_30:                                                                                                                                                                                                                                                                     //
proto 1 0                                                                                                                                                                                                                                                                        //    (3525)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (3528)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (3529)  contracts_unified/core/state_handler/order_handler.py      42      def add_order(order: OrderData) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3530)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 4                                                                                                                                                                                                                                                                           //    (3531)  contracts_unified/core/state_handler/order_handler.py      42      def add_order(order: OrderData) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (3533)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (3534)  contracts_unified/core/state_handler/order_handler.py      42      def add_order(order: OrderData) -> Expr:
frame_dig -1                                                                                                                                                                                                                                                                     //    (3535)                                                             32      def get_order_id(order: OrderData, *, output: OrderId) -> Expr:
callsub getorderid_29                                                                                                                                                                                                                                                            //    (3537)                                                             52      OrderStateHandler.get_order_id(order)
frame_bury 0                                                                                                                                                                                                                                                                     //    (3540)                                                                     order_id.set(OrderStateHandler.get_order_id(order))
frame_dig 0                                                                                                                                                                                                                                                                      //    (3542)                                                             55      order_id.get()
box_len                                                                                                                                                                                                                                                                          //    (3544)                                                                     App.box_length(order_id.get())
store 13                                                                                                                                                                                                                                                                         //    (3545)
store 12                                                                                                                                                                                                                                                                         //    (3547)
load 13                                                                                                                                                                                                                                                                          //    (3549)                                                             56      length.hasValue()
bz addorder_30_l2                                                                                                                                                                                                                                                                //    (3551)                                                                     If(length.hasValue(), Return())
retsub                                                                                                                                                                                                                                                                           //    (3554)                                                                     Return()
addorder_30_l2:                                                                                                                                                                                                                                                                  //                                                                               If(length.hasValue(), Return())
frame_dig -1                                                                                                                                                                                                                                                                     //    (3555)                                                             59      order.sell_amount.use(lambda sell_amount: order.max_borrow_amount.use(lambda borrow_amount: order.max_repay_amount.use(lambda repay_amount: on_chain_data.set(sell_amount, borrow_amount, repay_amount))))
pushint 50 // 50                                                                                                                                                                                                                                                                 //    (3557)
extract_uint64                                                                                                                                                                                                                                                                   //    (3559)
frame_bury 2                                                                                                                                                                                                                                                                     //    (3560)
frame_dig -1                                                                                                                                                                                                                                                                     //    (3562)                                                             60      order.max_borrow_amount.use(lambda borrow_amount: order.max_repay_amount.use(lambda repay_amount: on_chain_data.set(sell_amount, borrow_amount, repay_amount)))
pushint 58 // 58                                                                                                                                                                                                                                                                 //    (3564)
extract_uint64                                                                                                                                                                                                                                                                   //    (3566)
frame_bury 3                                                                                                                                                                                                                                                                     //    (3567)
frame_dig -1                                                                                                                                                                                                                                                                     //    (3569)                                                             61      order.max_repay_amount.use(lambda repay_amount: on_chain_data.set(sell_amount, borrow_amount, repay_amount))
pushint 75 // 75                                                                                                                                                                                                                                                                 //    (3571)
extract_uint64                                                                                                                                                                                                                                                                   //    (3573)
frame_bury 4                                                                                                                                                                                                                                                                     //    (3574)
frame_dig 2                                                                                                                                                                                                                                                                      //    (3576)                                                             62      on_chain_data.set(sell_amount, borrow_amount, repay_amount)
itob                                                                                                                                                                                                                                                                             //    (3578)
frame_dig 3                                                                                                                                                                                                                                                                      //    (3579)
itob                                                                                                                                                                                                                                                                             //    (3581)
concat                                                                                                                                                                                                                                                                           //    (3582)
frame_dig 4                                                                                                                                                                                                                                                                      //    (3583)
itob                                                                                                                                                                                                                                                                             //    (3585)
concat                                                                                                                                                                                                                                                                           //    (3586)
frame_bury 1                                                                                                                                                                                                                                                                     //    (3587)
frame_dig 0                                                                                                                                                                                                                                                                      //    (3589)                                                             68      order_id.get()
frame_dig 1                                                                                                                                                                                                                                                                      //    (3591)                                                                     on_chain_data.encode()
box_put                                                                                                                                                                                                                                                                          //    (3593)                                                                     App.box_put(order_id.get(), on_chain_data.encode())
callsub ensurembrfund_1                                                                                                                                                                                                                                                          //    (3594)                                                             70      GlobalStateHandler.ensure_mbr_fund()
retsub                                                                                                                                                                                                                                                                           //    (3597)                                                             42      def add_order(order: OrderData) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       75      def get_order_onchain(order_id: OrderId, *, output: OnChainOrderData) -> Expr:
// get_order_onchain                                                                                                                                                                                                                                                             //
getorderonchain_31:                                                                                                                                                                                                                                                              //
proto 1 1                                                                                                                                                                                                                                                                        //    (3598)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (3601)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_dig -1                                                                                                                                                                                                                                                                     //    (3602)  contracts_unified/core/state_handler/order_handler.py      83      order_id.get()
box_get                                                                                                                                                                                                                                                                          //    (3604)                                                                     App.box_get(order_id.get())
store 15                                                                                                                                                                                                                                                                         //    (3605)
store 14                                                                                                                                                                                                                                                                         //    (3607)
load 15                                                                                                                                                                                                                                                                          //    (3609)                                                             84      result.hasValue()
assert                                                                                                                                                                                                                                                                           //    (3611)                                                                     Assert(result.hasValue())
load 14                                                                                                                                                                                                                                                                          //    (3612)                                                             85      result.value()
frame_bury 0                                                                                                                                                                                                                                                                     //    (3614)                                                                     output.decode(result.value())
retsub                                                                                                                                                                                                                                                                           //    (3616)                                                             75      def get_order_onchain(order_id: OrderId, *, output: OnChainOrderData) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/methods/clean_orders.py             15      def clean_orders(orders: abi.DynamicArray[OrderData]) -> Expr:
// clean_orders                                                                                                                                                                                                                                                                  //
cleanorders_32:                                                                                                                                                                                                                                                                  //
proto 1 0                                                                                                                                                                                                                                                                        //    (3617)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3620)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (3621)  contracts_unified/core/methods/clean_orders.py             15      def clean_orders(orders: abi.DynamicArray[OrderData]) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (3622)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (3623)  contracts_unified/core/methods/clean_orders.py             15      def clean_orders(orders: abi.DynamicArray[OrderData]) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3624)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 2                                                                                                                                                                                                                                                                           //    (3625)  contracts_unified/core/methods/clean_orders.py             15      def clean_orders(orders: abi.DynamicArray[OrderData]) -> Expr:
frame_dig -1                                                                                                                                                                                                                                                                     //    (3627)                                                             33      orders.length()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3629)
extract_uint16                                                                                                                                                                                                                                                                   //    (3630)
frame_bury 4                                                                                                                                                                                                                                                                     //    (3631)
frame_dig 4                                                                                                                                                                                                                                                                      //    (3633)
frame_bury 1                                                                                                                                                                                                                                                                     //    (3635)                                                                     length.set(orders.length())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3637)                                                             34      Int(0)
frame_bury 0                                                                                                                                                                                                                                                                     //    (3638)                                                                     i.set(Int(0))
cleanorders_32_l1:                                                                                                                                                                                                                                                               //                                                                               For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig 0                                                                                                                                                                                                                                                                      //    (3640)                                                                     i.get()
frame_dig 1                                                                                                                                                                                                                                                                      //    (3642)                                                                     length.get()
<                                                                                                                                                                                                                                                                                //    (3644)                                                                     i.get() < length.get()
bz cleanorders_32_l5                                                                                                                                                                                                                                                             //    (3645)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig -1                                                                                                                                                                                                                                                                     //    (3648)                                                             36      order_data.set(orders[i.get()])
pushint 83 // 83                                                                                                                                                                                                                                                                 //    (3650)
frame_dig 0                                                                                                                                                                                                                                                                      //    (3652)                                                                     i.get()
*                                                                                                                                                                                                                                                                                //    (3654)                                                                     order_data.set(orders[i.get()])
pushint 2 // 2                                                                                                                                                                                                                                                                   //    (3655)
+                                                                                                                                                                                                                                                                                //    (3657)
pushint 83 // 83                                                                                                                                                                                                                                                                 //    (3658)
extract3                                                                                                                                                                                                                                                                         //    (3660)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 2                                                                                                                                                                                                                                                                     //    (3661)  contracts_unified/core/methods/clean_orders.py             36      order_data.set(orders[i.get()])
frame_dig 2                                                                                                                                                                                                                                                                      //    (3663)                                                             37      order_data.expiration_time.use(lambda expires: If(Global.latest_timestamp() > expires.get()).Then(order_id.set(cast(abi.ReturnedValue, OrderStateHandler.get_order_id(order_data))), cast(Expr, OrderStateHandler.delete_order_onchain(order_id))))
pushint 41 // 41                                                                                                                                                                                                                                                                 //    (3665)
extract_uint64                                                                                                                                                                                                                                                                   //    (3667)
frame_bury 6                                                                                                                                                                                                                                                                     //    (3668)
global LatestTimestamp                                                                                                                                                                                                                                                           //    (3670)                                                             38      Global.latest_timestamp()
frame_dig 6                                                                                                                                                                                                                                                                      //    (3672)                                                                     expires.get()
>                                                                                                                                                                                                                                                                                //    (3674)                                                                     Global.latest_timestamp() > expires.get()
bnz cleanorders_32_l4                                                                                                                                                                                                                                                            //    (3675)                                                                     If(Global.latest_timestamp() > expires.get())
cleanorders_32_l3:                                                                                                                                                                                                                                                               //                                                                       34      For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
frame_dig 0                                                                                                                                                                                                                                                                      //    (3678)                                                                     i.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (3680)                                                                     Int(1)
+                                                                                                                                                                                                                                                                                //    (3681)                                                                     i.get() + Int(1)
frame_bury 0                                                                                                                                                                                                                                                                     //    (3682)                                                                     i.set(i.get() + Int(1))
b cleanorders_32_l1                                                                                                                                                                                                                                                              //    (3684)                                                                     For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
cleanorders_32_l4:                                                                                                                                                                                                                                                               //                                                                       38      If(Global.latest_timestamp() > expires.get())
frame_dig 2                                                                                                                                                                                                                                                                      //    (3687)  contracts_unified/core/state_handler/order_handler.py      32      def get_order_id(order: OrderData, *, output: OrderId) -> Expr:
callsub getorderid_29                                                                                                                                                                                                                                                            //    (3689)  contracts_unified/core/methods/clean_orders.py             41      OrderStateHandler.get_order_id(order_data)
frame_bury 3                                                                                                                                                                                                                                                                     //    (3692)                                                                     order_id.set(cast(abi.ReturnedValue, OrderStateHandler.get_order_id(order_data)))
frame_dig 3                                                                                                                                                                                                                                                                      //    (3694)  contracts_unified/core/state_handler/order_handler.py      104     order_id.get()
box_del                                                                                                                                                                                                                                                                          //    (3696)                                                                     App.box_delete(order_id.get())
pop                                                                                                                                                                                                                                                                              //    (3697)                                                                     Pop(App.box_delete(order_id.get()))
b cleanorders_32_l3                                                                                                                                                                                                                                                              //    (3698)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
cleanorders_32_l5:                                                                                                                                                                                                                                                               //            contracts_unified/core/methods/clean_orders.py             34      For(i.set(Int(0)), i.get() < length.get(), i.set(i.get() + Int(1)))
retsub                                                                                                                                                                                                                                                                           //    (3701)                                                             15      def clean_orders(orders: abi.DynamicArray[OrderData]) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
// create                                                                                                                                                                                                                                                                        //
create_33:                                                                                                                                                                                                                                                                       //
proto 9 0                                                                                                                                                                                                                                                                        //    (3702)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (3705)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (3706)  contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
frame_dig -1                                                                                                                                                                                                                                                                     //    (3707)                                                             31      opup_budget.get()
callsub setup_27                                                                                                                                                                                                                                                                 //    (3709)                                                                     setup(opup_budget.get())
bytec 12 // "t"                                                                                                                                                                                                                                                                  //    (3712)  contracts_unified/core/state_handler/global_handler.py     28      Bytes('t')
global LatestTimestamp                                                                                                                                                                                                                                                           //    (3714)                                                             64      Global.latest_timestamp()
app_global_put                                                                                                                                                                                                                                                                   //    (3716)                                                                     App.globalPut(KEY_INIT_TIMESTAMP, Global.latest_timestamp())
bytec_1 // "c"                                                                                                                                                                                                                                                                   //    (3717)                                                             29      Bytes('c')
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3718)  contracts_unified/core/methods/create.py                   35      Int(0)
app_global_put                                                                                                                                                                                                                                                                   //    (3719)  contracts_unified/core/state_handler/global_handler.py     76      App.globalPut(KEY_INSTRUMENT_COUNT, instrument_count)
bytec 4 // "p"                                                                                                                                                                                                                                                                   //    (3720)                                                             31      Bytes('p')
frame_dig -9                                                                                                                                                                                                                                                                     //    (3722)  contracts_unified/core/methods/create.py                   36      pricecaster_id.get()
btoi                                                                                                                                                                                                                                                                             //    (3724)  contracts_unified/core/state_handler/global_handler.py     88      Btoi(pricecaster_id)
app_global_put                                                                                                                                                                                                                                                                   //    (3725)                                                                     App.globalPut(KEY_PRICECASTER_ID, Btoi(pricecaster_id))
bytec 7 // "b"                                                                                                                                                                                                                                                                   //    (3726)                                                             32      Bytes('b')
frame_dig -8                                                                                                                                                                                                                                                                     //    (3728)  contracts_unified/core/methods/create.py                   37      wormhole_token_bridge_id.get()
btoi                                                                                                                                                                                                                                                                             //    (3730)  contracts_unified/core/state_handler/global_handler.py     100     Btoi(wormhole_bridge_id)
app_global_put                                                                                                                                                                                                                                                                   //    (3731)                                                                     App.globalPut(KEY_WORMHOLE_BRIDGE_ID, Btoi(wormhole_bridge_id))
frame_dig -7                                                                                                                                                                                                                                                                     //    (3732)  contracts_unified/core/methods/create.py                   38      liquidation_factors.get()
len                                                                                                                                                                                                                                                                              //    (3734)  contracts_unified/core/state_handler/global_handler.py     196     Len(factors)
pushint 4 // 4                                                                                                                                                                                                                                                                   //    (3735)                                                                     Int(factors_size)
==                                                                                                                                                                                                                                                                               //    (3737)                                                                     Len(factors) == Int(factors_size)
assert                                                                                                                                                                                                                                                                           //    (3738)                                                                     Assert(Len(factors) == Int(factors_size))
bytec 8 // "l"                                                                                                                                                                                                                                                                   //    (3739)                                                             33      Bytes('l')
frame_dig -7                                                                                                                                                                                                                                                                     //    (3741)  contracts_unified/core/methods/create.py                   38      liquidation_factors.get()
app_global_put                                                                                                                                                                                                                                                                   //    (3743)  contracts_unified/core/state_handler/global_handler.py     197     App.globalPut(KEY_LIQUIDATION_FACTORS, factors)
bytec 9 // "w"                                                                                                                                                                                                                                                                   //    (3744)                                                             35      Bytes('w')
frame_dig -6                                                                                                                                                                                                                                                                     //    (3746)  contracts_unified/core/methods/create.py                   39      withdraw_buffer_address.get()
callsub setaddress_0                                                                                                                                                                                                                                                             //    (3748)  contracts_unified/core/state_handler/global_handler.py     170     GlobalStateHandler.set_address(KEY_WITHDRAW_BUFFER, withdraw_buffer)
bytec 6 // "s"                                                                                                                                                                                                                                                                   //    (3751)                                                             34      Bytes('s')
frame_dig -5                                                                                                                                                                                                                                                                     //    (3753)  contracts_unified/core/methods/create.py                   40      signature_validator_address.get()
callsub setaddress_0                                                                                                                                                                                                                                                             //    (3755)  contracts_unified/core/state_handler/global_handler.py     122     GlobalStateHandler.set_address(KEY_SIGNATURE_VALIDATOR, signature_validator)
bytec 10 // "o"                                                                                                                                                                                                                                                                  //    (3758)                                                             37      Bytes('o')
frame_dig -4                                                                                                                                                                                                                                                                     //    (3760)  contracts_unified/core/methods/create.py                   41      operator_address.get()
callsub setaddress_0                                                                                                                                                                                                                                                             //    (3762)  contracts_unified/core/state_handler/global_handler.py     134     GlobalStateHandler.set_address(KEY_OPERATOR_ADDRESS, operator_address)
bytec_2 // "q"                                                                                                                                                                                                                                                                   //    (3765)                                                             36      Bytes('q')
frame_dig -3                                                                                                                                                                                                                                                                     //    (3766)  contracts_unified/core/methods/create.py                   42      quant_address.get()
callsub setaddress_0                                                                                                                                                                                                                                                             //    (3768)  contracts_unified/core/state_handler/global_handler.py     146     GlobalStateHandler.set_address(KEY_QUANT_ADDRESS, quant_address)
bytec 5 // "f"                                                                                                                                                                                                                                                                   //    (3771)                                                             38      Bytes('f')
frame_dig -2                                                                                                                                                                                                                                                                     //    (3773)  contracts_unified/core/methods/create.py                   43      fee_target_address.get()
callsub setaddress_0                                                                                                                                                                                                                                                             //    (3775)  contracts_unified/core/state_handler/global_handler.py     158     GlobalStateHandler.set_address(KEY_FEE_TARGET, fee_target_address)
retsub                                                                                                                                                                                                                                                                           //    (3778)  contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/methods/deposit.py                  41      def inner_deposit_asset(account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, amount: Amount, instant_pool_move: Amount) -> Expr:
// inner_deposit_asset                                                                                                                                                                                                                                                           //
innerdepositasset_34:                                                                                                                                                                                                                                                            //
proto 5 0                                                                                                                                                                                                                                                                        //    (3779)
callsub senderissigvalidator_21                                                                                                                                                                                                                                                  //    (3782)                                                             52      sender_is_sig_validator()
frame_dig -4                                                                                                                                                                                                                                                                     //    (3785)                                                             55      payload.get()
pushbytes 0x6465706f736974 // "deposit"                                                                                                                                                                                                                                          //    (3787)                                                                     Bytes('deposit')
==                                                                                                                                                                                                                                                                               //    (3796)                                                                     payload.get() == Bytes('deposit')
assert                                                                                                                                                                                                                                                                           //    (3797)                                                                     Assert(payload.get() == Bytes('deposit'))
frame_dig -2                                                                                                                                                                                                                                                                     //    (3798)                                                             58      amount.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (3800)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (3801)                                                                     value & Int(9223372036854775808)
frame_dig -1                                                                                                                                                                                                                                                                     //    (3802)  contracts_unified/core/methods/deposit.py                  58      instant_pool_move.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (3804)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (3805)                                                                     value & Int(9223372036854775808)
||                                                                                                                                                                                                                                                                               //    (3806)  contracts_unified/core/methods/deposit.py                  58      Or(signed_ltz(amount.get()), signed_ltz(instant_pool_move.get()))
!                                                                                                                                                                                                                                                                                //    (3807)                                                                     Not(Or(signed_ltz(amount.get()), signed_ltz(instant_pool_move.get())))
assert                                                                                                                                                                                                                                                                           //    (3808)                                                                     Assert(Not(Or(signed_ltz(amount.get()), signed_ltz(instant_pool_move.get()))))
frame_dig -5                                                                                                                                                                                                                                                                     //    (3809)  contracts_unified/core/internal/move.py                    34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig -3                                                                                                                                                                                                                                                                     //    (3811)
frame_dig -2                                                                                                                                                                                                                                                                     //    (3813)
callsub signedaddtocash_17                                                                                                                                                                                                                                                       //    (3815)  contracts_unified/core/methods/deposit.py                  61      signed_add_to_cash(account, instrument_id, amount)
frame_dig -1                                                                                                                                                                                                                                                                     //    (3818)                                                             64      instant_pool_move.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3820)                                                                     Int(0)
!=                                                                                                                                                                                                                                                                               //    (3821)                                                                     instant_pool_move.get() != Int(0)
bz innerdepositasset_34_l2                                                                                                                                                                                                                                                       //    (3822)                                                                     If(instant_pool_move.get() != Int(0))
frame_dig -5                                                                                                                                                                                                                                                                     //    (3825)  contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
frame_dig -3                                                                                                                                                                                                                                                                     //    (3827)
frame_dig -1                                                                                                                                                                                                                                                                     //    (3829)
callsub performpoolmove_14                                                                                                                                                                                                                                                       //    (3831)  contracts_unified/core/methods/deposit.py                  66      perform_pool_move(account, instrument_id, instant_pool_move)
innerdepositasset_34_l2:                                                                                                                                                                                                                                                         //                                                                       64      If(instant_pool_move.get() != Int(0))
retsub                                                                                                                                                                                                                                                                           //    (3834)                                                             41      def inner_deposit_asset(account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, amount: Amount, instant_pool_move: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       71      def deposit(account: AccountAddress, deposit_txn: abi.Transaction, payload: DepositWord, instrument_id: InstrumentId, instant_pool_move: Amount, opup_budget: Amount) -> Expr:
// deposit                                                                                                                                                                                                                                                                       //
deposit_35:                                                                                                                                                                                                                                                                      //
proto 6 0                                                                                                                                                                                                                                                                        //    (3835)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3838)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (3839)  contracts_unified/core/methods/deposit.py                  71      def deposit(account: AccountAddress, deposit_txn: abi.Transaction, payload: DepositWord, instrument_id: InstrumentId, instant_pool_move: Amount, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (3840)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3841)
frame_dig -1                                                                                                                                                                                                                                                                     //    (3842)  contracts_unified/core/methods/deposit.py                  98      opup_budget.get()
callsub setup_27                                                                                                                                                                                                                                                                 //    (3844)                                                                     setup(opup_budget.get())
frame_dig -5                                                                                                                                                                                                                                                                     //    (3847)                                                             105     deposit_txn.get()
gtxns RekeyTo                                                                                                                                                                                                                                                                    //    (3849)                                                                     deposit_txn.get().rekey_to()
global ZeroAddress                                                                                                                                                                                                                                                               //    (3851)                                                                     Global.zero_address()
==                                                                                                                                                                                                                                                                               //    (3853)                                                                     deposit_txn.get().rekey_to() == Global.zero_address()
frame_dig -5                                                                                                                                                                                                                                                                     //    (3854)                                                             106     deposit_txn.get()
gtxns AssetCloseTo                                                                                                                                                                                                                                                               //    (3856)                                                                     deposit_txn.get().asset_close_to()
global ZeroAddress                                                                                                                                                                                                                                                               //    (3858)                                                                     Global.zero_address()
==                                                                                                                                                                                                                                                                               //    (3860)                                                                     deposit_txn.get().asset_close_to() == Global.zero_address()
&&                                                                                                                                                                                                                                                                               //    (3861)                                                             102     And(deposit_txn.get().rekey_to() == Global.zero_address(), deposit_txn.get().asset_close_to() == Global.zero_address())
assert                                                                                                                                                                                                                                                                           //    (3862)                                                             101     Assert(And(deposit_txn.get().rekey_to() == Global.zero_address(), deposit_txn.get().asset_close_to() == Global.zero_address()))
frame_dig -5                                                                                                                                                                                                                                                                     //    (3863)                                                             112     deposit_txn.get()
gtxns TypeEnum                                                                                                                                                                                                                                                                   //    (3865)                                                                     deposit_txn.get().type_enum()
pushint 4 // axfer                                                                                                                                                                                                                                                               //    (3867)                                                                     deposit_txn.get().type_enum() == TxnType.AssetTransfer
==                                                                                                                                                                                                                                                                               //    (3869)
bnz deposit_35_l4                                                                                                                                                                                                                                                                //    (3870)
frame_dig -5                                                                                                                                                                                                                                                                     //    (3873)                                                             117     deposit_txn.get()
gtxns TypeEnum                                                                                                                                                                                                                                                                   //    (3875)                                                                     deposit_txn.get().type_enum()
intc_1 // pay                                                                                                                                                                                                                                                                    //    (3877)                                                                     deposit_txn.get().type_enum() == TxnType.Payment
==                                                                                                                                                                                                                                                                               //    (3878)
bnz deposit_35_l3                                                                                                                                                                                                                                                                //    (3879)
err                                                                                                                                                                                                                                                                              //    (3882)                                                             111     Cond([deposit_txn.get().type_enum() == TxnType.AssetTransfer, Seq(Assert(deposit_txn.get().asset_receiver() == Global.current_application_address()), deposit_asset_id.set(deposit_txn.get().xfer_asset()), deposit_amount.set(deposit_txn.get().asset_amount()))], [deposit_txn.get().type_enum() == TxnType.Payment, Seq(Assert(deposit_txn.get().receiver() == Global.current_application_address()), deposit_asset_id.set(Int(0)), deposit_amount.set(deposit_txn.get().amount()))])
deposit_35_l3:                                                                                                                                                                                                                                                                   //                                                                       117     deposit_txn.get().type_enum() == TxnType.Payment
frame_dig -5                                                                                                                                                                                                                                                                     //    (3883)                                                             118     deposit_txn.get()
gtxns Receiver                                                                                                                                                                                                                                                                   //    (3885)                                                                     deposit_txn.get().receiver()
global CurrentApplicationAddress                                                                                                                                                                                                                                                 //    (3887)                                                                     Global.current_application_address()
==                                                                                                                                                                                                                                                                               //    (3889)                                                                     deposit_txn.get().receiver() == Global.current_application_address()
assert                                                                                                                                                                                                                                                                           //    (3890)                                                                     Assert(deposit_txn.get().receiver() == Global.current_application_address())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3891)                                                             119     Int(0)
frame_bury 0                                                                                                                                                                                                                                                                     //    (3892)                                                                     deposit_asset_id.set(Int(0))
frame_dig -5                                                                                                                                                                                                                                                                     //    (3894)                                                             120     deposit_txn.get()
gtxns Amount                                                                                                                                                                                                                                                                     //    (3896)                                                                     deposit_txn.get().amount()
frame_bury 1                                                                                                                                                                                                                                                                     //    (3898)                                                                     deposit_amount.set(deposit_txn.get().amount())
b deposit_35_l5                                                                                                                                                                                                                                                                  //    (3900)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
deposit_35_l4:                                                                                                                                                                                                                                                                   //            contracts_unified/core/methods/deposit.py                  112     deposit_txn.get().type_enum() == TxnType.AssetTransfer
frame_dig -5                                                                                                                                                                                                                                                                     //    (3903)                                                             113     deposit_txn.get()
gtxns AssetReceiver                                                                                                                                                                                                                                                              //    (3905)                                                                     deposit_txn.get().asset_receiver()
global CurrentApplicationAddress                                                                                                                                                                                                                                                 //    (3907)                                                                     Global.current_application_address()
==                                                                                                                                                                                                                                                                               //    (3909)                                                                     deposit_txn.get().asset_receiver() == Global.current_application_address()
assert                                                                                                                                                                                                                                                                           //    (3910)                                                                     Assert(deposit_txn.get().asset_receiver() == Global.current_application_address())
frame_dig -5                                                                                                                                                                                                                                                                     //    (3911)                                                             114     deposit_txn.get()
gtxns XferAsset                                                                                                                                                                                                                                                                  //    (3913)                                                                     deposit_txn.get().xfer_asset()
frame_bury 0                                                                                                                                                                                                                                                                     //    (3915)                                                                     deposit_asset_id.set(deposit_txn.get().xfer_asset())
frame_dig -5                                                                                                                                                                                                                                                                     //    (3917)                                                             115     deposit_txn.get()
gtxns AssetAmount                                                                                                                                                                                                                                                                //    (3919)                                                                     deposit_txn.get().asset_amount()
frame_bury 1                                                                                                                                                                                                                                                                     //    (3921)                                                                     deposit_amount.set(deposit_txn.get().asset_amount())
deposit_35_l5:                                                                                                                                                                                                                                                                   //                                                                       112     deposit_txn.get().type_enum() == TxnType.AssetTransfer
frame_dig -3                                                                                                                                                                                                                                                                     //    (3923)  contracts_unified/core/state_handler/global_handler.py     202     def get_instrument(instrument_id: InstrumentId, *, output: InstrumentListElement) -> Expr:
callsub getinstrument_2                                                                                                                                                                                                                                                          //    (3925)  contracts_unified/core/methods/deposit.py                  125     GlobalStateHandler.get_instrument(instrument_id)
frame_bury 2                                                                                                                                                                                                                                                                     //    (3928)                                                                     element.set(cast(abi.ReturnedValue, GlobalStateHandler.get_instrument(instrument_id)))
frame_dig 2                                                                                                                                                                                                                                                                      //    (3930)                                                             126     element.asset_id.use(lambda asset_id: Assert(deposit_asset_id.get() == asset_id.get()))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3932)
extract_uint64                                                                                                                                                                                                                                                                   //    (3933)
frame_bury 3                                                                                                                                                                                                                                                                     //    (3934)
frame_dig 0                                                                                                                                                                                                                                                                      //    (3936)                                                                     deposit_asset_id.get()
frame_dig 3                                                                                                                                                                                                                                                                      //    (3938)                                                                     asset_id.get()
==                                                                                                                                                                                                                                                                               //    (3940)                                                                     deposit_asset_id.get() == asset_id.get()
assert                                                                                                                                                                                                                                                                           //    (3941)                                                                     Assert(deposit_asset_id.get() == asset_id.get())
frame_dig -6                                                                                                                                                                                                                                                                     //    (3942)                                                             41      def inner_deposit_asset(account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, amount: Amount, instant_pool_move: Amount) -> Expr:
frame_dig -4                                                                                                                                                                                                                                                                     //    (3944)
frame_dig -3                                                                                                                                                                                                                                                                     //    (3946)
frame_dig 1                                                                                                                                                                                                                                                                      //    (3948)
frame_dig -2                                                                                                                                                                                                                                                                     //    (3950)
callsub innerdepositasset_34                                                                                                                                                                                                                                                     //    (3952)                                                             129     inner_deposit_asset(account, payload, instrument_id, deposit_amount, instant_pool_move)
retsub                                                                                                                                                                                                                                                                           //    (3955)                                                             71      def deposit(account: AccountAddress, deposit_txn: abi.Transaction, payload: DepositWord, instrument_id: InstrumentId, instant_pool_move: Amount, opup_budget: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/methods/fund_mbr.py                 11      def fund_mbr(payment_txn: abi.PaymentTransaction) -> Expr:
// fund_mbr                                                                                                                                                                                                                                                                      //
fundmbr_36:                                                                                                                                                                                                                                                                      //
proto 1 0                                                                                                                                                                                                                                                                        //    (3956)
frame_dig -1                                                                                                                                                                                                                                                                     //    (3959)                                                             21      payment_txn.get()
gtxns Receiver                                                                                                                                                                                                                                                                   //    (3961)                                                                     payment_txn.get().receiver()
global CurrentApplicationAddress                                                                                                                                                                                                                                                 //    (3963)                                                                     Global.current_application_address()
==                                                                                                                                                                                                                                                                               //    (3965)                                                                     payment_txn.get().receiver() == Global.current_application_address()
assert                                                                                                                                                                                                                                                                           //    (3966)                                                                     Assert(payment_txn.get().receiver() == Global.current_application_address())
bytec 11 // "m"                                                                                                                                                                                                                                                                  //    (3967)  contracts_unified/core/state_handler/global_handler.py     30      Bytes('m')
bytec 11 // "m"                                                                                                                                                                                                                                                                  //    (3969)
app_global_get                                                                                                                                                                                                                                                                   //    (3971)                                                             183     App.globalGet(KEY_MBR_FUND)
frame_dig -1                                                                                                                                                                                                                                                                     //    (3972)  contracts_unified/core/methods/fund_mbr.py                 22      payment_txn.get()
gtxns Amount                                                                                                                                                                                                                                                                     //    (3974)                                                                     payment_txn.get().amount()
+                                                                                                                                                                                                                                                                                //    (3976)  contracts_unified/core/state_handler/global_handler.py     183     App.globalGet(KEY_MBR_FUND) + mbr_fund
app_global_put                                                                                                                                                                                                                                                                   //    (3977)                                                                     App.globalPut(KEY_MBR_FUND, App.globalGet(KEY_MBR_FUND) + mbr_fund)
retsub                                                                                                                                                                                                                                                                           //    (3978)  contracts_unified/core/methods/fund_mbr.py                 11      def fund_mbr(payment_txn: abi.PaymentTransaction) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/methods/liquidate.py                41      def perform_netting(liquidatee: AccountAddress, liquidator: AccountAddress) -> Expr:
// perform_netting                                                                                                                                                                                                                                                               //
performnetting_37:                                                                                                                                                                                                                                                               //
proto 2 0                                                                                                                                                                                                                                                                        //    (3979)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3982)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 2                                                                                                                                                                                                                                                                           //    (3983)  contracts_unified/core/methods/liquidate.py                41      def perform_netting(liquidatee: AccountAddress, liquidator: AccountAddress) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (3985)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3986)
dupn 2                                                                                                                                                                                                                                                                           //    (3987)  contracts_unified/core/methods/liquidate.py                41      def perform_netting(liquidatee: AccountAddress, liquidator: AccountAddress) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3989)                                                             59      Int(0)
frame_bury 6                                                                                                                                                                                                                                                                     //    (3990)                                                                     abi_zero_int.set(Int(0))
frame_dig -2                                                                                                                                                                                                                                                                     //    (3992)  contracts_unified/core/state_handler/local_handler.py      67      def get_user_instrument_count(account: AccountAddress, *, output: abi.Uint64) -> Expr:
callsub getuserinstrumentcount_4                                                                                                                                                                                                                                                 //    (3994)  contracts_unified/core/methods/liquidate.py                61      LocalStateHandler.get_user_instrument_count(liquidatee)
frame_bury 0                                                                                                                                                                                                                                                                     //    (3997)                                                                     count.set(LocalStateHandler.get_user_instrument_count(liquidatee))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (3999)                                                             62      Int(0)
frame_bury 1                                                                                                                                                                                                                                                                     //    (4000)                                                                     i.set(Int(0))
frame_dig 1                                                                                                                                                                                                                                                                      //    (4002)
intc 5 // 256                                                                                                                                                                                                                                                                    //    (4004)
<                                                                                                                                                                                                                                                                                //    (4006)
assert                                                                                                                                                                                                                                                                           //    (4007)
performnetting_37_l1:                                                                                                                                                                                                                                                            //                                                                               For(i.set(Int(0)), i.get() < count.get(), i.set(i.get() + Int(1)))
frame_dig 1                                                                                                                                                                                                                                                                      //    (4008)                                                                     i.get()
frame_dig 0                                                                                                                                                                                                                                                                      //    (4010)                                                                     count.get()
<                                                                                                                                                                                                                                                                                //    (4012)                                                                     i.get() < count.get()
bz performnetting_37_l8                                                                                                                                                                                                                                                          //    (4013)                                                                     For(i.set(Int(0)), i.get() < count.get(), i.set(i.get() + Int(1)))
frame_dig -2                                                                                                                                                                                                                                                                     //    (4016)  contracts_unified/core/state_handler/local_handler.py      39      def get_position(account: AccountAddress, instrument_id: InstrumentId, *, output: UserInstrumentData) -> Expr:
frame_dig 1                                                                                                                                                                                                                                                                      //    (4018)
callsub getposition_3                                                                                                                                                                                                                                                            //    (4020)  contracts_unified/core/methods/liquidate.py                64      LocalStateHandler.get_position(liquidatee, i)
frame_bury 3                                                                                                                                                                                                                                                                     //    (4023)                                                                     pool_data.set(cast(abi.ReturnedValue, LocalStateHandler.get_position(liquidatee, i)))
frame_dig 3                                                                                                                                                                                                                                                                      //    (4025)                                                             65      cash_amount.set(pool_data.cash)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4027)
extract_uint64                                                                                                                                                                                                                                                                   //    (4028)
frame_bury 2                                                                                                                                                                                                                                                                     //    (4029)
frame_dig 3                                                                                                                                                                                                                                                                      //    (4031)                                                             66      pool_amount.set(pool_data.principal)
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (4033)
extract_uint64                                                                                                                                                                                                                                                                   //    (4035)
frame_bury 4                                                                                                                                                                                                                                                                     //    (4036)
frame_dig 4                                                                                                                                                                                                                                                                      //    (4038)                                                             69      pool_amount.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4040)                                                                     Int(0)
!=                                                                                                                                                                                                                                                                               //    (4041)                                                                     pool_amount.get() != Int(0)
bnz performnetting_37_l4                                                                                                                                                                                                                                                         //    (4042)                                                                     If(pool_amount.get() != Int(0))
performnetting_37_l3:                                                                                                                                                                                                                                                            //                                                                       62      For(i.set(Int(0)), i.get() < count.get(), i.set(i.get() + Int(1)))
frame_dig 1                                                                                                                                                                                                                                                                      //    (4045)                                                                     i.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (4047)                                                                     Int(1)
+                                                                                                                                                                                                                                                                                //    (4048)                                                                     i.get() + Int(1)
frame_bury 1                                                                                                                                                                                                                                                                     //    (4049)                                                                     i.set(i.get() + Int(1))
frame_dig 1                                                                                                                                                                                                                                                                      //    (4051)
intc 5 // 256                                                                                                                                                                                                                                                                    //    (4053)
<                                                                                                                                                                                                                                                                                //    (4055)
assert                                                                                                                                                                                                                                                                           //    (4056)
b performnetting_37_l1                                                                                                                                                                                                                                                           //    (4057)                                                                     For(i.set(Int(0)), i.get() < count.get(), i.set(i.get() + Int(1)))
performnetting_37_l4:                                                                                                                                                                                                                                                            //                                                                       72      If(signed_ltz(pool_amount.get()))
frame_dig 4                                                                                                                                                                                                                                                                      //    (4060)                                                                     pool_amount.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (4062)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (4063)                                                                     value & Int(9223372036854775808)
bnz performnetting_37_l7                                                                                                                                                                                                                                                         //    (4064)  contracts_unified/core/methods/liquidate.py                72      If(signed_ltz(pool_amount.get()))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4067)                                                             77      Int(0)
frame_bury 5                                                                                                                                                                                                                                                                     //    (4068)                                                                     repay_amount.set(Int(0))
performnetting_37_l6:                                                                                                                                                                                                                                                            //                                                                       72      If(signed_ltz(pool_amount.get()))
frame_dig -2                                                                                                                                                                                                                                                                     //    (4070)  contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
frame_dig 1                                                                                                                                                                                                                                                                      //    (4072)
frame_dig 5                                                                                                                                                                                                                                                                      //    (4074)
callsub performpoolmove_14                                                                                                                                                                                                                                                       //    (4076)  contracts_unified/core/methods/liquidate.py                81      perform_pool_move(liquidatee, i, repay_amount)
frame_dig -1                                                                                                                                                                                                                                                                     //    (4079)  contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
frame_dig 1                                                                                                                                                                                                                                                                      //    (4081)
frame_dig 6                                                                                                                                                                                                                                                                      //    (4083)
callsub performpoolmove_14                                                                                                                                                                                                                                                       //    (4085)  contracts_unified/core/methods/liquidate.py                82      perform_pool_move(liquidator, i, abi_zero_int)
b performnetting_37_l3                                                                                                                                                                                                                                                           //    (4088)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
performnetting_37_l7:                                                                                                                                                                                                                                                            //            contracts_unified/core/methods/liquidate.py                72      If(signed_ltz(pool_amount.get()))
frame_dig 2                                                                                                                                                                                                                                                                      //    (4091)                                                             75      cash_amount.get()
frame_dig 4                                                                                                                                                                                                                                                                      //    (4093)                                                                     pool_amount.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (4095)                                                                     signed_neg(pool_amount.get())
callsub unsignedmin_5                                                                                                                                                                                                                                                            //    (4098)                                                                     unsigned_min(cash_amount.get(), signed_neg(pool_amount.get()))
frame_bury 5                                                                                                                                                                                                                                                                     //    (4101)                                                                     repay_amount.set(unsigned_min(cash_amount.get(), signed_neg(pool_amount.get())))
b performnetting_37_l6                                                                                                                                                                                                                                                           //    (4103)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
performnetting_37_l8:                                                                                                                                                                                                                                                            //            contracts_unified/core/methods/liquidate.py                62      For(i.set(Int(0)), i.get() < count.get(), i.set(i.get() + Int(1)))
retsub                                                                                                                                                                                                                                                                           //    (4106)                                                             41      def perform_netting(liquidatee: AccountAddress, liquidator: AccountAddress) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
// liquidate                                                                                                                                                                                                                                                                     //
liquidate_38:                                                                                                                                                                                                                                                                    //
proto 5 0                                                                                                                                                                                                                                                                        //    (4107)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4110)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 2                                                                                                                                                                                                                                                                           //    (4111)  contracts_unified/core/methods/liquidate.py                89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4113)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 3                                                                                                                                                                                                                                                                           //    (4114)  contracts_unified/core/methods/liquidate.py                89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4116)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4117)
dupn 3                                                                                                                                                                                                                                                                           //    (4118)  contracts_unified/core/methods/liquidate.py                89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4120)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4121)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4122)
dupn 6                                                                                                                                                                                                                                                                           //    (4123)  contracts_unified/core/methods/liquidate.py                89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4125)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4126)
frame_dig -1                                                                                                                                                                                                                                                                     //    (4127)  contracts_unified/core/methods/liquidate.py                126     opup_budget.get()
callsub setup_27                                                                                                                                                                                                                                                                 //    (4129)                                                                     setup(opup_budget.get())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4132)                                                             129     Int(0)
!                                                                                                                                                                                                                                                                                //    (4133)                                                                     abi_false.set(Int(0))
!                                                                                                                                                                                                                                                                                //    (4134)
frame_bury 0                                                                                                                                                                                                                                                                     //    (4135)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (4137)                                                             130     Int(1)
!                                                                                                                                                                                                                                                                                //    (4138)                                                                     abi_true.set(Int(1))
!                                                                                                                                                                                                                                                                                //    (4139)
frame_bury 1                                                                                                                                                                                                                                                                     //    (4140)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4142)                                                             131     Int(0)
frame_bury 2                                                                                                                                                                                                                                                                     //    (4143)                                                                     abi_zero.set(Int(0))
frame_dig 2                                                                                                                                                                                                                                                                      //    (4145)
intc 6 // 65536                                                                                                                                                                                                                                                                  //    (4147)
<                                                                                                                                                                                                                                                                                //    (4149)
assert                                                                                                                                                                                                                                                                           //    (4150)
callsub senderissigvalidator_21                                                                                                                                                                                                                                                  //    (4151)                                                             134     sender_is_sig_validator()
frame_dig -4                                                                                                                                                                                                                                                                     //    (4154)                                                             137     user_op.operation.use(lambda op_data: Seq(data.decode(op_data.get()), data.operation.use(lambda op: Assert(op.get() == OperationId.Liquidate)), data.liquidatee.store_into(liquidatee_account), data.cash.store_into(cash), data.pool.store_into(pool)))
frame_dig -4                                                                                                                                                                                                                                                                     //    (4156)
pushint 72 // 72                                                                                                                                                                                                                                                                 //    (4158)
extract_uint16                                                                                                                                                                                                                                                                   //    (4160)
frame_dig -4                                                                                                                                                                                                                                                                     //    (4161)
pushint 74 // 74                                                                                                                                                                                                                                                                 //    (4163)
extract_uint16                                                                                                                                                                                                                                                                   //    (4165)
substring3                                                                                                                                                                                                                                                                       //    (4166)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 21                                                                                                                                                                                                                                                                    //    (4167)  contracts_unified/core/methods/liquidate.py                137     user_op.operation.use(lambda op_data: Seq(data.decode(op_data.get()), data.operation.use(lambda op: Assert(op.get() == OperationId.Liquidate)), data.liquidatee.store_into(liquidatee_account), data.cash.store_into(cash), data.pool.store_into(pool)))
frame_dig 21                                                                                                                                                                                                                                                                     //    (4169)                                                             139     op_data.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (4171)
frame_bury 5                                                                                                                                                                                                                                                                     //    (4174)                                                                     data.decode(op_data.get())
frame_dig 5                                                                                                                                                                                                                                                                      //    (4176)                                                             140     data.operation.use(lambda op: Assert(op.get() == OperationId.Liquidate))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4178)
getbyte                                                                                                                                                                                                                                                                          //    (4179)
frame_bury 22                                                                                                                                                                                                                                                                    //    (4180)
frame_dig 22                                                                                                                                                                                                                                                                     //    (4182)                                                                     op.get()
pushint 4 // 4                                                                                                                                                                                                                                                                   //    (4184)  contracts_unified/library/c3types_user.py                  27      Int(4)
==                                                                                                                                                                                                                                                                               //    (4186)  contracts_unified/core/methods/liquidate.py                140     op.get() == OperationId.Liquidate
assert                                                                                                                                                                                                                                                                           //    (4187)                                                                     Assert(op.get() == OperationId.Liquidate)
frame_dig 5                                                                                                                                                                                                                                                                      //    (4188)                                                             141     data.liquidatee.store_into(liquidatee_account)
extract 1 32                                                                                                                                                                                                                                                                     //    (4190)
frame_bury 6                                                                                                                                                                                                                                                                     //    (4193)
frame_dig 5                                                                                                                                                                                                                                                                      //    (4195)                                                             142     data.cash.store_into(cash)
frame_dig 5                                                                                                                                                                                                                                                                      //    (4197)
pushint 33 // 33                                                                                                                                                                                                                                                                 //    (4199)
extract_uint16                                                                                                                                                                                                                                                                   //    (4201)
frame_dig 5                                                                                                                                                                                                                                                                      //    (4202)
pushint 35 // 35                                                                                                                                                                                                                                                                 //    (4204)
extract_uint16                                                                                                                                                                                                                                                                   //    (4206)
substring3                                                                                                                                                                                                                                                                       //    (4207)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 9                                                                                                                                                                                                                                                                     //    (4208)  contracts_unified/core/methods/liquidate.py                142     data.cash.store_into(cash)
frame_dig 5                                                                                                                                                                                                                                                                      //    (4210)                                                             143     data.pool.store_into(pool)
frame_dig 5                                                                                                                                                                                                                                                                      //    (4212)
pushint 35 // 35                                                                                                                                                                                                                                                                 //    (4214)
extract_uint16                                                                                                                                                                                                                                                                   //    (4216)
dig 1                                                                                                                                                                                                                                                                            //    (4217)
len                                                                                                                                                                                                                                                                              //    (4219)
substring3                                                                                                                                                                                                                                                                       //    (4220)
frame_bury 11                                                                                                                                                                                                                                                                    //    (4221)
frame_dig 6                                                                                                                                                                                                                                                                      //    (4223)                                                             148     liquidatee_account.get()
frame_dig -5                                                                                                                                                                                                                                                                     //    (4225)                                                                     liquidator_account.get()
!=                                                                                                                                                                                                                                                                               //    (4227)                                                                     liquidatee_account.get() != liquidator_account.get()
assert                                                                                                                                                                                                                                                                           //    (4228)                                                                     Assert(liquidatee_account.get() != liquidator_account.get())
frame_dig 6                                                                                                                                                                                                                                                                      //    (4229)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
frame_dig 1                                                                                                                                                                                                                                                                      //    (4231)
callsub healthcheck_16                                                                                                                                                                                                                                                           //    (4233)  contracts_unified/core/methods/liquidate.py                151     health_check(liquidatee_account, abi_true)
frame_bury 7                                                                                                                                                                                                                                                                     //    (4236)                                                                     liquidatee_maint_health.set(health_check(liquidatee_account, abi_true))
frame_dig 7                                                                                                                                                                                                                                                                      //    (4238)                                                             152     liquidatee_maint_health.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (4240)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (4241)                                                                     value & Int(9223372036854775808)
assert                                                                                                                                                                                                                                                                           //    (4242)  contracts_unified/core/methods/liquidate.py                152     Assert(signed_ltz(liquidatee_maint_health.get()))
frame_dig 6                                                                                                                                                                                                                                                                      //    (4243)                                                             41      def perform_netting(liquidatee: AccountAddress, liquidator: AccountAddress) -> Expr:
frame_dig -5                                                                                                                                                                                                                                                                     //    (4245)
callsub performnetting_37                                                                                                                                                                                                                                                        //    (4247)                                                             155     perform_netting(liquidatee_account, liquidator_account)
bytec 8 // "l"                                                                                                                                                                                                                                                                   //    (4250)  contracts_unified/core/state_handler/global_handler.py     33      Bytes('l')
app_global_get                                                                                                                                                                                                                                                                   //    (4252)                                                             189     App.globalGet(KEY_LIQUIDATION_FACTORS)
frame_bury 13                                                                                                                                                                                                                                                                    //    (4253)  contracts_unified/core/methods/liquidate.py                158     factors.decode(GlobalStateHandler.get_liquidation_factors())
frame_dig 13                                                                                                                                                                                                                                                                     //    (4255)                                                             159     cash_factor.set(factors.cash_liquidation_factor)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4257)
extract_uint16                                                                                                                                                                                                                                                                   //    (4258)
frame_bury 14                                                                                                                                                                                                                                                                    //    (4259)
frame_dig 13                                                                                                                                                                                                                                                                     //    (4261)                                                             160     pool_factor.set(factors.pool_liquidation_factor)
pushint 2 // 2                                                                                                                                                                                                                                                                   //    (4263)
extract_uint16                                                                                                                                                                                                                                                                   //    (4265)
frame_bury 15                                                                                                                                                                                                                                                                    //    (4266)
frame_dig 6                                                                                                                                                                                                                                                                      //    (4268)  contracts_unified/core/internal/liquidation_calculator.py  204     def closer_to_zero(account: AccountAddress, pool_basket: SignedInstrumentBasket) -> Expr:
frame_dig 11                                                                                                                                                                                                                                                                     //    (4270)
callsub closertozero_26                                                                                                                                                                                                                                                          //    (4272)  contracts_unified/core/methods/liquidate.py                163     closer_to_zero(liquidatee_account, pool)
frame_dig 9                                                                                                                                                                                                                                                                      //    (4275)  contracts_unified/core/internal/liquidation_calculator.py  50      def calculate_basket_value(cash_basket: SignedInstrumentBasket, add_negatives: abi.Bool, factor: Ratio, use_bonus: abi.Bool, invert_bonus_or_use_margin: abi.Bool, use_opt_utilization: abi.Bool, *, output: Price) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (4277)
frame_dig 14                                                                                                                                                                                                                                                                     //    (4279)
frame_dig 1                                                                                                                                                                                                                                                                      //    (4281)
frame_dig 1                                                                                                                                                                                                                                                                      //    (4283)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4285)
callsub calculatebasketvalue_24                                                                                                                                                                                                                                                  //    (4287)  contracts_unified/core/methods/liquidate.py                168     calculate_basket_value(cash, abi_false, cash_factor, abi_true, abi_true, abi_false)
frame_bury 16                                                                                                                                                                                                                                                                    //    (4290)                                                                     cash_take_value.set(calculate_basket_value(cash, abi_false, cash_factor, abi_true, abi_true, abi_false))
frame_dig 11                                                                                                                                                                                                                                                                     //    (4292)  contracts_unified/core/internal/liquidation_calculator.py  50      def calculate_basket_value(cash_basket: SignedInstrumentBasket, add_negatives: abi.Bool, factor: Ratio, use_bonus: abi.Bool, invert_bonus_or_use_margin: abi.Bool, use_opt_utilization: abi.Bool, *, output: Price) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (4294)
frame_dig 15                                                                                                                                                                                                                                                                     //    (4296)
frame_dig 1                                                                                                                                                                                                                                                                      //    (4298)
frame_dig 1                                                                                                                                                                                                                                                                      //    (4300)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4302)
callsub calculatebasketvalue_24                                                                                                                                                                                                                                                  //    (4304)  contracts_unified/core/methods/liquidate.py                169     calculate_basket_value(pool, abi_false, pool_factor, abi_true, abi_true, abi_false)
frame_bury 17                                                                                                                                                                                                                                                                    //    (4307)                                                                     pool_take_value.set(calculate_basket_value(pool, abi_false, pool_factor, abi_true, abi_true, abi_false))
frame_dig 11                                                                                                                                                                                                                                                                     //    (4309)  contracts_unified/core/internal/liquidation_calculator.py  50      def calculate_basket_value(cash_basket: SignedInstrumentBasket, add_negatives: abi.Bool, factor: Ratio, use_bonus: abi.Bool, invert_bonus_or_use_margin: abi.Bool, use_opt_utilization: abi.Bool, *, output: Price) -> Expr:
frame_dig 1                                                                                                                                                                                                                                                                      //    (4311)
frame_dig 14                                                                                                                                                                                                                                                                     //    (4313)
frame_dig 1                                                                                                                                                                                                                                                                      //    (4315)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4317)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4319)
callsub calculatebasketvalue_24                                                                                                                                                                                                                                                  //    (4321)  contracts_unified/core/methods/liquidate.py                170     calculate_basket_value(pool, abi_true, cash_factor, abi_true, abi_false, abi_false)
frame_bury 18                                                                                                                                                                                                                                                                    //    (4324)                                                                     pool_give_value.set(calculate_basket_value(pool, abi_true, cash_factor, abi_true, abi_false, abi_false))
frame_dig 16                                                                                                                                                                                                                                                                     //    (4326)                                                             173     cash_take_value.get()
frame_dig 17                                                                                                                                                                                                                                                                     //    (4328)                                                                     pool_take_value.get()
+                                                                                                                                                                                                                                                                                //    (4330)                                                                     cash_take_value.get() + pool_take_value.get()
frame_dig 18                                                                                                                                                                                                                                                                     //    (4331)                                                                     pool_give_value.get()
<=                                                                                                                                                                                                                                                                               //    (4333)                                                                     cash_take_value.get() + pool_take_value.get() <= pool_give_value.get()
assert                                                                                                                                                                                                                                                                           //    (4334)                                                                     Assert(cash_take_value.get() + pool_take_value.get() <= pool_give_value.get())
frame_dig 6                                                                                                                                                                                                                                                                      //    (4335)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (4337)
callsub healthcheck_16                                                                                                                                                                                                                                                           //    (4339)  contracts_unified/core/methods/liquidate.py                179     health_check(liquidatee_account, abi_false)
frame_bury 19                                                                                                                                                                                                                                                                    //    (4342)                                                                     alpha_numerator.set(health_check(liquidatee_account, abi_false))
frame_dig 9                                                                                                                                                                                                                                                                      //    (4344)  contracts_unified/core/internal/liquidation_calculator.py  50      def calculate_basket_value(cash_basket: SignedInstrumentBasket, add_negatives: abi.Bool, factor: Ratio, use_bonus: abi.Bool, invert_bonus_or_use_margin: abi.Bool, use_opt_utilization: abi.Bool, *, output: Price) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (4346)
frame_dig 2                                                                                                                                                                                                                                                                      //    (4348)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4350)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4352)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4354)
callsub calculatebasketvalue_24                                                                                                                                                                                                                                                  //    (4356)  contracts_unified/core/methods/liquidate.py                180     calculate_basket_value(cash, abi_false, abi_zero, abi_false, abi_false, abi_false)
frame_bury 16                                                                                                                                                                                                                                                                    //    (4359)                                                                     cash_take_value.set(calculate_basket_value(cash, abi_false, abi_zero, abi_false, abi_false, abi_false))
frame_dig 11                                                                                                                                                                                                                                                                     //    (4361)  contracts_unified/core/internal/liquidation_calculator.py  50      def calculate_basket_value(cash_basket: SignedInstrumentBasket, add_negatives: abi.Bool, factor: Ratio, use_bonus: abi.Bool, invert_bonus_or_use_margin: abi.Bool, use_opt_utilization: abi.Bool, *, output: Price) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (4363)
frame_dig 2                                                                                                                                                                                                                                                                      //    (4365)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4367)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4369)
frame_dig 1                                                                                                                                                                                                                                                                      //    (4371)
callsub calculatebasketvalue_24                                                                                                                                                                                                                                                  //    (4373)  contracts_unified/core/methods/liquidate.py                181     calculate_basket_value(pool, abi_false, abi_zero, abi_false, abi_false, abi_true)
frame_bury 17                                                                                                                                                                                                                                                                    //    (4376)                                                                     pool_take_value.set(calculate_basket_value(pool, abi_false, abi_zero, abi_false, abi_false, abi_true))
frame_dig 11                                                                                                                                                                                                                                                                     //    (4378)  contracts_unified/core/internal/liquidation_calculator.py  50      def calculate_basket_value(cash_basket: SignedInstrumentBasket, add_negatives: abi.Bool, factor: Ratio, use_bonus: abi.Bool, invert_bonus_or_use_margin: abi.Bool, use_opt_utilization: abi.Bool, *, output: Price) -> Expr:
frame_dig 1                                                                                                                                                                                                                                                                      //    (4380)
frame_dig 2                                                                                                                                                                                                                                                                      //    (4382)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4384)
frame_dig 1                                                                                                                                                                                                                                                                      //    (4386)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4388)
callsub calculatebasketvalue_24                                                                                                                                                                                                                                                  //    (4390)  contracts_unified/core/methods/liquidate.py                182     calculate_basket_value(pool, abi_true, abi_zero, abi_false, abi_true, abi_false)
frame_bury 18                                                                                                                                                                                                                                                                    //    (4393)                                                                     pool_give_value.set(calculate_basket_value(pool, abi_true, abi_zero, abi_false, abi_true, abi_false))
frame_dig 18                                                                                                                                                                                                                                                                     //    (4395)                                                             183     pool_give_value.get()
frame_dig 16                                                                                                                                                                                                                                                                     //    (4397)                                                                     cash_take_value.get()
frame_dig 17                                                                                                                                                                                                                                                                     //    (4399)                                                                     pool_take_value.get()
+                                                                                                                                                                                                                                                                                //    (4401)                                                                     cash_take_value.get() + pool_take_value.get()
-                                                                                                                                                                                                                                                                                //    (4402)                                                                     pool_give_value.get() - (cash_take_value.get() + pool_take_value.get())
frame_bury 20                                                                                                                                                                                                                                                                    //    (4403)                                                                     alpha_denominator.set(pool_give_value.get() - (cash_take_value.get() + pool_take_value.get()))
frame_dig 19                                                                                                                                                                                                                                                                     //    (4405)                                                             186     alpha_numerator.get()
callsub signedabs_8                                                                                                                                                                                                                                                              //    (4407)                                                                     signed_abs(alpha_numerator.get())
frame_bury 19                                                                                                                                                                                                                                                                    //    (4410)                                                                     alpha_numerator.set(signed_abs(alpha_numerator.get()))
frame_dig 19                                                                                                                                                                                                                                                                     //    (4412)                                                             188     alpha_numerator.get()
frame_dig 20                                                                                                                                                                                                                                                                     //    (4414)                                                                     alpha_denominator.get()
>                                                                                                                                                                                                                                                                                //    (4416)                                                                     alpha_numerator.get() > alpha_denominator.get()
bz liquidate_38_l2                                                                                                                                                                                                                                                               //    (4417)                                                                     If(alpha_numerator.get() > alpha_denominator.get())
frame_dig 20                                                                                                                                                                                                                                                                     //    (4420)                                                             189     alpha_denominator.get()
frame_bury 19                                                                                                                                                                                                                                                                    //    (4422)                                                                     alpha_numerator.set(alpha_denominator.get())
liquidate_38_l2:                                                                                                                                                                                                                                                                 //                                                                       188     If(alpha_numerator.get() > alpha_denominator.get())
frame_dig 9                                                                                                                                                                                                                                                                      //    (4424)  contracts_unified/core/internal/liquidation_calculator.py  159     def scale_basket(basket: SignedInstrumentBasket, numerator: abi.Uint64, denominator: abi.Uint64, *, output: SignedInstrumentBasket) -> Expr:
frame_dig 19                                                                                                                                                                                                                                                                     //    (4426)
frame_dig 20                                                                                                                                                                                                                                                                     //    (4428)
callsub scalebasket_25                                                                                                                                                                                                                                                           //    (4430)  contracts_unified/core/methods/liquidate.py                192     scale_basket(cash, alpha_numerator, alpha_denominator)
frame_bury 9                                                                                                                                                                                                                                                                     //    (4433)                                                                     cash.set(cast(abi.ReturnedValue, scale_basket(cash, alpha_numerator, alpha_denominator)))
frame_dig 11                                                                                                                                                                                                                                                                     //    (4435)  contracts_unified/core/internal/liquidation_calculator.py  159     def scale_basket(basket: SignedInstrumentBasket, numerator: abi.Uint64, denominator: abi.Uint64, *, output: SignedInstrumentBasket) -> Expr:
frame_dig 19                                                                                                                                                                                                                                                                     //    (4437)
frame_dig 20                                                                                                                                                                                                                                                                     //    (4439)
callsub scalebasket_25                                                                                                                                                                                                                                                           //    (4441)  contracts_unified/core/methods/liquidate.py                193     scale_basket(pool, alpha_numerator, alpha_denominator)
frame_bury 11                                                                                                                                                                                                                                                                    //    (4444)                                                                     pool.set(cast(abi.ReturnedValue, scale_basket(pool, alpha_numerator, alpha_denominator)))
frame_dig 6                                                                                                                                                                                                                                                                      //    (4446)  contracts_unified/core/internal/move.py                    158     def signed_account_move_baskets(source_account: AccountAddress, destination_account: AccountAddress, cash_basket: SignedInstrumentBasket, pool_basket: SignedInstrumentBasket, allow_negative_assets: abi.Bool, allow_negative_liabilities: abi.Bool) -> Expr:
frame_dig -5                                                                                                                                                                                                                                                                     //    (4448)
frame_dig 9                                                                                                                                                                                                                                                                      //    (4450)
frame_dig 11                                                                                                                                                                                                                                                                     //    (4452)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4454)
frame_dig 1                                                                                                                                                                                                                                                                      //    (4456)
callsub signedaccountmovebaskets_19                                                                                                                                                                                                                                              //    (4458)  contracts_unified/core/methods/liquidate.py                196     signed_account_move_baskets(liquidatee_account, liquidator_account, cash, pool, abi_false, abi_true)
frame_dig -5                                                                                                                                                                                                                                                                     //    (4461)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (4463)
callsub healthcheck_16                                                                                                                                                                                                                                                           //    (4465)  contracts_unified/core/methods/liquidate.py                201     health_check(liquidator_account, abi_false)
frame_bury 12                                                                                                                                                                                                                                                                    //    (4468)                                                                     liquidator_health.set(health_check(liquidator_account, abi_false))
frame_dig 12                                                                                                                                                                                                                                                                     //    (4470)                                                             202     liquidator_health.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (4472)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (4473)                                                                     value & Int(9223372036854775808)
!                                                                                                                                                                                                                                                                                //    (4474)  contracts_unified/core/methods/liquidate.py                202     Not(signed_ltz(liquidator_health.get()))
assert                                                                                                                                                                                                                                                                           //    (4475)                                                                     Assert(Not(signed_ltz(liquidator_health.get())))
retsub                                                                                                                                                                                                                                                                           //    (4476)                                                             89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/methods/pool_move.py                53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
// pool_move                                                                                                                                                                                                                                                                     //
poolmove_39:                                                                                                                                                                                                                                                                     //
proto 5 0                                                                                                                                                                                                                                                                        //    (4477)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4480)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 2                                                                                                                                                                                                                                                                           //    (4481)  contracts_unified/core/methods/pool_move.py                53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4483)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4484)
dup                                                                                                                                                                                                                                                                              //    (4485)  contracts_unified/core/methods/pool_move.py                53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4486)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4487)
dupn 2                                                                                                                                                                                                                                                                           //    (4488)  contracts_unified/core/methods/pool_move.py                53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4490)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4491)
frame_dig -1                                                                                                                                                                                                                                                                     //    (4492)  contracts_unified/core/methods/pool_move.py                87      opup_budget.get()
callsub setup_27                                                                                                                                                                                                                                                                 //    (4494)                                                                     setup(opup_budget.get())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4497)                                                             90      Int(0)
!                                                                                                                                                                                                                                                                                //    (4498)                                                                     abi_false.set(Int(0))
!                                                                                                                                                                                                                                                                                //    (4499)
frame_bury 0                                                                                                                                                                                                                                                                     //    (4500)
callsub senderissigvalidator_21                                                                                                                                                                                                                                                  //    (4502)                                                             93      sender_is_sig_validator()
frame_dig -4                                                                                                                                                                                                                                                                     //    (4505)                                                             96      user_op.operation.use(lambda op_data: Seq(data.decode(op_data.get()), data.operation.use(lambda op: Assert(op.get() == OperationId.PoolMove)), instrument.set(data.instrument), amount.set(data.amount)))
frame_dig -4                                                                                                                                                                                                                                                                     //    (4507)
pushint 72 // 72                                                                                                                                                                                                                                                                 //    (4509)
extract_uint16                                                                                                                                                                                                                                                                   //    (4511)
frame_dig -4                                                                                                                                                                                                                                                                     //    (4512)
pushint 74 // 74                                                                                                                                                                                                                                                                 //    (4514)
extract_uint16                                                                                                                                                                                                                                                                   //    (4516)
substring3                                                                                                                                                                                                                                                                       //    (4517)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 10                                                                                                                                                                                                                                                                    //    (4518)  contracts_unified/core/methods/pool_move.py                96      user_op.operation.use(lambda op_data: Seq(data.decode(op_data.get()), data.operation.use(lambda op: Assert(op.get() == OperationId.PoolMove)), instrument.set(data.instrument), amount.set(data.amount)))
frame_dig 10                                                                                                                                                                                                                                                                     //    (4520)                                                             98      op_data.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (4522)
frame_bury 3                                                                                                                                                                                                                                                                     //    (4525)                                                                     data.decode(op_data.get())
frame_dig 3                                                                                                                                                                                                                                                                      //    (4527)                                                             99      data.operation.use(lambda op: Assert(op.get() == OperationId.PoolMove))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4529)
getbyte                                                                                                                                                                                                                                                                          //    (4530)
frame_bury 11                                                                                                                                                                                                                                                                    //    (4531)
frame_dig 11                                                                                                                                                                                                                                                                     //    (4533)                                                                     op.get()
pushint 2 // 2                                                                                                                                                                                                                                                                   //    (4535)  contracts_unified/library/c3types_user.py                  25      Int(2)
==                                                                                                                                                                                                                                                                               //    (4537)  contracts_unified/core/methods/pool_move.py                99      op.get() == OperationId.PoolMove
assert                                                                                                                                                                                                                                                                           //    (4538)                                                                     Assert(op.get() == OperationId.PoolMove)
frame_dig 3                                                                                                                                                                                                                                                                      //    (4539)                                                             100     instrument.set(data.instrument)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (4541)
getbyte                                                                                                                                                                                                                                                                          //    (4542)
frame_bury 4                                                                                                                                                                                                                                                                     //    (4543)
frame_dig 3                                                                                                                                                                                                                                                                      //    (4545)                                                             101     amount.set(data.amount)
pushint 2 // 2                                                                                                                                                                                                                                                                   //    (4547)
extract_uint64                                                                                                                                                                                                                                                                   //    (4549)
frame_bury 5                                                                                                                                                                                                                                                                     //    (4550)
frame_dig -5                                                                                                                                                                                                                                                                     //    (4552)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (4554)
callsub healthcheck_16                                                                                                                                                                                                                                                           //    (4556)  contracts_unified/core/methods/pool_move.py                106     health_check(account, abi_false)
frame_bury 1                                                                                                                                                                                                                                                                     //    (4559)                                                                     user_old_health.set(cast(abi.ReturnedValue, health_check(account, abi_false)))
frame_dig -5                                                                                                                                                                                                                                                                     //    (4561)  contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
frame_dig 4                                                                                                                                                                                                                                                                      //    (4563)
frame_dig 5                                                                                                                                                                                                                                                                      //    (4565)
callsub performpoolmove_14                                                                                                                                                                                                                                                       //    (4567)  contracts_unified/core/methods/pool_move.py                109     perform_pool_move(account, instrument, amount)
frame_dig 5                                                                                                                                                                                                                                                                      //    (4570)                                                             112     amount.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (4572)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (4573)                                                                     value & Int(9223372036854775808)
bz poolmove_39_l2                                                                                                                                                                                                                                                                //    (4574)  contracts_unified/core/methods/pool_move.py                112     If(signed_ltz(amount.get()))
frame_dig 4                                                                                                                                                                                                                                                                      //    (4577)  contracts_unified/library/pricecaster.py                   47      def get_normalized_price(instrument_id: InstrumentId, *, output: abi.Uint64) -> Expr:
callsub getnormalizedprice_15                                                                                                                                                                                                                                                    //    (4579)  contracts_unified/core/methods/pool_move.py                114     get_normalized_price(instrument)
frame_bury 7                                                                                                                                                                                                                                                                     //    (4582)                                                                     price.set(cast(abi.ReturnedValue, get_normalized_price(instrument)))
frame_dig -5                                                                                                                                                                                                                                                                     //    (4584)  contracts_unified/core/state_handler/local_handler.py      39      def get_position(account: AccountAddress, instrument_id: InstrumentId, *, output: UserInstrumentData) -> Expr:
frame_dig 4                                                                                                                                                                                                                                                                      //    (4586)
callsub getposition_3                                                                                                                                                                                                                                                            //    (4588)  contracts_unified/core/methods/pool_move.py                116     LocalStateHandler.get_position(account, instrument)
frame_bury 6                                                                                                                                                                                                                                                                     //    (4591)                                                                     user_data.set(cast(abi.ReturnedValue, LocalStateHandler.get_position(account, instrument)))
frame_dig 6                                                                                                                                                                                                                                                                      //    (4593)                                                             117     cash.set(user_data.cash)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4595)
extract_uint64                                                                                                                                                                                                                                                                   //    (4596)
frame_bury 8                                                                                                                                                                                                                                                                     //    (4597)
frame_dig 8                                                                                                                                                                                                                                                                      //    (4599)                                                             118     cash.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (4601)                                                                     signed_neg(cash.get())
frame_bury 9                                                                                                                                                                                                                                                                     //    (4604)                                                                     neg_cash.set(signed_neg(cash.get()))
frame_dig -5                                                                                                                                                                                                                                                                     //    (4606)  contracts_unified/core/internal/move.py                    34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig 4                                                                                                                                                                                                                                                                      //    (4608)
frame_dig 9                                                                                                                                                                                                                                                                      //    (4610)
callsub signedaddtocash_17                                                                                                                                                                                                                                                       //    (4612)  contracts_unified/core/methods/pool_move.py                120     signed_add_to_cash(account, instrument, neg_cash)
frame_dig -5                                                                                                                                                                                                                                                                     //    (4615)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (4617)
callsub healthcheck_16                                                                                                                                                                                                                                                           //    (4619)  contracts_unified/core/methods/pool_move.py                122     health_check(account, abi_false)
frame_bury 2                                                                                                                                                                                                                                                                     //    (4622)                                                                     user_health.set(cast(abi.ReturnedValue, health_check(account, abi_false)))
frame_dig 2                                                                                                                                                                                                                                                                      //    (4624)                                                             123     user_health.get()
frame_dig 7                                                                                                                                                                                                                                                                      //    (4626)                                                                     price.get()
frame_dig 8                                                                                                                                                                                                                                                                      //    (4628)                                                                     cash.get()
mulw                                                                                                                                                                                                                                                                             //    (4630)                                                                     WideRatio([price.get(), cash.get()], [Int(PRICECASTER_RESCALE_FACTOR)])
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4631)
intc 9 // 1000000000                                                                                                                                                                                                                                                             //    (4632)                                                                     Int(PRICECASTER_RESCALE_FACTOR)
divmodw                                                                                                                                                                                                                                                                          //    (4634)                                                                     WideRatio([price.get(), cash.get()], [Int(PRICECASTER_RESCALE_FACTOR)])
pop                                                                                                                                                                                                                                                                              //    (4635)
pop                                                                                                                                                                                                                                                                              //    (4636)
swap                                                                                                                                                                                                                                                                             //    (4637)
!                                                                                                                                                                                                                                                                                //    (4638)
assert                                                                                                                                                                                                                                                                           //    (4639)
callsub signedadd_9                                                                                                                                                                                                                                                              //    (4640)                                                                     signed_add(user_health.get(), WideRatio([price.get(), cash.get()], [Int(PRICECASTER_RESCALE_FACTOR)]))
frame_bury 2                                                                                                                                                                                                                                                                     //    (4643)                                                                     user_health.set(signed_add(user_health.get(), WideRatio([price.get(), cash.get()], [Int(PRICECASTER_RESCALE_FACTOR)])))
frame_dig 2                                                                                                                                                                                                                                                                      //    (4645)                                                             124     user_health.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (4647)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (4648)                                                                     value & Int(9223372036854775808)
!                                                                                                                                                                                                                                                                                //    (4649)  contracts_unified/core/methods/pool_move.py                124     Not(signed_ltz(user_health.get()))
assert                                                                                                                                                                                                                                                                           //    (4650)                                                                     Assert(Not(signed_ltz(user_health.get())))
frame_dig -5                                                                                                                                                                                                                                                                     //    (4651)  contracts_unified/core/internal/move.py                    34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig 4                                                                                                                                                                                                                                                                      //    (4653)
frame_dig 8                                                                                                                                                                                                                                                                      //    (4655)
callsub signedaddtocash_17                                                                                                                                                                                                                                                       //    (4657)  contracts_unified/core/methods/pool_move.py                126     signed_add_to_cash(account, instrument, cash)
poolmove_39_l2:                                                                                                                                                                                                                                                                  //                                                                       112     If(signed_ltz(amount.get()))
frame_dig -5                                                                                                                                                                                                                                                                     //    (4660)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (4662)
callsub healthcheck_16                                                                                                                                                                                                                                                           //    (4664)  contracts_unified/core/methods/pool_move.py                130     health_check(account, abi_false)
frame_bury 2                                                                                                                                                                                                                                                                     //    (4667)                                                                     user_health.set(cast(abi.ReturnedValue, health_check(account, abi_false)))
frame_dig 2                                                                                                                                                                                                                                                                      //    (4669)                                                             131     user_health.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (4671)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (4672)                                                                     value & Int(9223372036854775808)
!                                                                                                                                                                                                                                                                                //    (4673)  contracts_unified/core/methods/pool_move.py                131     Not(signed_ltz(user_health.get()))
frame_dig 2                                                                                                                                                                                                                                                                      //    (4674)                                                                     user_health.get()
frame_dig 1                                                                                                                                                                                                                                                                      //    (4676)                                                                     user_old_health.get()
callsub signedgte_11                                                                                                                                                                                                                                                             //    (4678)                                                                     signed_gte(user_health.get(), user_old_health.get())
||                                                                                                                                                                                                                                                                               //    (4681)                                                                     Or(Not(signed_ltz(user_health.get())), signed_gte(user_health.get(), user_old_health.get()))
assert                                                                                                                                                                                                                                                                           //    (4682)                                                                     Assert(Or(Not(signed_ltz(user_health.get())), signed_gte(user_health.get(), user_old_health.get())))
retsub                                                                                                                                                                                                                                                                           //    (4683)                                                             53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/methods/portal_transfer.py          11      def portal_transfer(vaa: abi.DynamicBytes, *, output: abi.DynamicBytes) -> Expr:
// portal_transfer                                                                                                                                                                                                                                                               //
portaltransfer_40:                                                                                                                                                                                                                                                               //
proto 1 1                                                                                                                                                                                                                                                                        //    (4684)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4687)  core_map.py                                                        CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_dig -1                                                                                                                                                                                                                                                                     //    (4688)  contracts_unified/core/methods/portal_transfer.py          23      vaa.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (4690)
len                                                                                                                                                                                                                                                                              //    (4693)                                                                     Len(vaa.get())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4694)                                                                     Int(0)
!=                                                                                                                                                                                                                                                                               //    (4695)                                                                     Len(vaa.get()) != Int(0)
// Empty VAA                                                                                                                                                                                                                                                                     //            core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
assert                                                                                                                                                                                                                                                                           //    (4696)  contracts_unified/core/methods/portal_transfer.py          23      Assert(Len(vaa.get()) != Int(0), comment='Empty VAA')
pushbytes 0x00 // 0x00                                                                                                                                                                                                                                                           //    (4697)                                                             25      Bytes('base16', '0x00')
frame_bury 0                                                                                                                                                                                                                                                                     //    (4700)                                                                     output.set(Bytes('base16', '0x00'))
frame_dig 0                                                                                                                                                                                                                                                                      //    (4702)
len                                                                                                                                                                                                                                                                              //    (4704)
itob                                                                                                                                                                                                                                                                             //    (4705)
extract 6 0                                                                                                                                                                                                                                                                      //    (4706)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4709)
concat                                                                                                                                                                                                                                                                           //    (4711)
frame_bury 0                                                                                                                                                                                                                                                                     //    (4712)
retsub                                                                                                                                                                                                                                                                           //    (4714)                                                             11      def portal_transfer(vaa: abi.DynamicBytes, *, output: abi.DynamicBytes) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/methods/settle.py                   60      def add_order(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, opup_budget: Amount) -> Expr:
// add_order                                                                                                                                                                                                                                                                     //
addorder_41:                                                                                                                                                                                                                                                                     //
proto 4 0                                                                                                                                                                                                                                                                        //    (4715)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4718)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (4719)  contracts_unified/core/methods/settle.py                   60      def add_order(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, opup_budget: Amount) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4720)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4721)
frame_dig -1                                                                                                                                                                                                                                                                     //    (4722)  contracts_unified/core/methods/settle.py                   82      opup_budget.get()
callsub setup_27                                                                                                                                                                                                                                                                 //    (4724)                                                                     setup(opup_budget.get())
callsub senderissigvalidator_21                                                                                                                                                                                                                                                  //    (4727)                                                             85      sender_is_sig_validator()
frame_dig -3                                                                                                                                                                                                                                                                     //    (4730)                                                             88      user_op.operation.use(lambda op_data: Seq(order.decode(op_data.get()), order.operation.use(lambda op: Assert(op.get() == OperationId.Settle)), order.account.use(lambda acc: Assert(acc.get() == account.get()))))
frame_dig -3                                                                                                                                                                                                                                                                     //    (4732)
pushint 72 // 72                                                                                                                                                                                                                                                                 //    (4734)
extract_uint16                                                                                                                                                                                                                                                                   //    (4736)
frame_dig -3                                                                                                                                                                                                                                                                     //    (4737)
pushint 74 // 74                                                                                                                                                                                                                                                                 //    (4739)
extract_uint16                                                                                                                                                                                                                                                                   //    (4741)
substring3                                                                                                                                                                                                                                                                       //    (4742)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 1                                                                                                                                                                                                                                                                     //    (4743)  contracts_unified/core/methods/settle.py                   88      user_op.operation.use(lambda op_data: Seq(order.decode(op_data.get()), order.operation.use(lambda op: Assert(op.get() == OperationId.Settle)), order.account.use(lambda acc: Assert(acc.get() == account.get()))))
frame_dig 1                                                                                                                                                                                                                                                                      //    (4745)                                                             90      op_data.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (4747)
frame_bury 0                                                                                                                                                                                                                                                                     //    (4750)                                                                     order.decode(op_data.get())
frame_dig 0                                                                                                                                                                                                                                                                      //    (4752)                                                             91      order.operation.use(lambda op: Assert(op.get() == OperationId.Settle))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4754)
getbyte                                                                                                                                                                                                                                                                          //    (4755)
frame_bury 2                                                                                                                                                                                                                                                                     //    (4756)
frame_dig 2                                                                                                                                                                                                                                                                      //    (4758)                                                                     op.get()
pushint 6 // 6                                                                                                                                                                                                                                                                   //    (4760)  contracts_unified/library/c3types_user.py                  29      Int(6)
==                                                                                                                                                                                                                                                                               //    (4762)  contracts_unified/core/methods/settle.py                   91      op.get() == OperationId.Settle
assert                                                                                                                                                                                                                                                                           //    (4763)                                                                     Assert(op.get() == OperationId.Settle)
frame_dig 0                                                                                                                                                                                                                                                                      //    (4764)                                                             92      order.account.use(lambda acc: Assert(acc.get() == account.get()))
extract 1 32                                                                                                                                                                                                                                                                     //    (4766)
frame_bury 3                                                                                                                                                                                                                                                                     //    (4769)
frame_dig 3                                                                                                                                                                                                                                                                      //    (4771)                                                                     acc.get()
frame_dig -4                                                                                                                                                                                                                                                                     //    (4773)                                                                     account.get()
==                                                                                                                                                                                                                                                                               //    (4775)                                                                     acc.get() == account.get()
assert                                                                                                                                                                                                                                                                           //    (4776)                                                                     Assert(acc.get() == account.get())
frame_dig 0                                                                                                                                                                                                                                                                      //    (4777)  contracts_unified/core/state_handler/order_handler.py      42      def add_order(order: OrderData) -> Expr:
callsub addorder_30                                                                                                                                                                                                                                                              //    (4779)  contracts_unified/core/methods/settle.py                   97      OrderStateHandler.add_order(order)
retsub                                                                                                                                                                                                                                                                           //    (4782)                                                             60      def add_order(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, opup_budget: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
// settle                                                                                                                                                                                                                                                                        //
settle_42:                                                                                                                                                                                                                                                                       //
proto 6 0                                                                                                                                                                                                                                                                        //    (4783)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4786)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4787)
dupn 9                                                                                                                                                                                                                                                                           //    (4788)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4790)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 15                                                                                                                                                                                                                                                                          //    (4791)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4793)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (4794)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4795)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 22                                                                                                                                                                                                                                                                          //    (4796)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4798)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4799)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4800)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4801)
dupn 3                                                                                                                                                                                                                                                                           //    (4802)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4804)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (4805)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4806)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (4807)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (4808)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (4809)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
frame_dig -1                                                                                                                                                                                                                                                                     //    (4810)                                                             197     opup_budget.get()
callsub setup_27                                                                                                                                                                                                                                                                 //    (4812)                                                                     setup(opup_budget.get())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4815)                                                             200     Int(0)
!                                                                                                                                                                                                                                                                                //    (4816)                                                                     abi_false.set(Int(0))
!                                                                                                                                                                                                                                                                                //    (4817)
frame_bury 0                                                                                                                                                                                                                                                                     //    (4818)
callsub senderissigvalidator_21                                                                                                                                                                                                                                                  //    (4820)                                                             203     sender_is_sig_validator()
frame_dig -4                                                                                                                                                                                                                                                                     //    (4823)                                                             206     user_op.operation.use(lambda op_data: Seq(buy_order.decode(op_data.get()), buy_order.operation.use(lambda op: Assert(op.get() == OperationId.Settle)), buy_order.account.use(lambda acc: Assert(acc.get() == buy_account.get()))))
frame_dig -4                                                                                                                                                                                                                                                                     //    (4825)
pushint 72 // 72                                                                                                                                                                                                                                                                 //    (4827)
extract_uint16                                                                                                                                                                                                                                                                   //    (4829)
frame_dig -4                                                                                                                                                                                                                                                                     //    (4830)
pushint 74 // 74                                                                                                                                                                                                                                                                 //    (4832)
extract_uint16                                                                                                                                                                                                                                                                   //    (4834)
substring3                                                                                                                                                                                                                                                                       //    (4835)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 52                                                                                                                                                                                                                                                                    //    (4836)  contracts_unified/core/methods/settle.py                   206     user_op.operation.use(lambda op_data: Seq(buy_order.decode(op_data.get()), buy_order.operation.use(lambda op: Assert(op.get() == OperationId.Settle)), buy_order.account.use(lambda acc: Assert(acc.get() == buy_account.get()))))
frame_dig 52                                                                                                                                                                                                                                                                     //    (4838)                                                             208     op_data.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (4840)
frame_bury 4                                                                                                                                                                                                                                                                     //    (4843)                                                                     buy_order.decode(op_data.get())
frame_dig 4                                                                                                                                                                                                                                                                      //    (4845)                                                             209     buy_order.operation.use(lambda op: Assert(op.get() == OperationId.Settle))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4847)
getbyte                                                                                                                                                                                                                                                                          //    (4848)
frame_bury 53                                                                                                                                                                                                                                                                    //    (4849)
frame_dig 53                                                                                                                                                                                                                                                                     //    (4851)                                                                     op.get()
pushint 6 // 6                                                                                                                                                                                                                                                                   //    (4853)  contracts_unified/library/c3types_user.py                  29      Int(6)
==                                                                                                                                                                                                                                                                               //    (4855)  contracts_unified/core/methods/settle.py                   209     op.get() == OperationId.Settle
assert                                                                                                                                                                                                                                                                           //    (4856)                                                                     Assert(op.get() == OperationId.Settle)
frame_dig 4                                                                                                                                                                                                                                                                      //    (4857)                                                             210     buy_order.account.use(lambda acc: Assert(acc.get() == buy_account.get()))
extract 1 32                                                                                                                                                                                                                                                                     //    (4859)
frame_bury 54                                                                                                                                                                                                                                                                    //    (4862)
frame_dig 54                                                                                                                                                                                                                                                                     //    (4864)                                                                     acc.get()
frame_dig -5                                                                                                                                                                                                                                                                     //    (4866)                                                                     buy_account.get()
==                                                                                                                                                                                                                                                                               //    (4868)                                                                     acc.get() == buy_account.get()
assert                                                                                                                                                                                                                                                                           //    (4869)                                                                     Assert(acc.get() == buy_account.get())
frame_dig 4                                                                                                                                                                                                                                                                      //    (4870)  contracts_unified/core/state_handler/order_handler.py      42      def add_order(order: OrderData) -> Expr:
callsub addorder_30                                                                                                                                                                                                                                                              //    (4872)  contracts_unified/core/methods/settle.py                   215     OrderStateHandler.add_order(buy_order)
frame_dig -6                                                                                                                                                                                                                                                                     //    (4875)                                                             218     add_order_txn.get()
gtxns ApplicationID                                                                                                                                                                                                                                                              //    (4877)                                                                     add_order_txn.get().application_id()
global CurrentApplicationID                                                                                                                                                                                                                                                      //    (4879)                                                                     Global.current_application_id()
==                                                                                                                                                                                                                                                                               //    (4881)                                                                     add_order_txn.get().application_id() == Global.current_application_id()
assert                                                                                                                                                                                                                                                                           //    (4882)                                                                     Assert(add_order_txn.get().application_id() == Global.current_application_id())
frame_dig -6                                                                                                                                                                                                                                                                     //    (4883)                                                             219     add_order_txn.get()
gtxns OnCompletion                                                                                                                                                                                                                                                               //    (4885)                                                                     add_order_txn.get().on_completion()
intc_0 // NoOp                                                                                                                                                                                                                                                                   //    (4887)                                                                     add_order_txn.get().on_completion() == OnComplete.NoOp
==                                                                                                                                                                                                                                                                               //    (4888)
assert                                                                                                                                                                                                                                                                           //    (4889)                                                                     Assert(add_order_txn.get().on_completion() == OnComplete.NoOp)
frame_dig -6                                                                                                                                                                                                                                                                     //    (4890)                                                             220     add_order_txn.get()
gtxns NumAppArgs                                                                                                                                                                                                                                                                 //    (4892)                                                                     add_order_txn.get().application_args.length()
pushint 5 // 5                                                                                                                                                                                                                                                                   //    (4894)                                                             56      Int(5)
==                                                                                                                                                                                                                                                                               //    (4896)                                                             220     add_order_txn.get().application_args.length() == ADD_ORDER_ARG_COUNT
assert                                                                                                                                                                                                                                                                           //    (4897)                                                                     Assert(add_order_txn.get().application_args.length() == ADD_ORDER_ARG_COUNT)
frame_dig -6                                                                                                                                                                                                                                                                     //    (4898)                                                             221     add_order_txn.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (4900)  contracts_unified/core/c3call.py                           5       Int(0)
gtxnsas ApplicationArgs                                                                                                                                                                                                                                                          //    (4901)  contracts_unified/core/methods/settle.py                   221     add_order_txn.get().application_args[ARG_INDEX_SELECTOR]
bytec 13 // "add_order(address,((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[]),((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[])[],uint64)void"                                                                                        //    (4903)                                                             55      MethodSignature('add_order(address,((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[]),((address,byte[32],uint64),byte[],byte[],uint8,byte[],address,byte[])[],uint64)void')
==                                                                                                                                                                                                                                                                               //    (4905)                                                             221     add_order_txn.get().application_args[ARG_INDEX_SELECTOR] == ADD_ORDER_SIG
assert                                                                                                                                                                                                                                                                           //    (4906)                                                                     Assert(add_order_txn.get().application_args[ARG_INDEX_SELECTOR] == ADD_ORDER_SIG)
frame_dig -6                                                                                                                                                                                                                                                                     //    (4907)                                                             224     add_order_txn.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (4909)  contracts_unified/core/c3call.py                           6       Int(1)
gtxnsas ApplicationArgs                                                                                                                                                                                                                                                          //    (4910)  contracts_unified/core/methods/settle.py                   224     add_order_txn.get().application_args[ARG_INDEX_ACCOUNT]
frame_bury 6                                                                                                                                                                                                                                                                     //    (4912)                                                                     sell_account.decode(add_order_txn.get().application_args[ARG_INDEX_ACCOUNT])
frame_dig -6                                                                                                                                                                                                                                                                     //    (4914)                                                             225     add_order_txn.get()
pushint 2 // 2                                                                                                                                                                                                                                                                   //    (4916)  contracts_unified/core/c3call.py                           7       Int(2)
gtxnsas ApplicationArgs                                                                                                                                                                                                                                                          //    (4918)  contracts_unified/core/methods/settle.py                   225     add_order_txn.get().application_args[ARG_INDEX_OP]
frame_bury 2                                                                                                                                                                                                                                                                     //    (4920)                                                                     add_order_op.decode(add_order_txn.get().application_args[ARG_INDEX_OP])
frame_dig 2                                                                                                                                                                                                                                                                      //    (4922)                                                             226     add_order_op.operation.store_into(add_order_data)
frame_dig 2                                                                                                                                                                                                                                                                      //    (4924)
pushint 72 // 72                                                                                                                                                                                                                                                                 //    (4926)
extract_uint16                                                                                                                                                                                                                                                                   //    (4928)
frame_dig 2                                                                                                                                                                                                                                                                      //    (4929)
pushint 74 // 74                                                                                                                                                                                                                                                                 //    (4931)
extract_uint16                                                                                                                                                                                                                                                                   //    (4933)
substring3                                                                                                                                                                                                                                                                       //    (4934)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 3                                                                                                                                                                                                                                                                     //    (4935)  contracts_unified/core/methods/settle.py                   226     add_order_op.operation.store_into(add_order_data)
frame_dig 3                                                                                                                                                                                                                                                                      //    (4937)                                                             227     add_order_data.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (4939)
frame_bury 5                                                                                                                                                                                                                                                                     //    (4942)                                                                     sell_order.decode(add_order_data.get())
frame_dig 4                                                                                                                                                                                                                                                                      //    (4944)  contracts_unified/core/state_handler/order_handler.py      32      def get_order_id(order: OrderData, *, output: OrderId) -> Expr:
callsub getorderid_29                                                                                                                                                                                                                                                            //    (4946)  contracts_unified/core/methods/settle.py                   230     OrderStateHandler.get_order_id(buy_order)
frame_bury 7                                                                                                                                                                                                                                                                     //    (4949)                                                                     buy_order_id.set(OrderStateHandler.get_order_id(buy_order))
frame_dig 5                                                                                                                                                                                                                                                                      //    (4951)  contracts_unified/core/state_handler/order_handler.py      32      def get_order_id(order: OrderData, *, output: OrderId) -> Expr:
callsub getorderid_29                                                                                                                                                                                                                                                            //    (4953)  contracts_unified/core/methods/settle.py                   231     OrderStateHandler.get_order_id(sell_order)
frame_bury 8                                                                                                                                                                                                                                                                     //    (4956)                                                                     sell_order_id.set(OrderStateHandler.get_order_id(sell_order))
frame_dig 7                                                                                                                                                                                                                                                                      //    (4958)  contracts_unified/core/state_handler/order_handler.py      75      def get_order_onchain(order_id: OrderId, *, output: OnChainOrderData) -> Expr:
callsub getorderonchain_31                                                                                                                                                                                                                                                       //    (4960)  contracts_unified/core/methods/settle.py                   234     OrderStateHandler.get_order_onchain(buy_order_id)
frame_bury 9                                                                                                                                                                                                                                                                     //    (4963)                                                                     buy_order_onchain.set(cast(abi.ReturnedValue, OrderStateHandler.get_order_onchain(buy_order_id)))
frame_dig 8                                                                                                                                                                                                                                                                      //    (4965)  contracts_unified/core/state_handler/order_handler.py      75      def get_order_onchain(order_id: OrderId, *, output: OnChainOrderData) -> Expr:
callsub getorderonchain_31                                                                                                                                                                                                                                                       //    (4967)  contracts_unified/core/methods/settle.py                   235     OrderStateHandler.get_order_onchain(sell_order_id)
frame_bury 10                                                                                                                                                                                                                                                                    //    (4970)                                                                     sell_order_onchain.set(cast(abi.ReturnedValue, OrderStateHandler.get_order_onchain(sell_order_id)))
frame_dig 4                                                                                                                                                                                                                                                                      //    (4972)                                                             238     buy_order.sell_instrument.store_into(buyer_sell_instrument)
pushint 49 // 49                                                                                                                                                                                                                                                                 //    (4974)
getbyte                                                                                                                                                                                                                                                                          //    (4976)
frame_bury 30                                                                                                                                                                                                                                                                    //    (4977)
frame_dig 4                                                                                                                                                                                                                                                                      //    (4979)                                                             239     buy_order.buy_instrument.store_into(buyer_buy_instrument)
pushint 66 // 66                                                                                                                                                                                                                                                                 //    (4981)
getbyte                                                                                                                                                                                                                                                                          //    (4983)
frame_bury 29                                                                                                                                                                                                                                                                    //    (4984)
frame_dig 5                                                                                                                                                                                                                                                                      //    (4986)                                                             240     sell_order.sell_instrument.store_into(seller_sell_instrument)
pushint 49 // 49                                                                                                                                                                                                                                                                 //    (4988)
getbyte                                                                                                                                                                                                                                                                          //    (4990)
frame_bury 32                                                                                                                                                                                                                                                                    //    (4991)
frame_dig 5                                                                                                                                                                                                                                                                      //    (4993)                                                             241     sell_order.buy_instrument.store_into(seller_buy_instrument)
pushint 66 // 66                                                                                                                                                                                                                                                                 //    (4995)
getbyte                                                                                                                                                                                                                                                                          //    (4997)
frame_bury 31                                                                                                                                                                                                                                                                    //    (4998)
frame_dig 30                                                                                                                                                                                                                                                                     //    (5000)                                                             243     buyer_sell_instrument.get()
frame_dig 31                                                                                                                                                                                                                                                                     //    (5002)                                                                     seller_buy_instrument.get()
==                                                                                                                                                                                                                                                                               //    (5004)                                                                     buyer_sell_instrument.get() == seller_buy_instrument.get()
assert                                                                                                                                                                                                                                                                           //    (5005)                                                                     Assert(buyer_sell_instrument.get() == seller_buy_instrument.get())
frame_dig 29                                                                                                                                                                                                                                                                     //    (5006)                                                             244     buyer_buy_instrument.get()
frame_dig 32                                                                                                                                                                                                                                                                     //    (5008)                                                                     seller_sell_instrument.get()
==                                                                                                                                                                                                                                                                               //    (5010)                                                                     buyer_buy_instrument.get() == seller_sell_instrument.get()
assert                                                                                                                                                                                                                                                                           //    (5011)                                                                     Assert(buyer_buy_instrument.get() == seller_sell_instrument.get())
frame_dig 4                                                                                                                                                                                                                                                                      //    (5012)                                                             247     buy_order.expiration_time.use(lambda expiration_time: Assert(expiration_time.get() > Global.latest_timestamp()))
pushint 41 // 41                                                                                                                                                                                                                                                                 //    (5014)
extract_uint64                                                                                                                                                                                                                                                                   //    (5016)
frame_bury 55                                                                                                                                                                                                                                                                    //    (5017)
frame_dig 55                                                                                                                                                                                                                                                                     //    (5019)                                                             248     expiration_time.get()
global LatestTimestamp                                                                                                                                                                                                                                                           //    (5021)                                                                     Global.latest_timestamp()
>                                                                                                                                                                                                                                                                                //    (5023)                                                                     expiration_time.get() > Global.latest_timestamp()
assert                                                                                                                                                                                                                                                                           //    (5024)                                                                     Assert(expiration_time.get() > Global.latest_timestamp())
frame_dig 5                                                                                                                                                                                                                                                                      //    (5025)                                                             250     sell_order.expiration_time.use(lambda expiration_time: Assert(expiration_time.get() > Global.latest_timestamp()))
pushint 41 // 41                                                                                                                                                                                                                                                                 //    (5027)
extract_uint64                                                                                                                                                                                                                                                                   //    (5029)
frame_bury 56                                                                                                                                                                                                                                                                    //    (5030)
frame_dig 56                                                                                                                                                                                                                                                                     //    (5032)                                                             251     expiration_time.get()
global LatestTimestamp                                                                                                                                                                                                                                                           //    (5034)                                                                     Global.latest_timestamp()
>                                                                                                                                                                                                                                                                                //    (5036)                                                                     expiration_time.get() > Global.latest_timestamp()
assert                                                                                                                                                                                                                                                                           //    (5037)                                                                     Assert(expiration_time.get() > Global.latest_timestamp())
frame_dig 4                                                                                                                                                                                                                                                                      //    (5038)                                                             255     buyer_sell_amount.set(buy_order.sell_amount)
pushint 50 // 50                                                                                                                                                                                                                                                                 //    (5040)
extract_uint64                                                                                                                                                                                                                                                                   //    (5042)
frame_bury 11                                                                                                                                                                                                                                                                    //    (5043)
frame_dig 4                                                                                                                                                                                                                                                                      //    (5045)                                                             256     buyer_buy_amount.set(buy_order.buy_amount)
pushint 67 // 67                                                                                                                                                                                                                                                                 //    (5047)
extract_uint64                                                                                                                                                                                                                                                                   //    (5049)
frame_bury 12                                                                                                                                                                                                                                                                    //    (5050)
frame_dig 5                                                                                                                                                                                                                                                                      //    (5052)                                                             257     seller_sell_amount.set(sell_order.sell_amount)
pushint 50 // 50                                                                                                                                                                                                                                                                 //    (5054)
extract_uint64                                                                                                                                                                                                                                                                   //    (5056)
frame_bury 13                                                                                                                                                                                                                                                                    //    (5057)
frame_dig 5                                                                                                                                                                                                                                                                      //    (5059)                                                             258     seller_buy_amount.set(sell_order.buy_amount)
pushint 67 // 67                                                                                                                                                                                                                                                                 //    (5061)
extract_uint64                                                                                                                                                                                                                                                                   //    (5063)
frame_bury 14                                                                                                                                                                                                                                                                    //    (5064)
frame_dig 11                                                                                                                                                                                                                                                                     //    (5066)                                                             262     buyer_sell_amount.get()
itob                                                                                                                                                                                                                                                                             //    (5068)                                                                     Itob(buyer_sell_amount.get())
frame_dig 13                                                                                                                                                                                                                                                                     //    (5069)                                                                     seller_sell_amount.get()
itob                                                                                                                                                                                                                                                                             //    (5071)                                                                     Itob(seller_sell_amount.get())
b*                                                                                                                                                                                                                                                                               //    (5072)                                                                     BytesMul(Itob(buyer_sell_amount.get()), Itob(seller_sell_amount.get()))
frame_dig 12                                                                                                                                                                                                                                                                     //    (5073)                                                             263     buyer_buy_amount.get()
itob                                                                                                                                                                                                                                                                             //    (5075)                                                                     Itob(buyer_buy_amount.get())
frame_dig 14                                                                                                                                                                                                                                                                     //    (5076)                                                                     seller_buy_amount.get()
itob                                                                                                                                                                                                                                                                             //    (5078)                                                                     Itob(seller_buy_amount.get())
b*                                                                                                                                                                                                                                                                               //    (5079)                                                                     BytesMul(Itob(buyer_buy_amount.get()), Itob(seller_buy_amount.get()))
b>=                                                                                                                                                                                                                                                                              //    (5080)                                                             261     BytesGe(BytesMul(Itob(buyer_sell_amount.get()), Itob(seller_sell_amount.get())), BytesMul(Itob(buyer_buy_amount.get()), Itob(seller_buy_amount.get())))
assert                                                                                                                                                                                                                                                                           //    (5081)                                                             260     Assert(BytesGe(BytesMul(Itob(buyer_sell_amount.get()), Itob(seller_sell_amount.get())), BytesMul(Itob(buyer_buy_amount.get()), Itob(seller_buy_amount.get()))))
frame_dig -2                                                                                                                                                                                                                                                                     //    (5082)                                                             268     buyer_to_send.set(server_args.buyer_to_send)
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (5084)
extract_uint64                                                                                                                                                                                                                                                                   //    (5086)
frame_bury 33                                                                                                                                                                                                                                                                    //    (5087)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5089)                                                             269     seller_to_send.set(server_args.seller_to_send)
pushint 48 // 48                                                                                                                                                                                                                                                                 //    (5091)
extract_uint64                                                                                                                                                                                                                                                                   //    (5093)
frame_bury 34                                                                                                                                                                                                                                                                    //    (5094)
frame_dig 33                                                                                                                                                                                                                                                                     //    (5096)                                                             273     buyer_to_send.get()
itob                                                                                                                                                                                                                                                                             //    (5098)                                                                     Itob(buyer_to_send.get())
frame_dig 13                                                                                                                                                                                                                                                                     //    (5099)                                                                     seller_sell_amount.get()
itob                                                                                                                                                                                                                                                                             //    (5101)                                                                     Itob(seller_sell_amount.get())
b*                                                                                                                                                                                                                                                                               //    (5102)                                                                     BytesMul(Itob(buyer_to_send.get()), Itob(seller_sell_amount.get()))
frame_dig 34                                                                                                                                                                                                                                                                     //    (5103)                                                             274     seller_to_send.get()
itob                                                                                                                                                                                                                                                                             //    (5105)                                                                     Itob(seller_to_send.get())
frame_dig 14                                                                                                                                                                                                                                                                     //    (5106)                                                                     seller_buy_amount.get()
itob                                                                                                                                                                                                                                                                             //    (5108)                                                                     Itob(seller_buy_amount.get())
b*                                                                                                                                                                                                                                                                               //    (5109)                                                                     BytesMul(Itob(seller_to_send.get()), Itob(seller_buy_amount.get()))
b>=                                                                                                                                                                                                                                                                              //    (5110)                                                             272     BytesGe(BytesMul(Itob(buyer_to_send.get()), Itob(seller_sell_amount.get())), BytesMul(Itob(seller_to_send.get()), Itob(seller_buy_amount.get())))
assert                                                                                                                                                                                                                                                                           //    (5111)                                                             271     Assert(BytesGe(BytesMul(Itob(buyer_to_send.get()), Itob(seller_sell_amount.get())), BytesMul(Itob(seller_to_send.get()), Itob(seller_buy_amount.get()))))
frame_dig 34                                                                                                                                                                                                                                                                     //    (5112)                                                             280     seller_to_send.get()
itob                                                                                                                                                                                                                                                                             //    (5114)                                                                     Itob(seller_to_send.get())
frame_dig 11                                                                                                                                                                                                                                                                     //    (5115)                                                                     buyer_sell_amount.get()
itob                                                                                                                                                                                                                                                                             //    (5117)                                                                     Itob(buyer_sell_amount.get())
b*                                                                                                                                                                                                                                                                               //    (5118)                                                                     BytesMul(Itob(seller_to_send.get()), Itob(buyer_sell_amount.get()))
frame_dig 33                                                                                                                                                                                                                                                                     //    (5119)                                                             281     buyer_to_send.get()
itob                                                                                                                                                                                                                                                                             //    (5121)                                                                     Itob(buyer_to_send.get())
frame_dig 12                                                                                                                                                                                                                                                                     //    (5122)                                                                     buyer_buy_amount.get()
itob                                                                                                                                                                                                                                                                             //    (5124)                                                                     Itob(buyer_buy_amount.get())
b*                                                                                                                                                                                                                                                                               //    (5125)                                                                     BytesMul(Itob(buyer_to_send.get()), Itob(buyer_buy_amount.get()))
b>=                                                                                                                                                                                                                                                                              //    (5126)                                                             279     BytesGe(BytesMul(Itob(seller_to_send.get()), Itob(buyer_sell_amount.get())), BytesMul(Itob(buyer_to_send.get()), Itob(buyer_buy_amount.get())))
assert                                                                                                                                                                                                                                                                           //    (5127)                                                             278     Assert(BytesGe(BytesMul(Itob(seller_to_send.get()), Itob(buyer_sell_amount.get())), BytesMul(Itob(buyer_to_send.get()), Itob(buyer_buy_amount.get()))))
frame_dig 9                                                                                                                                                                                                                                                                      //    (5128)                                                             286     buyer_sell_remaining.set(buy_order_onchain.sell_remaining)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5130)
extract_uint64                                                                                                                                                                                                                                                                   //    (5131)
frame_bury 15                                                                                                                                                                                                                                                                    //    (5132)
frame_dig 15                                                                                                                                                                                                                                                                     //    (5134)                                                             287     buyer_sell_remaining.get()
frame_dig 33                                                                                                                                                                                                                                                                     //    (5136)                                                                     buyer_to_send.get()
>=                                                                                                                                                                                                                                                                               //    (5138)                                                                     buyer_sell_remaining.get() >= buyer_to_send.get()
assert                                                                                                                                                                                                                                                                           //    (5139)                                                                     Assert(buyer_sell_remaining.get() >= buyer_to_send.get())
frame_dig 10                                                                                                                                                                                                                                                                     //    (5140)                                                             288     seller_sell_remaining.set(sell_order_onchain.sell_remaining)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5142)
extract_uint64                                                                                                                                                                                                                                                                   //    (5143)
frame_bury 18                                                                                                                                                                                                                                                                    //    (5144)
frame_dig 18                                                                                                                                                                                                                                                                     //    (5146)                                                             289     seller_sell_remaining.get()
frame_dig 34                                                                                                                                                                                                                                                                     //    (5148)                                                                     seller_to_send.get()
>=                                                                                                                                                                                                                                                                               //    (5150)                                                                     seller_sell_remaining.get() >= seller_to_send.get()
assert                                                                                                                                                                                                                                                                           //    (5151)                                                                     Assert(seller_sell_remaining.get() >= seller_to_send.get())
frame_dig 9                                                                                                                                                                                                                                                                      //    (5152)                                                             292     buyer_borrow_remaining.set(buy_order_onchain.borrow_remaining)
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (5154)
extract_uint64                                                                                                                                                                                                                                                                   //    (5156)
frame_bury 16                                                                                                                                                                                                                                                                    //    (5157)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5159)                                                             293     buyer_to_borrow.set(server_args.buyer_to_borrow)
pushint 16 // 16                                                                                                                                                                                                                                                                 //    (5161)
extract_uint64                                                                                                                                                                                                                                                                   //    (5163)
frame_bury 35                                                                                                                                                                                                                                                                    //    (5164)
frame_dig 16                                                                                                                                                                                                                                                                     //    (5166)                                                             294     buyer_borrow_remaining.get()
frame_dig 35                                                                                                                                                                                                                                                                     //    (5168)                                                                     buyer_to_borrow.get()
>=                                                                                                                                                                                                                                                                               //    (5170)                                                                     buyer_borrow_remaining.get() >= buyer_to_borrow.get()
assert                                                                                                                                                                                                                                                                           //    (5171)                                                                     Assert(buyer_borrow_remaining.get() >= buyer_to_borrow.get())
frame_dig 10                                                                                                                                                                                                                                                                     //    (5172)                                                             296     seller_borrow_remaining.set(sell_order_onchain.borrow_remaining)
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (5174)
extract_uint64                                                                                                                                                                                                                                                                   //    (5176)
frame_bury 19                                                                                                                                                                                                                                                                    //    (5177)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5179)                                                             297     seller_to_borrow.set(server_args.seller_to_borrow)
pushint 56 // 56                                                                                                                                                                                                                                                                 //    (5181)
extract_uint64                                                                                                                                                                                                                                                                   //    (5183)
frame_bury 36                                                                                                                                                                                                                                                                    //    (5184)
frame_dig 19                                                                                                                                                                                                                                                                     //    (5186)                                                             298     seller_borrow_remaining.get()
frame_dig 36                                                                                                                                                                                                                                                                     //    (5188)                                                                     seller_to_borrow.get()
>=                                                                                                                                                                                                                                                                               //    (5190)                                                                     seller_borrow_remaining.get() >= seller_to_borrow.get()
assert                                                                                                                                                                                                                                                                           //    (5191)                                                                     Assert(seller_borrow_remaining.get() >= seller_to_borrow.get())
frame_dig 9                                                                                                                                                                                                                                                                      //    (5192)                                                             301     buyer_repay_remaining.set(buy_order_onchain.repay_remaining)
pushint 16 // 16                                                                                                                                                                                                                                                                 //    (5194)
extract_uint64                                                                                                                                                                                                                                                                   //    (5196)
frame_bury 17                                                                                                                                                                                                                                                                    //    (5197)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5199)                                                             302     buyer_to_repay.set(server_args.buyer_to_repay)
pushint 24 // 24                                                                                                                                                                                                                                                                 //    (5201)
extract_uint64                                                                                                                                                                                                                                                                   //    (5203)
frame_bury 37                                                                                                                                                                                                                                                                    //    (5204)
frame_dig 17                                                                                                                                                                                                                                                                     //    (5206)                                                             303     buyer_repay_remaining.get()
frame_dig 37                                                                                                                                                                                                                                                                     //    (5208)                                                                     buyer_to_repay.get()
>=                                                                                                                                                                                                                                                                               //    (5210)                                                                     buyer_repay_remaining.get() >= buyer_to_repay.get()
assert                                                                                                                                                                                                                                                                           //    (5211)                                                                     Assert(buyer_repay_remaining.get() >= buyer_to_repay.get())
frame_dig 10                                                                                                                                                                                                                                                                     //    (5212)                                                             305     seller_repay_remaining.set(sell_order_onchain.repay_remaining)
pushint 16 // 16                                                                                                                                                                                                                                                                 //    (5214)
extract_uint64                                                                                                                                                                                                                                                                   //    (5216)
frame_bury 20                                                                                                                                                                                                                                                                    //    (5217)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5219)                                                             306     seller_to_repay.set(server_args.seller_to_repay)
pushint 64 // 64                                                                                                                                                                                                                                                                 //    (5221)
extract_uint64                                                                                                                                                                                                                                                                   //    (5223)
frame_bury 38                                                                                                                                                                                                                                                                    //    (5224)
frame_dig 20                                                                                                                                                                                                                                                                     //    (5226)                                                             307     seller_repay_remaining.get()
frame_dig 38                                                                                                                                                                                                                                                                     //    (5228)                                                                     seller_to_repay.get()
>=                                                                                                                                                                                                                                                                               //    (5230)                                                                     seller_repay_remaining.get() >= seller_to_repay.get()
assert                                                                                                                                                                                                                                                                           //    (5231)                                                                     Assert(seller_repay_remaining.get() >= seller_to_repay.get())
frame_dig -2                                                                                                                                                                                                                                                                     //    (5232)                                                             310     buyer_fees.set(server_args.buyer_fees)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5234)
extract_uint64                                                                                                                                                                                                                                                                   //    (5235)
frame_bury 44                                                                                                                                                                                                                                                                    //    (5236)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5238)                                                             311     seller_fees.set(server_args.seller_fees)
pushint 40 // 40                                                                                                                                                                                                                                                                 //    (5240)
extract_uint64                                                                                                                                                                                                                                                                   //    (5242)
frame_bury 45                                                                                                                                                                                                                                                                    //    (5243)
frame_dig 44                                                                                                                                                                                                                                                                     //    (5245)                                                             312     buyer_fees.get()
frame_dig 33                                                                                                                                                                                                                                                                     //    (5247)                                                                     buyer_to_send.get()
pushint 40 // 40                                                                                                                                                                                                                                                                 //    (5249)                                                             57      Int(40)
/                                                                                                                                                                                                                                                                                //    (5251)                                                             312     buyer_to_send.get() / MAX_FEES_DIVISOR
<=                                                                                                                                                                                                                                                                               //    (5252)                                                                     buyer_fees.get() <= buyer_to_send.get() / MAX_FEES_DIVISOR
assert                                                                                                                                                                                                                                                                           //    (5253)                                                                     Assert(buyer_fees.get() <= buyer_to_send.get() / MAX_FEES_DIVISOR)
frame_dig 45                                                                                                                                                                                                                                                                     //    (5254)                                                             313     seller_fees.get()
frame_dig 33                                                                                                                                                                                                                                                                     //    (5256)                                                                     buyer_to_send.get()
pushint 40 // 40                                                                                                                                                                                                                                                                 //    (5258)                                                             57      Int(40)
/                                                                                                                                                                                                                                                                                //    (5260)                                                             313     buyer_to_send.get() / MAX_FEES_DIVISOR
<=                                                                                                                                                                                                                                                                               //    (5261)                                                                     seller_fees.get() <= buyer_to_send.get() / MAX_FEES_DIVISOR
assert                                                                                                                                                                                                                                                                           //    (5262)                                                                     Assert(seller_fees.get() <= buyer_to_send.get() / MAX_FEES_DIVISOR)
frame_dig 35                                                                                                                                                                                                                                                                     //    (5263)                                                             316     buyer_to_borrow.get()
frame_dig 33                                                                                                                                                                                                                                                                     //    (5265)                                                                     buyer_to_send.get()
frame_dig 44                                                                                                                                                                                                                                                                     //    (5267)                                                                     buyer_fees.get()
+                                                                                                                                                                                                                                                                                //    (5269)                                                                     buyer_to_send.get() + buyer_fees.get()
<=                                                                                                                                                                                                                                                                               //    (5270)                                                                     buyer_to_borrow.get() <= buyer_to_send.get() + buyer_fees.get()
assert                                                                                                                                                                                                                                                                           //    (5271)                                                                     Assert(buyer_to_borrow.get() <= buyer_to_send.get() + buyer_fees.get())
frame_dig 37                                                                                                                                                                                                                                                                     //    (5272)                                                             317     buyer_to_repay.get()
frame_dig 34                                                                                                                                                                                                                                                                     //    (5274)                                                                     seller_to_send.get()
<=                                                                                                                                                                                                                                                                               //    (5276)                                                                     buyer_to_repay.get() <= seller_to_send.get()
assert                                                                                                                                                                                                                                                                           //    (5277)                                                                     Assert(buyer_to_repay.get() <= seller_to_send.get())
frame_dig 36                                                                                                                                                                                                                                                                     //    (5278)                                                             318     seller_to_borrow.get()
frame_dig 34                                                                                                                                                                                                                                                                     //    (5280)                                                                     seller_to_send.get()
<=                                                                                                                                                                                                                                                                               //    (5282)                                                                     seller_to_borrow.get() <= seller_to_send.get()
assert                                                                                                                                                                                                                                                                           //    (5283)                                                                     Assert(seller_to_borrow.get() <= seller_to_send.get())
frame_dig 38                                                                                                                                                                                                                                                                     //    (5284)                                                             319     seller_to_repay.get()
frame_dig 33                                                                                                                                                                                                                                                                     //    (5286)                                                                     buyer_to_send.get()
frame_dig 45                                                                                                                                                                                                                                                                     //    (5288)                                                                     seller_fees.get()
-                                                                                                                                                                                                                                                                                //    (5290)                                                                     buyer_to_send.get() - seller_fees.get()
<=                                                                                                                                                                                                                                                                               //    (5291)                                                                     seller_to_repay.get() <= buyer_to_send.get() - seller_fees.get()
assert                                                                                                                                                                                                                                                                           //    (5292)                                                                     Assert(seller_to_repay.get() <= buyer_to_send.get() - seller_fees.get())
frame_dig 15                                                                                                                                                                                                                                                                     //    (5293)                                                             322     buyer_sell_remaining.get()
frame_dig 33                                                                                                                                                                                                                                                                     //    (5295)                                                                     buyer_to_send.get()
-                                                                                                                                                                                                                                                                                //    (5297)                                                                     buyer_sell_remaining.get() - buyer_to_send.get()
frame_bury 21                                                                                                                                                                                                                                                                    //    (5298)                                                                     buyer_new_sell_remaining.set(buyer_sell_remaining.get() - buyer_to_send.get())
frame_dig 16                                                                                                                                                                                                                                                                     //    (5300)                                                             323     buyer_borrow_remaining.get()
frame_dig 35                                                                                                                                                                                                                                                                     //    (5302)                                                                     buyer_to_borrow.get()
-                                                                                                                                                                                                                                                                                //    (5304)                                                                     buyer_borrow_remaining.get() - buyer_to_borrow.get()
frame_bury 22                                                                                                                                                                                                                                                                    //    (5305)                                                                     buyer_new_borrow_remaining.set(buyer_borrow_remaining.get() - buyer_to_borrow.get())
frame_dig 17                                                                                                                                                                                                                                                                     //    (5307)                                                             324     buyer_repay_remaining.get()
frame_dig 37                                                                                                                                                                                                                                                                     //    (5309)                                                                     buyer_to_repay.get()
-                                                                                                                                                                                                                                                                                //    (5311)                                                                     buyer_repay_remaining.get() - buyer_to_repay.get()
frame_bury 23                                                                                                                                                                                                                                                                    //    (5312)                                                                     buyer_new_repay_remaining.set(buyer_repay_remaining.get() - buyer_to_repay.get())
frame_dig 21                                                                                                                                                                                                                                                                     //    (5314)                                                             325     buyer_new_order_onchain.set(buyer_new_sell_remaining, buyer_new_borrow_remaining, buyer_new_repay_remaining)
itob                                                                                                                                                                                                                                                                             //    (5316)
frame_dig 22                                                                                                                                                                                                                                                                     //    (5317)
itob                                                                                                                                                                                                                                                                             //    (5319)
concat                                                                                                                                                                                                                                                                           //    (5320)
frame_dig 23                                                                                                                                                                                                                                                                     //    (5321)
itob                                                                                                                                                                                                                                                                             //    (5323)
concat                                                                                                                                                                                                                                                                           //    (5324)
frame_bury 27                                                                                                                                                                                                                                                                    //    (5325)
frame_dig 18                                                                                                                                                                                                                                                                     //    (5327)                                                             328     seller_sell_remaining.get()
frame_dig 34                                                                                                                                                                                                                                                                     //    (5329)                                                                     seller_to_send.get()
-                                                                                                                                                                                                                                                                                //    (5331)                                                                     seller_sell_remaining.get() - seller_to_send.get()
frame_bury 24                                                                                                                                                                                                                                                                    //    (5332)                                                                     seller_new_sell_remaining.set(seller_sell_remaining.get() - seller_to_send.get())
frame_dig 19                                                                                                                                                                                                                                                                     //    (5334)                                                             329     seller_borrow_remaining.get()
frame_dig 36                                                                                                                                                                                                                                                                     //    (5336)                                                                     seller_to_borrow.get()
-                                                                                                                                                                                                                                                                                //    (5338)                                                                     seller_borrow_remaining.get() - seller_to_borrow.get()
frame_bury 25                                                                                                                                                                                                                                                                    //    (5339)                                                                     seller_new_borrow_remaining.set(seller_borrow_remaining.get() - seller_to_borrow.get())
frame_dig 20                                                                                                                                                                                                                                                                     //    (5341)                                                             330     seller_repay_remaining.get()
frame_dig 38                                                                                                                                                                                                                                                                     //    (5343)                                                                     seller_to_repay.get()
-                                                                                                                                                                                                                                                                                //    (5345)                                                                     seller_repay_remaining.get() - seller_to_repay.get()
frame_bury 26                                                                                                                                                                                                                                                                    //    (5346)                                                                     seller_new_repay_remaining.set(seller_repay_remaining.get() - seller_to_repay.get())
frame_dig 24                                                                                                                                                                                                                                                                     //    (5348)                                                             331     seller_new_order_onchain.set(seller_new_sell_remaining, seller_new_borrow_remaining, seller_new_repay_remaining)
itob                                                                                                                                                                                                                                                                             //    (5350)
frame_dig 25                                                                                                                                                                                                                                                                     //    (5351)
itob                                                                                                                                                                                                                                                                             //    (5353)
concat                                                                                                                                                                                                                                                                           //    (5354)
frame_dig 26                                                                                                                                                                                                                                                                     //    (5355)
itob                                                                                                                                                                                                                                                                             //    (5357)
concat                                                                                                                                                                                                                                                                           //    (5358)
frame_bury 28                                                                                                                                                                                                                                                                    //    (5359)
frame_dig 34                                                                                                                                                                                                                                                                     //    (5361)                                                             334     seller_to_send.get()
frame_bury 39                                                                                                                                                                                                                                                                    //    (5363)                                                                     buyer_buy_delta.set(seller_to_send.get())
frame_dig 33                                                                                                                                                                                                                                                                     //    (5365)                                                             335     buyer_to_send.get()
frame_dig 45                                                                                                                                                                                                                                                                     //    (5367)                                                                     seller_fees.get()
-                                                                                                                                                                                                                                                                                //    (5369)                                                                     buyer_to_send.get() - seller_fees.get()
frame_bury 40                                                                                                                                                                                                                                                                    //    (5370)                                                                     seller_buy_delta.set(buyer_to_send.get() - seller_fees.get())
frame_dig 33                                                                                                                                                                                                                                                                     //    (5372)                                                             336     buyer_to_send.get()
frame_dig 44                                                                                                                                                                                                                                                                     //    (5374)                                                                     buyer_fees.get()
+                                                                                                                                                                                                                                                                                //    (5376)                                                                     buyer_to_send.get() + buyer_fees.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (5377)                                                                     signed_neg(buyer_to_send.get() + buyer_fees.get())
frame_bury 41                                                                                                                                                                                                                                                                    //    (5380)                                                                     buyer_sell_delta.set(signed_neg(buyer_to_send.get() + buyer_fees.get()))
frame_dig 34                                                                                                                                                                                                                                                                     //    (5382)                                                             337     seller_to_send.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (5384)                                                                     signed_neg(seller_to_send.get())
frame_bury 42                                                                                                                                                                                                                                                                    //    (5387)                                                                     seller_sell_delta.set(signed_neg(seller_to_send.get()))
frame_dig 7                                                                                                                                                                                                                                                                      //    (5389)  contracts_unified/core/state_handler/order_handler.py      96      order_id.get()
frame_dig 27                                                                                                                                                                                                                                                                     //    (5391)                                                                     data.encode()
box_put                                                                                                                                                                                                                                                                          //    (5393)                                                                     App.box_put(order_id.get(), data.encode())
frame_dig 8                                                                                                                                                                                                                                                                      //    (5394)                                                                     order_id.get()
frame_dig 28                                                                                                                                                                                                                                                                     //    (5396)                                                                     data.encode()
box_put                                                                                                                                                                                                                                                                          //    (5398)                                                                     App.box_put(order_id.get(), data.encode())
frame_dig -2                                                                                                                                                                                                                                                                     //    (5399)  contracts_unified/core/methods/settle.py                   344     buyer_negative_margin.set(server_args.buyer_negative_margin)
pushint 32 // 32                                                                                                                                                                                                                                                                 //    (5401)
extract_uint64                                                                                                                                                                                                                                                                   //    (5403)
frame_bury 50                                                                                                                                                                                                                                                                    //    (5404)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5406)                                                             345     seller_negative_margin.set(server_args.seller_negative_margin)
pushint 72 // 72                                                                                                                                                                                                                                                                 //    (5408)
extract_uint64                                                                                                                                                                                                                                                                   //    (5410)
frame_bury 51                                                                                                                                                                                                                                                                    //    (5411)
frame_dig 50                                                                                                                                                                                                                                                                     //    (5413)                                                             347     buyer_negative_margin.get()
bnz settle_42_l11                                                                                                                                                                                                                                                                //    (5415)                                                                     If(buyer_negative_margin.get())
settle_42_l1:                                                                                                                                                                                                                                                                    //                                                                       351     If(seller_negative_margin.get())
frame_dig 51                                                                                                                                                                                                                                                                     //    (5418)                                                                     seller_negative_margin.get()
bnz settle_42_l10                                                                                                                                                                                                                                                                //    (5420)                                                                     If(seller_negative_margin.get())
settle_42_l2:                                                                                                                                                                                                                                                                    //                                                                       356     If(buyer_to_borrow.get() > Int(0))
frame_dig 35                                                                                                                                                                                                                                                                     //    (5423)                                                                     buyer_to_borrow.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5425)                                                                     Int(0)
>                                                                                                                                                                                                                                                                                //    (5426)                                                                     buyer_to_borrow.get() > Int(0)
bnz settle_42_l9                                                                                                                                                                                                                                                                 //    (5427)                                                                     If(buyer_to_borrow.get() > Int(0))
settle_42_l3:                                                                                                                                                                                                                                                                    //                                                                       360     If(seller_to_borrow.get() > Int(0))
frame_dig 36                                                                                                                                                                                                                                                                     //    (5430)                                                                     seller_to_borrow.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5432)                                                                     Int(0)
>                                                                                                                                                                                                                                                                                //    (5433)                                                                     seller_to_borrow.get() > Int(0)
bnz settle_42_l8                                                                                                                                                                                                                                                                 //    (5434)                                                                     If(seller_to_borrow.get() > Int(0))
settle_42_l4:                                                                                                                                                                                                                                                                    //                                                                       376     If(buyer_to_repay.get() > Int(0))
frame_dig -5                                                                                                                                                                                                                                                                     //    (5437)  contracts_unified/core/internal/move.py                    34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig 29                                                                                                                                                                                                                                                                     //    (5439)
frame_dig 39                                                                                                                                                                                                                                                                     //    (5441)
callsub signedaddtocash_17                                                                                                                                                                                                                                                       //    (5443)  contracts_unified/core/methods/settle.py                   366     signed_add_to_cash(buy_account, buyer_buy_instrument, buyer_buy_delta)
frame_dig 6                                                                                                                                                                                                                                                                      //    (5446)  contracts_unified/core/internal/move.py                    34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig 31                                                                                                                                                                                                                                                                     //    (5448)
frame_dig 40                                                                                                                                                                                                                                                                     //    (5450)
callsub signedaddtocash_17                                                                                                                                                                                                                                                       //    (5452)  contracts_unified/core/methods/settle.py                   367     signed_add_to_cash(sell_account, seller_buy_instrument, seller_buy_delta)
frame_dig -5                                                                                                                                                                                                                                                                     //    (5455)  contracts_unified/core/internal/move.py                    34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig 30                                                                                                                                                                                                                                                                     //    (5457)
frame_dig 41                                                                                                                                                                                                                                                                     //    (5459)
callsub signedaddtocash_17                                                                                                                                                                                                                                                       //    (5461)  contracts_unified/core/methods/settle.py                   368     signed_add_to_cash(buy_account, buyer_sell_instrument, buyer_sell_delta)
frame_dig 6                                                                                                                                                                                                                                                                      //    (5464)  contracts_unified/core/internal/move.py                    34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig 32                                                                                                                                                                                                                                                                     //    (5466)
frame_dig 42                                                                                                                                                                                                                                                                     //    (5468)
callsub signedaddtocash_17                                                                                                                                                                                                                                                       //    (5470)  contracts_unified/core/methods/settle.py                   369     signed_add_to_cash(sell_account, seller_sell_instrument, seller_sell_delta)
frame_dig 30                                                                                                                                                                                                                                                                     //    (5473)  contracts_unified/core/internal/move.py                    198     def collect_fees(instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig 44                                                                                                                                                                                                                                                                     //    (5475)
callsub collectfees_20                                                                                                                                                                                                                                                           //    (5477)  contracts_unified/core/methods/settle.py                   372     collect_fees(buyer_sell_instrument, buyer_fees)
frame_dig 31                                                                                                                                                                                                                                                                     //    (5480)  contracts_unified/core/internal/move.py                    198     def collect_fees(instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig 45                                                                                                                                                                                                                                                                     //    (5482)
callsub collectfees_20                                                                                                                                                                                                                                                           //    (5484)  contracts_unified/core/methods/settle.py                   373     collect_fees(seller_buy_instrument, seller_fees)
frame_dig 37                                                                                                                                                                                                                                                                     //    (5487)                                                             376     buyer_to_repay.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5489)                                                                     Int(0)
>                                                                                                                                                                                                                                                                                //    (5490)                                                                     buyer_to_repay.get() > Int(0)
bnz settle_42_l7                                                                                                                                                                                                                                                                 //    (5491)                                                                     If(buyer_to_repay.get() > Int(0))
settle_42_l5:                                                                                                                                                                                                                                                                    //                                                                       379     If(seller_to_repay.get() > Int(0))
frame_dig 38                                                                                                                                                                                                                                                                     //    (5494)                                                                     seller_to_repay.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5496)                                                                     Int(0)
>                                                                                                                                                                                                                                                                                //    (5497)                                                                     seller_to_repay.get() > Int(0)
bz settle_42_l12                                                                                                                                                                                                                                                                 //    (5498)                                                                     If(seller_to_repay.get() > Int(0))
frame_dig 6                                                                                                                                                                                                                                                                      //    (5501)  contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
frame_dig 31                                                                                                                                                                                                                                                                     //    (5503)
frame_dig 38                                                                                                                                                                                                                                                                     //    (5505)
callsub performpoolmove_14                                                                                                                                                                                                                                                       //    (5507)  contracts_unified/core/methods/settle.py                   380     perform_pool_move(sell_account, seller_buy_instrument, seller_to_repay)
b settle_42_l12                                                                                                                                                                                                                                                                  //    (5510)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
settle_42_l7:                                                                                                                                                                                                                                                                    //            contracts_unified/core/methods/settle.py                   376     If(buyer_to_repay.get() > Int(0))
frame_dig -5                                                                                                                                                                                                                                                                     //    (5513)  contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
frame_dig 29                                                                                                                                                                                                                                                                     //    (5515)
frame_dig 37                                                                                                                                                                                                                                                                     //    (5517)
callsub performpoolmove_14                                                                                                                                                                                                                                                       //    (5519)  contracts_unified/core/methods/settle.py                   377     perform_pool_move(buy_account, buyer_buy_instrument, buyer_to_repay)
b settle_42_l5                                                                                                                                                                                                                                                                   //    (5522)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
settle_42_l8:                                                                                                                                                                                                                                                                    //            contracts_unified/core/methods/settle.py                   360     If(seller_to_borrow.get() > Int(0))
frame_dig 36                                                                                                                                                                                                                                                                     //    (5525)                                                             361     seller_to_borrow.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (5527)                                                                     signed_neg(seller_to_borrow.get())
frame_bury 43                                                                                                                                                                                                                                                                    //    (5530)                                                                     neg_borrow.set(signed_neg(seller_to_borrow.get()))
frame_dig 6                                                                                                                                                                                                                                                                      //    (5532)  contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
frame_dig 32                                                                                                                                                                                                                                                                     //    (5534)
frame_dig 43                                                                                                                                                                                                                                                                     //    (5536)
callsub performpoolmove_14                                                                                                                                                                                                                                                       //    (5538)  contracts_unified/core/methods/settle.py                   362     perform_pool_move(sell_account, seller_sell_instrument, neg_borrow)
b settle_42_l4                                                                                                                                                                                                                                                                   //    (5541)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
settle_42_l9:                                                                                                                                                                                                                                                                    //            contracts_unified/core/methods/settle.py                   356     If(buyer_to_borrow.get() > Int(0))
frame_dig 35                                                                                                                                                                                                                                                                     //    (5544)                                                             357     buyer_to_borrow.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (5546)                                                                     signed_neg(buyer_to_borrow.get())
frame_bury 43                                                                                                                                                                                                                                                                    //    (5549)                                                                     neg_borrow.set(signed_neg(buyer_to_borrow.get()))
frame_dig -5                                                                                                                                                                                                                                                                     //    (5551)  contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
frame_dig 30                                                                                                                                                                                                                                                                     //    (5553)
frame_dig 43                                                                                                                                                                                                                                                                     //    (5555)
callsub performpoolmove_14                                                                                                                                                                                                                                                       //    (5557)  contracts_unified/core/methods/settle.py                   358     perform_pool_move(buy_account, buyer_sell_instrument, neg_borrow)
b settle_42_l3                                                                                                                                                                                                                                                                   //    (5560)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
settle_42_l10:                                                                                                                                                                                                                                                                   //            contracts_unified/core/methods/settle.py                   351     If(seller_negative_margin.get())
frame_dig 6                                                                                                                                                                                                                                                                      //    (5563)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (5565)
callsub healthcheck_16                                                                                                                                                                                                                                                           //    (5567)  contracts_unified/core/methods/settle.py                   352     health_check(sell_account, abi_false)
frame_bury 48                                                                                                                                                                                                                                                                    //    (5570)                                                                     seller_old_health.set(cast(abi.ReturnedValue, health_check(sell_account, abi_false)))
b settle_42_l2                                                                                                                                                                                                                                                                   //    (5572)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
settle_42_l11:                                                                                                                                                                                                                                                                   //            contracts_unified/core/methods/settle.py                   347     If(buyer_negative_margin.get())
frame_dig -5                                                                                                                                                                                                                                                                     //    (5575)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (5577)
callsub healthcheck_16                                                                                                                                                                                                                                                           //    (5579)  contracts_unified/core/methods/settle.py                   348     health_check(buy_account, abi_false)
frame_bury 46                                                                                                                                                                                                                                                                    //    (5582)                                                                     buyer_old_health.set(cast(abi.ReturnedValue, health_check(buy_account, abi_false)))
b settle_42_l1                                                                                                                                                                                                                                                                   //    (5584)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
settle_42_l12:                                                                                                                                                                                                                                                                   //            contracts_unified/core/methods/settle.py                   379     If(seller_to_repay.get() > Int(0))
frame_dig -5                                                                                                                                                                                                                                                                     //    (5587)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (5589)
callsub healthcheck_16                                                                                                                                                                                                                                                           //    (5591)  contracts_unified/core/methods/settle.py                   384     health_check(buy_account, abi_false)
frame_bury 47                                                                                                                                                                                                                                                                    //    (5594)                                                                     buyer_health.set(cast(abi.ReturnedValue, health_check(buy_account, abi_false)))
frame_dig 47                                                                                                                                                                                                                                                                     //    (5596)                                                             385     buyer_health.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (5598)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (5599)                                                                     value & Int(9223372036854775808)
!                                                                                                                                                                                                                                                                                //    (5600)  contracts_unified/core/methods/settle.py                   385     Not(signed_ltz(buyer_health.get()))
frame_dig 50                                                                                                                                                                                                                                                                     //    (5601)                                                                     buyer_negative_margin.get()
frame_dig 47                                                                                                                                                                                                                                                                     //    (5603)                                                                     buyer_health.get()
frame_dig 46                                                                                                                                                                                                                                                                     //    (5605)                                                                     buyer_old_health.get()
callsub signedgte_11                                                                                                                                                                                                                                                             //    (5607)                                                                     signed_gte(buyer_health.get(), buyer_old_health.get())
&&                                                                                                                                                                                                                                                                               //    (5610)                                                                     And(buyer_negative_margin.get(), signed_gte(buyer_health.get(), buyer_old_health.get()))
||                                                                                                                                                                                                                                                                               //    (5611)                                                                     Or(Not(signed_ltz(buyer_health.get())), And(buyer_negative_margin.get(), signed_gte(buyer_health.get(), buyer_old_health.get())))
assert                                                                                                                                                                                                                                                                           //    (5612)                                                                     Assert(Or(Not(signed_ltz(buyer_health.get())), And(buyer_negative_margin.get(), signed_gte(buyer_health.get(), buyer_old_health.get()))))
frame_dig 6                                                                                                                                                                                                                                                                      //    (5613)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (5615)
callsub healthcheck_16                                                                                                                                                                                                                                                           //    (5617)  contracts_unified/core/methods/settle.py                   386     health_check(sell_account, abi_false)
frame_bury 49                                                                                                                                                                                                                                                                    //    (5620)                                                                     seller_health.set(cast(abi.ReturnedValue, health_check(sell_account, abi_false)))
frame_dig 49                                                                                                                                                                                                                                                                     //    (5622)                                                             387     seller_health.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (5624)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (5625)                                                                     value & Int(9223372036854775808)
!                                                                                                                                                                                                                                                                                //    (5626)  contracts_unified/core/methods/settle.py                   387     Not(signed_ltz(seller_health.get()))
frame_dig 51                                                                                                                                                                                                                                                                     //    (5627)                                                                     seller_negative_margin.get()
frame_dig 49                                                                                                                                                                                                                                                                     //    (5629)                                                                     seller_health.get()
frame_dig 48                                                                                                                                                                                                                                                                     //    (5631)                                                                     seller_old_health.get()
callsub signedgte_11                                                                                                                                                                                                                                                             //    (5633)                                                                     signed_gte(seller_health.get(), seller_old_health.get())
&&                                                                                                                                                                                                                                                                               //    (5636)                                                                     And(seller_negative_margin.get(), signed_gte(seller_health.get(), seller_old_health.get()))
||                                                                                                                                                                                                                                                                               //    (5637)                                                                     Or(Not(signed_ltz(seller_health.get())), And(seller_negative_margin.get(), signed_gte(seller_health.get(), seller_old_health.get())))
assert                                                                                                                                                                                                                                                                           //    (5638)                                                                     Assert(Or(Not(signed_ltz(seller_health.get())), And(seller_negative_margin.get(), signed_gte(seller_health.get(), seller_old_health.get()))))
retsub                                                                                                                                                                                                                                                                           //    (5639)                                                             102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/methods/update_instrument.py        53      def update_instrument(info: UpdateInstrumentInfo, opup_budget: Amount) -> Expr:
// update_instrument                                                                                                                                                                                                                                                             //
updateinstrument_43:                                                                                                                                                                                                                                                             //
proto 2 0                                                                                                                                                                                                                                                                        //    (5640)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5643)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (5644)  contracts_unified/core/methods/update_instrument.py        53      def update_instrument(info: UpdateInstrumentInfo, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (5645)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5646)
dupn 13                                                                                                                                                                                                                                                                          //    (5647)  contracts_unified/core/methods/update_instrument.py        53      def update_instrument(info: UpdateInstrumentInfo, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (5649)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5650)
dupn 3                                                                                                                                                                                                                                                                           //    (5651)  contracts_unified/core/methods/update_instrument.py        53      def update_instrument(info: UpdateInstrumentInfo, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (5653)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (5654)  contracts_unified/core/methods/update_instrument.py        53      def update_instrument(info: UpdateInstrumentInfo, opup_budget: Amount) -> Expr:
frame_dig -1                                                                                                                                                                                                                                                                     //    (5655)                                                             91      opup_budget.get()
callsub setup_27                                                                                                                                                                                                                                                                 //    (5657)                                                                     setup(opup_budget.get())
txn Sender                                                                                                                                                                                                                                                                       //    (5660)                                                             94      Txn.sender()
bytec_2 // "q"                                                                                                                                                                                                                                                                   //    (5662)  contracts_unified/core/state_handler/global_handler.py     36      Bytes('q')
app_global_get                                                                                                                                                                                                                                                                   //    (5663)                                                             140     App.globalGet(KEY_QUANT_ADDRESS)
==                                                                                                                                                                                                                                                                               //    (5664)  contracts_unified/core/methods/update_instrument.py        94      Txn.sender() == GlobalStateHandler.get_quant_address()
assert                                                                                                                                                                                                                                                                           //    (5665)                                                                     Assert(Txn.sender() == GlobalStateHandler.get_quant_address())
bytec_3 // "i"                                                                                                                                                                                                                                                                   //    (5666)  contracts_unified/core/state_handler/global_handler.py     52      Bytes('i')
pushint 6240 // 6240                                                                                                                                                                                                                                                             //    (5667)                                                                     Int(GlobalStateHandler.instrument_size * GlobalStateHandler.max_instrument_count)
box_create                                                                                                                                                                                                                                                                       //    (5670)                                                                     App.box_create(Bytes('i'), Int(GlobalStateHandler.instrument_size * GlobalStateHandler.max_instrument_count))
pop                                                                                                                                                                                                                                                                              //    (5671)                                                                     Pop(App.box_create(Bytes('i'), Int(GlobalStateHandler.instrument_size * GlobalStateHandler.max_instrument_count)))
global LatestTimestamp                                                                                                                                                                                                                                                           //    (5672)                                                             58      Global.latest_timestamp()
bytec 12 // "t"                                                                                                                                                                                                                                                                  //    (5674)                                                             28      Bytes('t')
app_global_get                                                                                                                                                                                                                                                                   //    (5676)                                                             58      App.globalGet(KEY_INIT_TIMESTAMP)
-                                                                                                                                                                                                                                                                                //    (5677)                                                                     Global.latest_timestamp() - App.globalGet(KEY_INIT_TIMESTAMP)
frame_bury 3                                                                                                                                                                                                                                                                     //    (5678)  contracts_unified/core/methods/update_instrument.py        100     timestamp.set(GlobalStateHandler.get_relative_timestamp())
frame_dig 3                                                                                                                                                                                                                                                                      //    (5680)
intc 7 // 4294967296                                                                                                                                                                                                                                                             //    (5682)
<                                                                                                                                                                                                                                                                                //    (5684)
assert                                                                                                                                                                                                                                                                           //    (5685)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5686)                                                             103     Int(0)
frame_bury 0                                                                                                                                                                                                                                                                     //    (5687)                                                                     abi_zero.set(Int(0))
intc_3 // 1000000000000                                                                                                                                                                                                                                                          //    (5689)                                                             104     abi_rate_one.set(RATE_ONE)
frame_bury 1                                                                                                                                                                                                                                                                     //    (5690)
global ZeroAddress                                                                                                                                                                                                                                                               //    (5692)                                                             105     Global.zero_address()
frame_bury 2                                                                                                                                                                                                                                                                     //    (5694)                                                                     abi_zero_address.set(Global.zero_address())
frame_dig 2                                                                                                                                                                                                                                                                      //    (5696)
len                                                                                                                                                                                                                                                                              //    (5698)
pushint 32 // 32                                                                                                                                                                                                                                                                 //    (5699)
==                                                                                                                                                                                                                                                                               //    (5701)
assert                                                                                                                                                                                                                                                                           //    (5702)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5703)                                                             108     asset_id.set(info.asset_id)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (5705)
extract_uint64                                                                                                                                                                                                                                                                   //    (5706)
frame_bury 4                                                                                                                                                                                                                                                                     //    (5707)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5709)                                                             109     initial_haircut.set(info.initial_haircut)
pushint 9 // 9                                                                                                                                                                                                                                                                   //    (5711)
extract_uint16                                                                                                                                                                                                                                                                   //    (5713)
frame_bury 5                                                                                                                                                                                                                                                                     //    (5714)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5716)                                                             110     initial_margin.set(info.initial_margin)
pushint 11 // 11                                                                                                                                                                                                                                                                 //    (5718)
extract_uint16                                                                                                                                                                                                                                                                   //    (5720)
frame_bury 6                                                                                                                                                                                                                                                                     //    (5721)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5723)                                                             111     maintenance_haircut.set(info.maintenance_haircut)
pushint 13 // 13                                                                                                                                                                                                                                                                 //    (5725)
extract_uint16                                                                                                                                                                                                                                                                   //    (5727)
frame_bury 7                                                                                                                                                                                                                                                                     //    (5728)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5730)                                                             112     maintenance_margin.set(info.maintenance_margin)
pushint 15 // 15                                                                                                                                                                                                                                                                 //    (5732)
extract_uint16                                                                                                                                                                                                                                                                   //    (5734)
frame_bury 8                                                                                                                                                                                                                                                                     //    (5735)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5737)                                                             113     optimal_utilization.set(info.optimal_utilization)
pushint 17 // 17                                                                                                                                                                                                                                                                 //    (5739)
extract_uint16                                                                                                                                                                                                                                                                   //    (5741)
frame_bury 9                                                                                                                                                                                                                                                                     //    (5742)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5744)                                                             114     min_rate.set(info.min_rate)
pushint 19 // 19                                                                                                                                                                                                                                                                 //    (5746)
extract_uint64                                                                                                                                                                                                                                                                   //    (5748)
frame_bury 10                                                                                                                                                                                                                                                                    //    (5749)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5751)                                                             115     opt_rate.set(info.opt_rate)
pushint 27 // 27                                                                                                                                                                                                                                                                 //    (5753)
extract_uint64                                                                                                                                                                                                                                                                   //    (5755)
frame_bury 11                                                                                                                                                                                                                                                                    //    (5756)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5758)                                                             116     max_rate.set(info.max_rate)
pushint 35 // 35                                                                                                                                                                                                                                                                 //    (5760)
extract_uint64                                                                                                                                                                                                                                                                   //    (5762)
frame_bury 12                                                                                                                                                                                                                                                                    //    (5763)
frame_dig -2                                                                                                                                                                                                                                                                     //    (5765)                                                             119     instrument_id.set(info.instrument_id)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5767)
getbyte                                                                                                                                                                                                                                                                          //    (5768)
frame_bury 18                                                                                                                                                                                                                                                                    //    (5769)
bytec_1 // "c"                                                                                                                                                                                                                                                                   //    (5771)  contracts_unified/core/state_handler/global_handler.py     29      Bytes('c')
app_global_get                                                                                                                                                                                                                                                                   //    (5772)                                                             70      App.globalGet(KEY_INSTRUMENT_COUNT)
frame_bury 19                                                                                                                                                                                                                                                                    //    (5773)  contracts_unified/core/methods/update_instrument.py        120     instrument_count.set(GlobalStateHandler.get_instrument_count())
frame_dig 18                                                                                                                                                                                                                                                                     //    (5775)                                                             121     instrument_id.get()
frame_dig 19                                                                                                                                                                                                                                                                     //    (5777)                                                                     instrument_count.get()
<=                                                                                                                                                                                                                                                                               //    (5779)                                                                     instrument_id.get() <= instrument_count.get()
assert                                                                                                                                                                                                                                                                           //    (5780)                                                                     Assert(instrument_id.get() <= instrument_count.get())
frame_dig 18                                                                                                                                                                                                                                                                     //    (5781)                                                             124     instrument_id.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5783)                                                                     Int(0)
==                                                                                                                                                                                                                                                                               //    (5784)                                                                     instrument_id.get() == Int(0)
bnz updateinstrument_43_l6                                                                                                                                                                                                                                                       //    (5785)                                                                     If(instrument_id.get() == Int(0))
updateinstrument_43_l1:                                                                                                                                                                                                                                                          //                                                                       128     If(instrument_id.get() == instrument_count.get())
frame_dig 18                                                                                                                                                                                                                                                                     //    (5788)                                                                     instrument_id.get()
frame_dig 19                                                                                                                                                                                                                                                                     //    (5790)                                                                     instrument_count.get()
==                                                                                                                                                                                                                                                                               //    (5792)                                                                     instrument_id.get() == instrument_count.get()
bnz updateinstrument_43_l3                                                                                                                                                                                                                                                       //    (5793)                                                                     If(instrument_id.get() == instrument_count.get())
frame_dig 2                                                                                                                                                                                                                                                                      //    (5796)  contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
frame_dig 18                                                                                                                                                                                                                                                                     //    (5798)
frame_dig 0                                                                                                                                                                                                                                                                      //    (5800)
callsub performpoolmove_14                                                                                                                                                                                                                                                       //    (5802)  contracts_unified/core/methods/update_instrument.py        144     perform_pool_move(abi_zero_address, instrument_id, abi_zero)
frame_dig 18                                                                                                                                                                                                                                                                     //    (5805)  contracts_unified/core/state_handler/global_handler.py     202     def get_instrument(instrument_id: InstrumentId, *, output: InstrumentListElement) -> Expr:
callsub getinstrument_2                                                                                                                                                                                                                                                          //    (5807)  contracts_unified/core/methods/update_instrument.py        146     GlobalStateHandler.get_instrument(instrument_id)
frame_bury 17                                                                                                                                                                                                                                                                    //    (5810)                                                                     entry.set(cast(abi.ReturnedValue, GlobalStateHandler.get_instrument(instrument_id)))
frame_dig 17                                                                                                                                                                                                                                                                     //    (5812)                                                             148     entry.borrow_index.store_into(borrow_index)
pushint 20 // 20                                                                                                                                                                                                                                                                 //    (5814)
extract_uint64                                                                                                                                                                                                                                                                   //    (5816)
frame_bury 13                                                                                                                                                                                                                                                                    //    (5817)
frame_dig 17                                                                                                                                                                                                                                                                     //    (5819)                                                             149     entry.lend_index.store_into(lend_index)
pushint 28 // 28                                                                                                                                                                                                                                                                 //    (5821)
extract_uint64                                                                                                                                                                                                                                                                   //    (5823)
frame_bury 14                                                                                                                                                                                                                                                                    //    (5824)
frame_dig 17                                                                                                                                                                                                                                                                     //    (5826)                                                             150     entry.borrowed.store_into(borrowed)
pushint 62 // 62                                                                                                                                                                                                                                                                 //    (5828)
extract_uint64                                                                                                                                                                                                                                                                   //    (5830)
frame_bury 15                                                                                                                                                                                                                                                                    //    (5831)
frame_dig 17                                                                                                                                                                                                                                                                     //    (5833)                                                             151     entry.liquidity.store_into(liquidity)
pushint 70 // 70                                                                                                                                                                                                                                                                 //    (5835)
extract_uint64                                                                                                                                                                                                                                                                   //    (5837)
frame_bury 16                                                                                                                                                                                                                                                                    //    (5838)
b updateinstrument_43_l7                                                                                                                                                                                                                                                         //    (5840)                                                             128     If(instrument_id.get() == instrument_count.get())
updateinstrument_43_l3:                                                                                                                                                                                                                                                          //                                                                       131     If(asset_id.get() != Int(0), cast(Expr, inner_asset_opt_in(asset_id)))
frame_dig 4                                                                                                                                                                                                                                                                      //    (5843)                                                                     asset_id.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5845)                                                                     Int(0)
!=                                                                                                                                                                                                                                                                               //    (5846)                                                                     asset_id.get() != Int(0)
bnz updateinstrument_43_l5                                                                                                                                                                                                                                                       //    (5847)                                                                     If(asset_id.get() != Int(0), cast(Expr, inner_asset_opt_in(asset_id)))
updateinstrument_43_l4:                                                                                                                                                                                                                                                          //
frame_dig 1                                                                                                                                                                                                                                                                      //    (5850)                                                             134     borrow_index.set(abi_rate_one)
frame_bury 13                                                                                                                                                                                                                                                                    //    (5852)
frame_dig 1                                                                                                                                                                                                                                                                      //    (5854)                                                             135     lend_index.set(abi_rate_one)
frame_bury 14                                                                                                                                                                                                                                                                    //    (5856)
frame_dig 0                                                                                                                                                                                                                                                                      //    (5858)                                                             136     borrowed.set(abi_zero)
frame_bury 15                                                                                                                                                                                                                                                                    //    (5860)
frame_dig 0                                                                                                                                                                                                                                                                      //    (5862)                                                             137     liquidity.set(abi_zero)
frame_bury 16                                                                                                                                                                                                                                                                    //    (5864)
bytec_1 // "c"                                                                                                                                                                                                                                                                   //    (5866)  contracts_unified/core/state_handler/global_handler.py     29      Bytes('c')
frame_dig 19                                                                                                                                                                                                                                                                     //    (5867)  contracts_unified/core/methods/update_instrument.py        140     instrument_count.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (5869)                                                                     Int(1)
+                                                                                                                                                                                                                                                                                //    (5870)                                                                     instrument_count.get() + Int(1)
app_global_put                                                                                                                                                                                                                                                                   //    (5871)  contracts_unified/core/state_handler/global_handler.py     76      App.globalPut(KEY_INSTRUMENT_COUNT, instrument_count)
b updateinstrument_43_l7                                                                                                                                                                                                                                                         //    (5872)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
updateinstrument_43_l5:                                                                                                                                                                                                                                                          //            contracts_unified/core/methods/update_instrument.py        131     If(asset_id.get() != Int(0), cast(Expr, inner_asset_opt_in(asset_id)))
itxn_begin                                                                                                                                                                                                                                                                       //    (5875)                                                             42      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.xfer_asset: asset_id.get(), TxnField.asset_receiver: Global.current_application_address(), TxnField.asset_amount: Int(0), TxnField.fee: Int(0)})
pushint 4 // axfer                                                                                                                                                                                                                                                               //    (5876)
itxn_field TypeEnum                                                                                                                                                                                                                                                              //    (5878)
frame_dig 4                                                                                                                                                                                                                                                                      //    (5880)                                                             45      asset_id.get()
itxn_field XferAsset                                                                                                                                                                                                                                                             //    (5882)                                                             42      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.xfer_asset: asset_id.get(), TxnField.asset_receiver: Global.current_application_address(), TxnField.asset_amount: Int(0), TxnField.fee: Int(0)})
global CurrentApplicationAddress                                                                                                                                                                                                                                                 //    (5884)                                                             46      Global.current_application_address()
itxn_field AssetReceiver                                                                                                                                                                                                                                                         //    (5886)                                                             42      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.xfer_asset: asset_id.get(), TxnField.asset_receiver: Global.current_application_address(), TxnField.asset_amount: Int(0), TxnField.fee: Int(0)})
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5888)                                                             47      Int(0)
itxn_field AssetAmount                                                                                                                                                                                                                                                           //    (5889)                                                             42      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.xfer_asset: asset_id.get(), TxnField.asset_receiver: Global.current_application_address(), TxnField.asset_amount: Int(0), TxnField.fee: Int(0)})
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5891)                                                             48      Int(0)
itxn_field Fee                                                                                                                                                                                                                                                                   //    (5892)                                                             42      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.xfer_asset: asset_id.get(), TxnField.asset_receiver: Global.current_application_address(), TxnField.asset_amount: Int(0), TxnField.fee: Int(0)})
itxn_submit                                                                                                                                                                                                                                                                      //    (5894)
b updateinstrument_43_l4                                                                                                                                                                                                                                                         //    (5895)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
updateinstrument_43_l6:                                                                                                                                                                                                                                                          //            contracts_unified/core/methods/update_instrument.py        124     If(instrument_id.get() == Int(0))
frame_dig 4                                                                                                                                                                                                                                                                      //    (5898)                                                             125     asset_id.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (5900)                                                                     Int(0)
==                                                                                                                                                                                                                                                                               //    (5901)                                                                     asset_id.get() == Int(0)
assert                                                                                                                                                                                                                                                                           //    (5902)                                                                     Assert(asset_id.get() == Int(0))
b updateinstrument_43_l1                                                                                                                                                                                                                                                         //    (5903)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
updateinstrument_43_l7:                                                                                                                                                                                                                                                          //            contracts_unified/core/methods/update_instrument.py        128     If(instrument_id.get() == instrument_count.get())
frame_dig 4                                                                                                                                                                                                                                                                      //    (5906)                                                             155     entry.set(asset_id, initial_haircut, initial_margin, maintenance_haircut, maintenance_margin, timestamp, borrow_index, lend_index, optimal_utilization, min_rate, opt_rate, max_rate, borrowed, liquidity)
itob                                                                                                                                                                                                                                                                             //    (5908)
frame_dig 5                                                                                                                                                                                                                                                                      //    (5909)
itob                                                                                                                                                                                                                                                                             //    (5911)
extract 6 0                                                                                                                                                                                                                                                                      //    (5912)
concat                                                                                                                                                                                                                                                                           //    (5915)
frame_dig 6                                                                                                                                                                                                                                                                      //    (5916)
itob                                                                                                                                                                                                                                                                             //    (5918)
extract 6 0                                                                                                                                                                                                                                                                      //    (5919)
concat                                                                                                                                                                                                                                                                           //    (5922)
frame_dig 7                                                                                                                                                                                                                                                                      //    (5923)
itob                                                                                                                                                                                                                                                                             //    (5925)
extract 6 0                                                                                                                                                                                                                                                                      //    (5926)
concat                                                                                                                                                                                                                                                                           //    (5929)
frame_dig 8                                                                                                                                                                                                                                                                      //    (5930)
itob                                                                                                                                                                                                                                                                             //    (5932)
extract 6 0                                                                                                                                                                                                                                                                      //    (5933)
concat                                                                                                                                                                                                                                                                           //    (5936)
frame_dig 3                                                                                                                                                                                                                                                                      //    (5937)
itob                                                                                                                                                                                                                                                                             //    (5939)
extract 4 0                                                                                                                                                                                                                                                                      //    (5940)
concat                                                                                                                                                                                                                                                                           //    (5943)
frame_dig 13                                                                                                                                                                                                                                                                     //    (5944)
itob                                                                                                                                                                                                                                                                             //    (5946)
concat                                                                                                                                                                                                                                                                           //    (5947)
frame_dig 14                                                                                                                                                                                                                                                                     //    (5948)
itob                                                                                                                                                                                                                                                                             //    (5950)
concat                                                                                                                                                                                                                                                                           //    (5951)
frame_dig 9                                                                                                                                                                                                                                                                      //    (5952)
itob                                                                                                                                                                                                                                                                             //    (5954)
extract 6 0                                                                                                                                                                                                                                                                      //    (5955)
concat                                                                                                                                                                                                                                                                           //    (5958)
frame_dig 10                                                                                                                                                                                                                                                                     //    (5959)
itob                                                                                                                                                                                                                                                                             //    (5961)
concat                                                                                                                                                                                                                                                                           //    (5962)
frame_dig 11                                                                                                                                                                                                                                                                     //    (5963)
itob                                                                                                                                                                                                                                                                             //    (5965)
concat                                                                                                                                                                                                                                                                           //    (5966)
frame_dig 12                                                                                                                                                                                                                                                                     //    (5967)
itob                                                                                                                                                                                                                                                                             //    (5969)
concat                                                                                                                                                                                                                                                                           //    (5970)
frame_dig 15                                                                                                                                                                                                                                                                     //    (5971)
itob                                                                                                                                                                                                                                                                             //    (5973)
concat                                                                                                                                                                                                                                                                           //    (5974)
frame_dig 16                                                                                                                                                                                                                                                                     //    (5975)
itob                                                                                                                                                                                                                                                                             //    (5977)
concat                                                                                                                                                                                                                                                                           //    (5978)
frame_bury 17                                                                                                                                                                                                                                                                    //    (5979)
bytec_3 // "i"                                                                                                                                                                                                                                                                   //    (5981)  contracts_unified/core/state_handler/global_handler.py     221     Bytes('i')
frame_dig 18                                                                                                                                                                                                                                                                     //    (5982)                                                                     instrument_id.get()
pushint 78 // 78                                                                                                                                                                                                                                                                 //    (5984)                                                                     Int(GlobalStateHandler.instrument_size)
*                                                                                                                                                                                                                                                                                //    (5986)                                                                     instrument_id.get() * Int(GlobalStateHandler.instrument_size)
frame_dig 17                                                                                                                                                                                                                                                                     //    (5987)                                                                     new_entry.encode()
box_replace                                                                                                                                                                                                                                                                      //    (5989)                                                                     App.box_replace(Bytes('i'), instrument_id.get() * Int(GlobalStateHandler.instrument_size), new_entry.encode())
callsub ensurembrfund_1                                                                                                                                                                                                                                                          //    (5990)  contracts_unified/core/methods/update_instrument.py        176     GlobalStateHandler.ensure_mbr_fund()
retsub                                                                                                                                                                                                                                                                           //    (5993)                                                             53      def update_instrument(info: UpdateInstrumentInfo, opup_budget: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/methods/update_parameter.py         33      def update_parameter(key_to_update: abi.DynamicBytes, updated_value: abi.DynamicBytes) -> Expr:
// update_parameter                                                                                                                                                                                                                                                              //
updateparameter_44:                                                                                                                                                                                                                                                              //
proto 2 0                                                                                                                                                                                                                                                                        //    (5994)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (5997)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (5998)  contracts_unified/core/methods/update_parameter.py         33      def update_parameter(key_to_update: abi.DynamicBytes, updated_value: abi.DynamicBytes) -> Expr:
frame_dig -2                                                                                                                                                                                                                                                                     //    (5999)                                                             50      key_to_update.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (6001)
store 0                                                                                                                                                                                                                                                                          //    (6004)                                                                     key.store(key_to_update.get())
frame_dig -1                                                                                                                                                                                                                                                                     //    (6006)                                                             51      updated_value.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (6008)
store 1                                                                                                                                                                                                                                                                          //    (6011)                                                                     value.store(updated_value.get())
load 0                                                                                                                                                                                                                                                                           //    (6013)                                                             52      key.load()
bytec 8 // "l"                                                                                                                                                                                                                                                                   //    (6015)  contracts_unified/core/state_handler/global_handler.py     33      Bytes('l')
==                                                                                                                                                                                                                                                                               //    (6017)  contracts_unified/core/methods/update_parameter.py         52      key.load() == KEY_LIQUIDATION_FACTORS
bnz updateparameter_44_l16                                                                                                                                                                                                                                                       //    (6018)                                                                     If(key.load() == KEY_LIQUIDATION_FACTORS)
global CreatorAddress                                                                                                                                                                                                                                                            //    (6021)                                                             56      Global.creator_address()
txn Sender                                                                                                                                                                                                                                                                       //    (6023)                                                                     Txn.sender()
==                                                                                                                                                                                                                                                                               //    (6025)                                                                     Global.creator_address() == Txn.sender()
assert                                                                                                                                                                                                                                                                           //    (6026)                                                                     Assert(Global.creator_address() == Txn.sender())
load 0                                                                                                                                                                                                                                                                           //    (6027)                                                             58      key.load()
bytec 4 // "p"                                                                                                                                                                                                                                                                   //    (6029)  contracts_unified/core/state_handler/global_handler.py     31      Bytes('p')
==                                                                                                                                                                                                                                                                               //    (6031)  contracts_unified/core/methods/update_parameter.py         58      key.load() == KEY_PRICECASTER_ID
bnz updateparameter_44_l15                                                                                                                                                                                                                                                       //    (6032)
load 0                                                                                                                                                                                                                                                                           //    (6035)                                                             59      key.load()
bytec 7 // "b"                                                                                                                                                                                                                                                                   //    (6037)  contracts_unified/core/state_handler/global_handler.py     32      Bytes('b')
==                                                                                                                                                                                                                                                                               //    (6039)  contracts_unified/core/methods/update_parameter.py         59      key.load() == KEY_WORMHOLE_BRIDGE_ID
bnz updateparameter_44_l14                                                                                                                                                                                                                                                       //    (6040)
load 0                                                                                                                                                                                                                                                                           //    (6043)                                                             60      key.load()
bytec 6 // "s"                                                                                                                                                                                                                                                                   //    (6045)  contracts_unified/core/state_handler/global_handler.py     34      Bytes('s')
==                                                                                                                                                                                                                                                                               //    (6047)  contracts_unified/core/methods/update_parameter.py         60      key.load() == KEY_SIGNATURE_VALIDATOR
bnz updateparameter_44_l13                                                                                                                                                                                                                                                       //    (6048)
load 0                                                                                                                                                                                                                                                                           //    (6051)                                                             61      key.load()
bytec_2 // "q"                                                                                                                                                                                                                                                                   //    (6053)  contracts_unified/core/state_handler/global_handler.py     36      Bytes('q')
==                                                                                                                                                                                                                                                                               //    (6054)  contracts_unified/core/methods/update_parameter.py         61      key.load() == KEY_QUANT_ADDRESS
bnz updateparameter_44_l12                                                                                                                                                                                                                                                       //    (6055)
load 0                                                                                                                                                                                                                                                                           //    (6058)                                                             62      key.load()
bytec 5 // "f"                                                                                                                                                                                                                                                                   //    (6060)  contracts_unified/core/state_handler/global_handler.py     38      Bytes('f')
==                                                                                                                                                                                                                                                                               //    (6062)  contracts_unified/core/methods/update_parameter.py         62      key.load() == KEY_FEE_TARGET
bnz updateparameter_44_l11                                                                                                                                                                                                                                                       //    (6063)
load 0                                                                                                                                                                                                                                                                           //    (6066)                                                             63      key.load()
bytec 9 // "w"                                                                                                                                                                                                                                                                   //    (6068)  contracts_unified/core/state_handler/global_handler.py     35      Bytes('w')
==                                                                                                                                                                                                                                                                               //    (6070)  contracts_unified/core/methods/update_parameter.py         63      key.load() == KEY_WITHDRAW_BUFFER
bnz updateparameter_44_l10                                                                                                                                                                                                                                                       //    (6071)
load 0                                                                                                                                                                                                                                                                           //    (6074)                                                             64      key.load()
bytec 10 // "o"                                                                                                                                                                                                                                                                  //    (6076)  contracts_unified/core/state_handler/global_handler.py     37      Bytes('o')
==                                                                                                                                                                                                                                                                               //    (6078)  contracts_unified/core/methods/update_parameter.py         64      key.load() == KEY_OPERATOR_ADDRESS
bnz updateparameter_44_l9                                                                                                                                                                                                                                                        //    (6079)
err                                                                                                                                                                                                                                                                              //    (6082)                                                             57      Cond([key.load() == KEY_PRICECASTER_ID, GlobalStateHandler.set_pricecaster_id(value.load())], [key.load() == KEY_WORMHOLE_BRIDGE_ID, GlobalStateHandler.set_wormhole_bridge_id(value.load())], [key.load() == KEY_SIGNATURE_VALIDATOR, GlobalStateHandler.set_signature_validator(value.load())], [key.load() == KEY_QUANT_ADDRESS, GlobalStateHandler.set_quant_address(value.load())], [key.load() == KEY_FEE_TARGET, GlobalStateHandler.set_fee_target(value.load())], [key.load() == KEY_WITHDRAW_BUFFER, GlobalStateHandler.set_withdraw_buffer(value.load())], [key.load() == KEY_OPERATOR_ADDRESS, GlobalStateHandler.set_operator_address(value.load())])
updateparameter_44_l9:                                                                                                                                                                                                                                                           //                                                                       64      key.load() == KEY_OPERATOR_ADDRESS
bytec 10 // "o"                                                                                                                                                                                                                                                                  //    (6083)  contracts_unified/core/state_handler/global_handler.py     37      Bytes('o')
load 1                                                                                                                                                                                                                                                                           //    (6085)  contracts_unified/core/methods/update_parameter.py         64      value.load()
callsub setaddress_0                                                                                                                                                                                                                                                             //    (6087)  contracts_unified/core/state_handler/global_handler.py     134     GlobalStateHandler.set_address(KEY_OPERATOR_ADDRESS, operator_address)
b updateparameter_44_l17                                                                                                                                                                                                                                                         //    (6090)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
updateparameter_44_l10:                                                                                                                                                                                                                                                          //            contracts_unified/core/methods/update_parameter.py         63      key.load() == KEY_WITHDRAW_BUFFER
bytec 9 // "w"                                                                                                                                                                                                                                                                   //    (6093)  contracts_unified/core/state_handler/global_handler.py     35      Bytes('w')
load 1                                                                                                                                                                                                                                                                           //    (6095)  contracts_unified/core/methods/update_parameter.py         63      value.load()
callsub setaddress_0                                                                                                                                                                                                                                                             //    (6097)  contracts_unified/core/state_handler/global_handler.py     170     GlobalStateHandler.set_address(KEY_WITHDRAW_BUFFER, withdraw_buffer)
b updateparameter_44_l17                                                                                                                                                                                                                                                         //    (6100)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
updateparameter_44_l11:                                                                                                                                                                                                                                                          //            contracts_unified/core/methods/update_parameter.py         62      key.load() == KEY_FEE_TARGET
bytec 5 // "f"                                                                                                                                                                                                                                                                   //    (6103)  contracts_unified/core/state_handler/global_handler.py     38      Bytes('f')
load 1                                                                                                                                                                                                                                                                           //    (6105)  contracts_unified/core/methods/update_parameter.py         62      value.load()
callsub setaddress_0                                                                                                                                                                                                                                                             //    (6107)  contracts_unified/core/state_handler/global_handler.py     158     GlobalStateHandler.set_address(KEY_FEE_TARGET, fee_target_address)
b updateparameter_44_l17                                                                                                                                                                                                                                                         //    (6110)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
updateparameter_44_l12:                                                                                                                                                                                                                                                          //            contracts_unified/core/methods/update_parameter.py         61      key.load() == KEY_QUANT_ADDRESS
bytec_2 // "q"                                                                                                                                                                                                                                                                   //    (6113)  contracts_unified/core/state_handler/global_handler.py     36      Bytes('q')
load 1                                                                                                                                                                                                                                                                           //    (6114)  contracts_unified/core/methods/update_parameter.py         61      value.load()
callsub setaddress_0                                                                                                                                                                                                                                                             //    (6116)  contracts_unified/core/state_handler/global_handler.py     146     GlobalStateHandler.set_address(KEY_QUANT_ADDRESS, quant_address)
b updateparameter_44_l17                                                                                                                                                                                                                                                         //    (6119)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
updateparameter_44_l13:                                                                                                                                                                                                                                                          //            contracts_unified/core/methods/update_parameter.py         60      key.load() == KEY_SIGNATURE_VALIDATOR
bytec 6 // "s"                                                                                                                                                                                                                                                                   //    (6122)  contracts_unified/core/state_handler/global_handler.py     34      Bytes('s')
load 1                                                                                                                                                                                                                                                                           //    (6124)  contracts_unified/core/methods/update_parameter.py         60      value.load()
callsub setaddress_0                                                                                                                                                                                                                                                             //    (6126)  contracts_unified/core/state_handler/global_handler.py     122     GlobalStateHandler.set_address(KEY_SIGNATURE_VALIDATOR, signature_validator)
b updateparameter_44_l17                                                                                                                                                                                                                                                         //    (6129)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
updateparameter_44_l14:                                                                                                                                                                                                                                                          //            contracts_unified/core/methods/update_parameter.py         59      key.load() == KEY_WORMHOLE_BRIDGE_ID
bytec 7 // "b"                                                                                                                                                                                                                                                                   //    (6132)  contracts_unified/core/state_handler/global_handler.py     32      Bytes('b')
load 1                                                                                                                                                                                                                                                                           //    (6134)  contracts_unified/core/methods/update_parameter.py         59      value.load()
btoi                                                                                                                                                                                                                                                                             //    (6136)  contracts_unified/core/state_handler/global_handler.py     100     Btoi(wormhole_bridge_id)
app_global_put                                                                                                                                                                                                                                                                   //    (6137)                                                                     App.globalPut(KEY_WORMHOLE_BRIDGE_ID, Btoi(wormhole_bridge_id))
b updateparameter_44_l17                                                                                                                                                                                                                                                         //    (6138)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
updateparameter_44_l15:                                                                                                                                                                                                                                                          //            contracts_unified/core/methods/update_parameter.py         58      key.load() == KEY_PRICECASTER_ID
bytec 4 // "p"                                                                                                                                                                                                                                                                   //    (6141)  contracts_unified/core/state_handler/global_handler.py     31      Bytes('p')
load 1                                                                                                                                                                                                                                                                           //    (6143)  contracts_unified/core/methods/update_parameter.py         58      value.load()
btoi                                                                                                                                                                                                                                                                             //    (6145)  contracts_unified/core/state_handler/global_handler.py     88      Btoi(pricecaster_id)
app_global_put                                                                                                                                                                                                                                                                   //    (6146)                                                                     App.globalPut(KEY_PRICECASTER_ID, Btoi(pricecaster_id))
b updateparameter_44_l17                                                                                                                                                                                                                                                         //    (6147)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
updateparameter_44_l16:                                                                                                                                                                                                                                                          //            contracts_unified/core/methods/update_parameter.py         52      If(key.load() == KEY_LIQUIDATION_FACTORS)
bytec_2 // "q"                                                                                                                                                                                                                                                                   //    (6150)  contracts_unified/core/state_handler/global_handler.py     36      Bytes('q')
app_global_get                                                                                                                                                                                                                                                                   //    (6151)                                                             140     App.globalGet(KEY_QUANT_ADDRESS)
txn Sender                                                                                                                                                                                                                                                                       //    (6152)  contracts_unified/core/methods/update_parameter.py         53      Txn.sender()
==                                                                                                                                                                                                                                                                               //    (6154)                                                                     GlobalStateHandler.get_quant_address() == Txn.sender()
assert                                                                                                                                                                                                                                                                           //    (6155)                                                                     Assert(GlobalStateHandler.get_quant_address() == Txn.sender())
load 1                                                                                                                                                                                                                                                                           //    (6156)                                                             54      value.load()
len                                                                                                                                                                                                                                                                              //    (6158)  contracts_unified/core/state_handler/global_handler.py     196     Len(factors)
pushint 4 // 4                                                                                                                                                                                                                                                                   //    (6159)                                                                     Int(factors_size)
==                                                                                                                                                                                                                                                                               //    (6161)                                                                     Len(factors) == Int(factors_size)
assert                                                                                                                                                                                                                                                                           //    (6162)                                                                     Assert(Len(factors) == Int(factors_size))
bytec 8 // "l"                                                                                                                                                                                                                                                                   //    (6163)                                                             33      Bytes('l')
load 1                                                                                                                                                                                                                                                                           //    (6165)  contracts_unified/core/methods/update_parameter.py         54      value.load()
app_global_put                                                                                                                                                                                                                                                                   //    (6167)  contracts_unified/core/state_handler/global_handler.py     197     App.globalPut(KEY_LIQUIDATION_FACTORS, factors)
updateparameter_44_l17:                                                                                                                                                                                                                                                          //            contracts_unified/core/methods/update_parameter.py         52      If(key.load() == KEY_LIQUIDATION_FACTORS)
retsub                                                                                                                                                                                                                                                                           //    (6168)                                                             33      def update_parameter(key_to_update: abi.DynamicBytes, updated_value: abi.DynamicBytes) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/methods/withdraw.py                 50      def submit_withdraw_onchain(address: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
// submit_withdraw_onchain                                                                                                                                                                                                                                                       //
submitwithdrawonchain_45:                                                                                                                                                                                                                                                        //
proto 3 0                                                                                                                                                                                                                                                                        //    (6169)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6172)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6173)
frame_dig -2                                                                                                                                                                                                                                                                     //    (6174)  contracts_unified/core/state_handler/global_handler.py     202     def get_instrument(instrument_id: InstrumentId, *, output: InstrumentListElement) -> Expr:
callsub getinstrument_2                                                                                                                                                                                                                                                          //    (6176)  contracts_unified/core/methods/withdraw.py                 63      GlobalStateHandler.get_instrument(instrument_id)
frame_bury 1                                                                                                                                                                                                                                                                     //    (6179)                                                                     element.set(cast(abi.ReturnedValue, GlobalStateHandler.get_instrument(instrument_id)))
frame_dig 1                                                                                                                                                                                                                                                                      //    (6181)                                                             64      asset_id.set(element.asset_id)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6183)
extract_uint64                                                                                                                                                                                                                                                                   //    (6184)
frame_bury 0                                                                                                                                                                                                                                                                     //    (6185)
frame_dig 0                                                                                                                                                                                                                                                                      //    (6187)                                                             67      asset_id.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6189)                                                                     Int(0)
==                                                                                                                                                                                                                                                                               //    (6190)                                                                     asset_id.get() == Int(0)
bnz submitwithdrawonchain_45_l2                                                                                                                                                                                                                                                  //    (6191)                                                                     If(asset_id.get() == Int(0))
itxn_begin                                                                                                                                                                                                                                                                       //    (6194)                                                             80      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.xfer_asset: asset_id.get(), TxnField.asset_amount: amount.get(), TxnField.asset_receiver: address.get()})
pushint 4 // axfer                                                                                                                                                                                                                                                               //    (6195)
itxn_field TypeEnum                                                                                                                                                                                                                                                              //    (6197)
global CurrentApplicationAddress                                                                                                                                                                                                                                                 //    (6199)                                                             83      Global.current_application_address()
itxn_field Sender                                                                                                                                                                                                                                                                //    (6201)                                                             80      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.xfer_asset: asset_id.get(), TxnField.asset_amount: amount.get(), TxnField.asset_receiver: address.get()})
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6203)                                                             84      Int(0)
itxn_field Fee                                                                                                                                                                                                                                                                   //    (6204)                                                             80      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.xfer_asset: asset_id.get(), TxnField.asset_amount: amount.get(), TxnField.asset_receiver: address.get()})
frame_dig 0                                                                                                                                                                                                                                                                      //    (6206)                                                             85      asset_id.get()
itxn_field XferAsset                                                                                                                                                                                                                                                             //    (6208)                                                             80      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.xfer_asset: asset_id.get(), TxnField.asset_amount: amount.get(), TxnField.asset_receiver: address.get()})
frame_dig -1                                                                                                                                                                                                                                                                     //    (6210)                                                             86      amount.get()
itxn_field AssetAmount                                                                                                                                                                                                                                                           //    (6212)                                                             80      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.xfer_asset: asset_id.get(), TxnField.asset_amount: amount.get(), TxnField.asset_receiver: address.get()})
frame_dig -3                                                                                                                                                                                                                                                                     //    (6214)                                                             87      address.get()
itxn_field AssetReceiver                                                                                                                                                                                                                                                         //    (6216)                                                             80      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.xfer_asset: asset_id.get(), TxnField.asset_amount: amount.get(), TxnField.asset_receiver: address.get()})
itxn_submit                                                                                                                                                                                                                                                                      //    (6218)
b submitwithdrawonchain_45_l3                                                                                                                                                                                                                                                    //    (6219)                                                             67      If(asset_id.get() == Int(0))
submitwithdrawonchain_45_l2:                                                                                                                                                                                                                                                     //
itxn_begin                                                                                                                                                                                                                                                                       //    (6222)                                                             69      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.Payment, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.amount: amount.get(), TxnField.receiver: address.get()})
intc_1 // pay                                                                                                                                                                                                                                                                    //    (6223)
itxn_field TypeEnum                                                                                                                                                                                                                                                              //    (6224)
global CurrentApplicationAddress                                                                                                                                                                                                                                                 //    (6226)                                                             72      Global.current_application_address()
itxn_field Sender                                                                                                                                                                                                                                                                //    (6228)                                                             69      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.Payment, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.amount: amount.get(), TxnField.receiver: address.get()})
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6230)                                                             73      Int(0)
itxn_field Fee                                                                                                                                                                                                                                                                   //    (6231)                                                             69      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.Payment, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.amount: amount.get(), TxnField.receiver: address.get()})
frame_dig -1                                                                                                                                                                                                                                                                     //    (6233)                                                             74      amount.get()
itxn_field Amount                                                                                                                                                                                                                                                                //    (6235)                                                             69      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.Payment, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.amount: amount.get(), TxnField.receiver: address.get()})
frame_dig -3                                                                                                                                                                                                                                                                     //    (6237)                                                             75      address.get()
itxn_field Receiver                                                                                                                                                                                                                                                              //    (6239)                                                             69      InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.Payment, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.amount: amount.get(), TxnField.receiver: address.get()})
itxn_submit                                                                                                                                                                                                                                                                      //    (6241)
submitwithdrawonchain_45_l3:                                                                                                                                                                                                                                                     //                                                                       67      If(asset_id.get() == Int(0))
retsub                                                                                                                                                                                                                                                                           //    (6242)                                                             50      def submit_withdraw_onchain(address: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       95      def submit_withdraw_offchain(withdraw_buffer: abi.Address, instrument_id: InstrumentId, amount: abi.Uint64) -> Expr:
// submit_withdraw_offchain                                                                                                                                                                                                                                                      //
submitwithdrawoffchain_46:                                                                                                                                                                                                                                                       //
proto 3 0                                                                                                                                                                                                                                                                        //    (6243)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6246)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6247)
frame_dig -2                                                                                                                                                                                                                                                                     //    (6248)  contracts_unified/core/state_handler/global_handler.py     202     def get_instrument(instrument_id: InstrumentId, *, output: InstrumentListElement) -> Expr:
callsub getinstrument_2                                                                                                                                                                                                                                                          //    (6250)  contracts_unified/core/methods/withdraw.py                 107     GlobalStateHandler.get_instrument(instrument_id)
frame_bury 1                                                                                                                                                                                                                                                                     //    (6253)                                                                     element.set(cast(abi.ReturnedValue, GlobalStateHandler.get_instrument(instrument_id)))
frame_dig 1                                                                                                                                                                                                                                                                      //    (6255)                                                             108     asset_id.set(element.asset_id)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6257)
extract_uint64                                                                                                                                                                                                                                                                   //    (6258)
frame_bury 0                                                                                                                                                                                                                                                                     //    (6259)
frame_dig 0                                                                                                                                                                                                                                                                      //    (6261)                                                             109     asset_id.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6263)                                                                     Int(0)
==                                                                                                                                                                                                                                                                               //    (6264)                                                                     asset_id.get() == Int(0)
bnz submitwithdrawoffchain_46_l2                                                                                                                                                                                                                                                 //    (6265)                                                                     If(asset_id.get() == Int(0))
itxn_begin                                                                                                                                                                                                                                                                       //    (6268)                                                             122     InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.xfer_asset: asset_id.get(), TxnField.asset_amount: amount.get(), TxnField.asset_receiver: withdraw_buffer.get()})
pushint 4 // axfer                                                                                                                                                                                                                                                               //    (6269)
itxn_field TypeEnum                                                                                                                                                                                                                                                              //    (6271)
global CurrentApplicationAddress                                                                                                                                                                                                                                                 //    (6273)                                                             125     Global.current_application_address()
itxn_field Sender                                                                                                                                                                                                                                                                //    (6275)                                                             122     InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.xfer_asset: asset_id.get(), TxnField.asset_amount: amount.get(), TxnField.asset_receiver: withdraw_buffer.get()})
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6277)                                                             126     Int(0)
itxn_field Fee                                                                                                                                                                                                                                                                   //    (6278)                                                             122     InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.xfer_asset: asset_id.get(), TxnField.asset_amount: amount.get(), TxnField.asset_receiver: withdraw_buffer.get()})
frame_dig 0                                                                                                                                                                                                                                                                      //    (6280)                                                             127     asset_id.get()
itxn_field XferAsset                                                                                                                                                                                                                                                             //    (6282)                                                             122     InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.xfer_asset: asset_id.get(), TxnField.asset_amount: amount.get(), TxnField.asset_receiver: withdraw_buffer.get()})
frame_dig -1                                                                                                                                                                                                                                                                     //    (6284)                                                             128     amount.get()
itxn_field AssetAmount                                                                                                                                                                                                                                                           //    (6286)                                                             122     InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.xfer_asset: asset_id.get(), TxnField.asset_amount: amount.get(), TxnField.asset_receiver: withdraw_buffer.get()})
frame_dig -3                                                                                                                                                                                                                                                                     //    (6288)                                                             129     withdraw_buffer.get()
itxn_field AssetReceiver                                                                                                                                                                                                                                                         //    (6290)                                                             122     InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.AssetTransfer, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.xfer_asset: asset_id.get(), TxnField.asset_amount: amount.get(), TxnField.asset_receiver: withdraw_buffer.get()})
itxn_submit                                                                                                                                                                                                                                                                      //    (6292)
b submitwithdrawoffchain_46_l3                                                                                                                                                                                                                                                   //    (6293)                                                             109     If(asset_id.get() == Int(0))
submitwithdrawoffchain_46_l2:                                                                                                                                                                                                                                                    //
itxn_begin                                                                                                                                                                                                                                                                       //    (6296)                                                             111     InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.Payment, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.amount: amount.get(), TxnField.receiver: withdraw_buffer.get()})
intc_1 // pay                                                                                                                                                                                                                                                                    //    (6297)
itxn_field TypeEnum                                                                                                                                                                                                                                                              //    (6298)
global CurrentApplicationAddress                                                                                                                                                                                                                                                 //    (6300)                                                             114     Global.current_application_address()
itxn_field Sender                                                                                                                                                                                                                                                                //    (6302)                                                             111     InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.Payment, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.amount: amount.get(), TxnField.receiver: withdraw_buffer.get()})
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6304)                                                             115     Int(0)
itxn_field Fee                                                                                                                                                                                                                                                                   //    (6305)                                                             111     InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.Payment, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.amount: amount.get(), TxnField.receiver: withdraw_buffer.get()})
frame_dig -1                                                                                                                                                                                                                                                                     //    (6307)                                                             116     amount.get()
itxn_field Amount                                                                                                                                                                                                                                                                //    (6309)                                                             111     InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.Payment, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.amount: amount.get(), TxnField.receiver: withdraw_buffer.get()})
frame_dig -3                                                                                                                                                                                                                                                                     //    (6311)                                                             117     withdraw_buffer.get()
itxn_field Receiver                                                                                                                                                                                                                                                              //    (6313)                                                             111     InnerTxnBuilder.Execute({TxnField.type_enum: TxnType.Payment, TxnField.sender: Global.current_application_address(), TxnField.fee: Int(0), TxnField.amount: amount.get(), TxnField.receiver: withdraw_buffer.get()})
itxn_submit                                                                                                                                                                                                                                                                      //    (6315)
submitwithdrawoffchain_46_l3:                                                                                                                                                                                                                                                    //                                                                       109     If(asset_id.get() == Int(0))
retsub                                                                                                                                                                                                                                                                           //    (6316)                                                             95      def submit_withdraw_offchain(withdraw_buffer: abi.Address, instrument_id: InstrumentId, amount: abi.Uint64) -> Expr:
                                                                                                                                                                                                                                                                                 //                                                                       136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
// withdraw                                                                                                                                                                                                                                                                      //
withdraw_47:                                                                                                                                                                                                                                                                     //
proto 5 0                                                                                                                                                                                                                                                                        //    (6317)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6320)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6321)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6322)
dup                                                                                                                                                                                                                                                                              //    (6323)  contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6324)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (6325)  contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6326)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6327)
dupn 4                                                                                                                                                                                                                                                                           //    (6328)  contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6330)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6331)
dupn 3                                                                                                                                                                                                                                                                           //    (6332)  contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6334)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6335)
dupn 2                                                                                                                                                                                                                                                                           //    (6336)  contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6338)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_dig -1                                                                                                                                                                                                                                                                     //    (6339)  contracts_unified/core/methods/withdraw.py                 185     opup_budget.get()
callsub setup_27                                                                                                                                                                                                                                                                 //    (6341)                                                                     setup(opup_budget.get())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6344)                                                             188     Int(0)
!                                                                                                                                                                                                                                                                                //    (6345)                                                                     abi_false.set(Int(0))
!                                                                                                                                                                                                                                                                                //    (6346)
frame_bury 1                                                                                                                                                                                                                                                                     //    (6347)
callsub senderissigvalidator_21                                                                                                                                                                                                                                                  //    (6349)                                                             191     sender_is_sig_validator()
frame_dig -3                                                                                                                                                                                                                                                                     //    (6352)                                                             194     delegation_chain.length()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6354)
extract_uint16                                                                                                                                                                                                                                                                   //    (6355)
frame_bury 16                                                                                                                                                                                                                                                                    //    (6356)
frame_dig 16                                                                                                                                                                                                                                                                     //    (6358)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6360)                                                                     Int(0)
==                                                                                                                                                                                                                                                                               //    (6361)                                                                     delegation_chain.length() == Int(0)
assert                                                                                                                                                                                                                                                                           //    (6362)                                                                     Assert(delegation_chain.length() == Int(0))
frame_dig -4                                                                                                                                                                                                                                                                     //    (6363)                                                             197     user_op.operation.use(lambda op_data: Seq(withdraw_data.decode(op_data.get()), withdraw_data.operation.use(lambda op: Assert(op.get() == OperationId.Withdraw)), withdraw_data.instrument.store_into(instrument_id), withdraw_data.amount.store_into(amount), withdraw_data.receiver.store_into(receiver), withdraw_data.max_borrow.store_into(max_borrow), withdraw_data.max_fees.store_into(max_fees)))
frame_dig -4                                                                                                                                                                                                                                                                     //    (6365)
pushint 72 // 72                                                                                                                                                                                                                                                                 //    (6367)
extract_uint16                                                                                                                                                                                                                                                                   //    (6369)
frame_dig -4                                                                                                                                                                                                                                                                     //    (6370)
pushint 74 // 74                                                                                                                                                                                                                                                                 //    (6372)
extract_uint16                                                                                                                                                                                                                                                                   //    (6374)
substring3                                                                                                                                                                                                                                                                       //    (6375)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 17                                                                                                                                                                                                                                                                    //    (6376)  contracts_unified/core/methods/withdraw.py                 197     user_op.operation.use(lambda op_data: Seq(withdraw_data.decode(op_data.get()), withdraw_data.operation.use(lambda op: Assert(op.get() == OperationId.Withdraw)), withdraw_data.instrument.store_into(instrument_id), withdraw_data.amount.store_into(amount), withdraw_data.receiver.store_into(receiver), withdraw_data.max_borrow.store_into(max_borrow), withdraw_data.max_fees.store_into(max_fees)))
frame_dig 17                                                                                                                                                                                                                                                                     //    (6378)                                                             199     op_data.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (6380)
frame_bury 3                                                                                                                                                                                                                                                                     //    (6383)                                                                     withdraw_data.decode(op_data.get())
frame_dig 3                                                                                                                                                                                                                                                                      //    (6385)                                                             200     withdraw_data.operation.use(lambda op: Assert(op.get() == OperationId.Withdraw))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6387)
getbyte                                                                                                                                                                                                                                                                          //    (6388)
frame_bury 18                                                                                                                                                                                                                                                                    //    (6389)
frame_dig 18                                                                                                                                                                                                                                                                     //    (6391)                                                                     op.get()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (6393)  contracts_unified/library/c3types_user.py                  24      Int(1)
==                                                                                                                                                                                                                                                                               //    (6394)  contracts_unified/core/methods/withdraw.py                 200     op.get() == OperationId.Withdraw
assert                                                                                                                                                                                                                                                                           //    (6395)                                                                     Assert(op.get() == OperationId.Withdraw)
frame_dig 3                                                                                                                                                                                                                                                                      //    (6396)                                                             201     withdraw_data.instrument.store_into(instrument_id)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (6398)
getbyte                                                                                                                                                                                                                                                                          //    (6399)
frame_bury 4                                                                                                                                                                                                                                                                     //    (6400)
frame_dig 3                                                                                                                                                                                                                                                                      //    (6402)                                                             202     withdraw_data.amount.store_into(amount)
pushint 2 // 2                                                                                                                                                                                                                                                                   //    (6404)
extract_uint64                                                                                                                                                                                                                                                                   //    (6406)
frame_bury 5                                                                                                                                                                                                                                                                     //    (6407)
frame_dig 3                                                                                                                                                                                                                                                                      //    (6409)                                                             203     withdraw_data.receiver.store_into(receiver)
extract 10 34                                                                                                                                                                                                                                                                    //    (6411)
frame_bury 6                                                                                                                                                                                                                                                                     //    (6414)
frame_dig 3                                                                                                                                                                                                                                                                      //    (6416)                                                             204     withdraw_data.max_borrow.store_into(max_borrow)
pushint 44 // 44                                                                                                                                                                                                                                                                 //    (6418)
extract_uint64                                                                                                                                                                                                                                                                   //    (6420)
frame_bury 7                                                                                                                                                                                                                                                                     //    (6421)
frame_dig 3                                                                                                                                                                                                                                                                      //    (6423)                                                             205     withdraw_data.max_fees.store_into(max_fees)
pushint 52 // 52                                                                                                                                                                                                                                                                 //    (6425)
extract_uint64                                                                                                                                                                                                                                                                   //    (6427)
frame_bury 11                                                                                                                                                                                                                                                                    //    (6428)
frame_dig -5                                                                                                                                                                                                                                                                     //    (6430)  contracts_unified/core/state_handler/local_handler.py      39      def get_position(account: AccountAddress, instrument_id: InstrumentId, *, output: UserInstrumentData) -> Expr:
frame_dig 4                                                                                                                                                                                                                                                                      //    (6432)
callsub getposition_3                                                                                                                                                                                                                                                            //    (6434)  contracts_unified/core/methods/withdraw.py                 210     LocalStateHandler.get_position(account, instrument_id)
frame_bury 12                                                                                                                                                                                                                                                                    //    (6437)                                                                     position.set(cast(abi.ReturnedValue, LocalStateHandler.get_position(account, instrument_id)))
frame_dig 12                                                                                                                                                                                                                                                                     //    (6439)                                                             211     balance.set(position.cash)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6441)
extract_uint64                                                                                                                                                                                                                                                                   //    (6442)
frame_bury 13                                                                                                                                                                                                                                                                    //    (6443)
frame_dig -2                                                                                                                                                                                                                                                                     //    (6445)                                                             212     server_params.locked_cash.use(lambda locked_cash: balance.set(balance.get() - locked_cash.get()))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6447)
extract_uint64                                                                                                                                                                                                                                                                   //    (6448)
frame_bury 19                                                                                                                                                                                                                                                                    //    (6449)
frame_dig 13                                                                                                                                                                                                                                                                     //    (6451)                                                             213     balance.get()
frame_dig 19                                                                                                                                                                                                                                                                     //    (6453)                                                                     locked_cash.get()
-                                                                                                                                                                                                                                                                                //    (6455)                                                                     balance.get() - locked_cash.get()
frame_bury 13                                                                                                                                                                                                                                                                    //    (6456)                                                                     balance.set(balance.get() - locked_cash.get())
frame_dig -2                                                                                                                                                                                                                                                                     //    (6458)                                                             217     withdraw_fee.set(server_params.withdraw_fee)
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (6460)
extract_uint64                                                                                                                                                                                                                                                                   //    (6462)
frame_bury 14                                                                                                                                                                                                                                                                    //    (6463)
frame_dig 14                                                                                                                                                                                                                                                                     //    (6465)                                                             220     withdraw_fee.get()
frame_dig 11                                                                                                                                                                                                                                                                     //    (6467)                                                                     max_fees.get()
<=                                                                                                                                                                                                                                                                               //    (6469)                                                                     withdraw_fee.get() <= max_fees.get()
assert                                                                                                                                                                                                                                                                           //    (6470)                                                                     Assert(withdraw_fee.get() <= max_fees.get())
frame_dig 5                                                                                                                                                                                                                                                                      //    (6471)                                                             223     amount.get()
frame_dig 7                                                                                                                                                                                                                                                                      //    (6473)                                                                     max_borrow.get()
frame_dig 13                                                                                                                                                                                                                                                                     //    (6475)                                                                     balance.get()
+                                                                                                                                                                                                                                                                                //    (6477)                                                                     max_borrow.get() + balance.get()
<=                                                                                                                                                                                                                                                                               //    (6478)                                                                     amount.get() <= max_borrow.get() + balance.get()
assert                                                                                                                                                                                                                                                                           //    (6479)                                                                     Assert(amount.get() <= max_borrow.get() + balance.get())
frame_dig 5                                                                                                                                                                                                                                                                      //    (6480)                                                             226     amount.get()
frame_dig 13                                                                                                                                                                                                                                                                     //    (6482)                                                                     balance.get()
>                                                                                                                                                                                                                                                                                //    (6484)                                                                     amount.get() > balance.get()
bnz withdraw_47_l7                                                                                                                                                                                                                                                               //    (6485)                                                                     If(amount.get() > balance.get())
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6488)                                                             231     Int(0)
frame_bury 10                                                                                                                                                                                                                                                                    //    (6489)                                                                     amount_to_borrow.set(Int(0))
withdraw_47_l2:                                                                                                                                                                                                                                                                  //                                                                       239     If(amount_to_borrow.get() != Int(0))
frame_dig 5                                                                                                                                                                                                                                                                      //    (6491)                                                             234     amount.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (6493)                                                                     signed_neg(amount.get())
frame_bury 8                                                                                                                                                                                                                                                                     //    (6496)                                                                     amount_to_deduct.set(signed_neg(amount.get()))
frame_dig 5                                                                                                                                                                                                                                                                      //    (6498)                                                             236     amount.get()
frame_dig 14                                                                                                                                                                                                                                                                     //    (6500)                                                                     withdraw_fee.get()
-                                                                                                                                                                                                                                                                                //    (6502)                                                                     amount.get() - withdraw_fee.get()
frame_bury 9                                                                                                                                                                                                                                                                     //    (6503)                                                                     amount_to_withdraw.set(amount.get() - withdraw_fee.get())
frame_dig 10                                                                                                                                                                                                                                                                     //    (6505)                                                             239     amount_to_borrow.get()
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6507)                                                                     Int(0)
!=                                                                                                                                                                                                                                                                               //    (6508)                                                                     amount_to_borrow.get() != Int(0)
bnz withdraw_47_l6                                                                                                                                                                                                                                                               //    (6509)                                                                     If(amount_to_borrow.get() != Int(0))
withdraw_47_l3:                                                                                                                                                                                                                                                                  //                                                                       259     If(chain_id.get() == Int(ALGORAND_CHAIN_ID), cast(Expr, submit_withdraw_onchain(address, instrument_id, amount_to_withdraw)), cast(Expr, submit_withdraw_offchain(wormhole_withdraw_buffer, instrument_id, amount_to_withdraw)))
frame_dig -5                                                                                                                                                                                                                                                                     //    (6512)  contracts_unified/core/internal/move.py                    34      def signed_add_to_cash(account: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig 4                                                                                                                                                                                                                                                                      //    (6514)
frame_dig 8                                                                                                                                                                                                                                                                      //    (6516)
callsub signedaddtocash_17                                                                                                                                                                                                                                                       //    (6518)  contracts_unified/core/methods/withdraw.py                 243     signed_add_to_cash(account, instrument_id, amount_to_deduct)
frame_dig 4                                                                                                                                                                                                                                                                      //    (6521)  contracts_unified/core/internal/move.py                    198     def collect_fees(instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig 14                                                                                                                                                                                                                                                                     //    (6523)
callsub collectfees_20                                                                                                                                                                                                                                                           //    (6525)  contracts_unified/core/methods/withdraw.py                 246     collect_fees(instrument_id, withdraw_fee)
frame_dig -5                                                                                                                                                                                                                                                                     //    (6528)  contracts_unified/core/internal/health_check.py            47      def health_check(account: AccountAddress, use_maint: abi.Bool, *, output: ExcessMargin) -> Expr:
frame_dig 1                                                                                                                                                                                                                                                                      //    (6530)
callsub healthcheck_16                                                                                                                                                                                                                                                           //    (6532)  contracts_unified/core/methods/withdraw.py                 251     health_check(account, abi_false)
frame_bury 15                                                                                                                                                                                                                                                                    //    (6535)                                                                     user_health.set(health_check(account, abi_false))
frame_dig 15                                                                                                                                                                                                                                                                     //    (6537)                                                             252     user_health.get()
intc_2 // 9223372036854775808                                                                                                                                                                                                                                                    //    (6539)  contracts_unified/library/signed_math.py                   22      Int(9223372036854775808)
&                                                                                                                                                                                                                                                                                //    (6540)                                                                     value & Int(9223372036854775808)
!                                                                                                                                                                                                                                                                                //    (6541)  contracts_unified/core/methods/withdraw.py                 252     Not(signed_ltz(user_health.get()))
assert                                                                                                                                                                                                                                                                           //    (6542)                                                                     Assert(Not(signed_ltz(user_health.get())))
bytec 9 // "w"                                                                                                                                                                                                                                                                   //    (6543)  contracts_unified/core/state_handler/global_handler.py     35      Bytes('w')
app_global_get                                                                                                                                                                                                                                                                   //    (6545)                                                             164     App.globalGet(KEY_WITHDRAW_BUFFER)
frame_bury 0                                                                                                                                                                                                                                                                     //    (6546)  contracts_unified/core/methods/withdraw.py                 256     wormhole_withdraw_buffer.set(GlobalStateHandler.get_withdraw_buffer())
frame_dig 0                                                                                                                                                                                                                                                                      //    (6548)
len                                                                                                                                                                                                                                                                              //    (6550)
pushint 32 // 32                                                                                                                                                                                                                                                                 //    (6551)
==                                                                                                                                                                                                                                                                               //    (6553)
assert                                                                                                                                                                                                                                                                           //    (6554)
frame_dig 6                                                                                                                                                                                                                                                                      //    (6555)                                                             257     receiver.chain_id.use(lambda chain_id: receiver.address.use(lambda address: If(chain_id.get() == Int(ALGORAND_CHAIN_ID), cast(Expr, submit_withdraw_onchain(address, instrument_id, amount_to_withdraw)), cast(Expr, submit_withdraw_offchain(wormhole_withdraw_buffer, instrument_id, amount_to_withdraw)))))
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6557)
extract_uint16                                                                                                                                                                                                                                                                   //    (6558)
frame_bury 20                                                                                                                                                                                                                                                                    //    (6559)
frame_dig 6                                                                                                                                                                                                                                                                      //    (6561)                                                             258     receiver.address.use(lambda address: If(chain_id.get() == Int(ALGORAND_CHAIN_ID), cast(Expr, submit_withdraw_onchain(address, instrument_id, amount_to_withdraw)), cast(Expr, submit_withdraw_offchain(wormhole_withdraw_buffer, instrument_id, amount_to_withdraw))))
extract 2 0                                                                                                                                                                                                                                                                      //    (6563)
frame_bury 21                                                                                                                                                                                                                                                                    //    (6566)
frame_dig 20                                                                                                                                                                                                                                                                     //    (6568)                                                             260     chain_id.get()
pushint 8 // 8                                                                                                                                                                                                                                                                   //    (6570)                                                                     Int(ALGORAND_CHAIN_ID)
==                                                                                                                                                                                                                                                                               //    (6572)                                                                     chain_id.get() == Int(ALGORAND_CHAIN_ID)
bnz withdraw_47_l5                                                                                                                                                                                                                                                               //    (6573)                                                             259     If(chain_id.get() == Int(ALGORAND_CHAIN_ID), cast(Expr, submit_withdraw_onchain(address, instrument_id, amount_to_withdraw)), cast(Expr, submit_withdraw_offchain(wormhole_withdraw_buffer, instrument_id, amount_to_withdraw)))
frame_dig 0                                                                                                                                                                                                                                                                      //    (6576)                                                             95      def submit_withdraw_offchain(withdraw_buffer: abi.Address, instrument_id: InstrumentId, amount: abi.Uint64) -> Expr:
frame_dig 4                                                                                                                                                                                                                                                                      //    (6578)
frame_dig 9                                                                                                                                                                                                                                                                      //    (6580)
callsub submitwithdrawoffchain_46                                                                                                                                                                                                                                                //    (6582)                                                             262     submit_withdraw_offchain(wormhole_withdraw_buffer, instrument_id, amount_to_withdraw)
b withdraw_47_l8                                                                                                                                                                                                                                                                 //    (6585)                                                             259     If(chain_id.get() == Int(ALGORAND_CHAIN_ID), cast(Expr, submit_withdraw_onchain(address, instrument_id, amount_to_withdraw)), cast(Expr, submit_withdraw_offchain(wormhole_withdraw_buffer, instrument_id, amount_to_withdraw)))
withdraw_47_l5:                                                                                                                                                                                                                                                                  //
frame_dig 21                                                                                                                                                                                                                                                                     //    (6588)                                                             50      def submit_withdraw_onchain(address: AccountAddress, instrument_id: InstrumentId, amount: Amount) -> Expr:
frame_dig 4                                                                                                                                                                                                                                                                      //    (6590)
frame_dig 9                                                                                                                                                                                                                                                                      //    (6592)
callsub submitwithdrawonchain_45                                                                                                                                                                                                                                                 //    (6594)                                                             261     submit_withdraw_onchain(address, instrument_id, amount_to_withdraw)
b withdraw_47_l8                                                                                                                                                                                                                                                                 //    (6597)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
withdraw_47_l6:                                                                                                                                                                                                                                                                  //            contracts_unified/core/methods/withdraw.py                 239     If(amount_to_borrow.get() != Int(0))
frame_dig -5                                                                                                                                                                                                                                                                     //    (6600)  contracts_unified/core/internal/perform_pool_move.py       73      def perform_pool_move(account: AccountAddress, instrument_id: InstrumentId, transfer_amount: SignedAmount) -> Expr:
frame_dig 4                                                                                                                                                                                                                                                                      //    (6602)
frame_dig 10                                                                                                                                                                                                                                                                     //    (6604)
callsub performpoolmove_14                                                                                                                                                                                                                                                       //    (6606)  contracts_unified/core/methods/withdraw.py                 240     perform_pool_move(account, instrument_id, amount_to_borrow)
b withdraw_47_l3                                                                                                                                                                                                                                                                 //    (6609)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
withdraw_47_l7:                                                                                                                                                                                                                                                                  //            contracts_unified/core/methods/withdraw.py                 226     If(amount.get() > balance.get())
frame_dig 5                                                                                                                                                                                                                                                                      //    (6612)                                                             228     amount.get()
frame_dig 13                                                                                                                                                                                                                                                                     //    (6614)                                                                     balance.get()
-                                                                                                                                                                                                                                                                                //    (6616)                                                                     amount.get() - balance.get()
callsub signedneg_7                                                                                                                                                                                                                                                              //    (6617)                                                                     signed_neg(amount.get() - balance.get())
frame_bury 10                                                                                                                                                                                                                                                                    //    (6620)                                                                     amount_to_borrow.set(signed_neg(amount.get() - balance.get()))
b withdraw_47_l2                                                                                                                                                                                                                                                                 //    (6622)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
withdraw_47_l8:                                                                                                                                                                                                                                                                  //            contracts_unified/core/methods/withdraw.py                 259     If(chain_id.get() == Int(ALGORAND_CHAIN_ID), cast(Expr, submit_withdraw_onchain(address, instrument_id, amount_to_withdraw)), cast(Expr, submit_withdraw_offchain(wormhole_withdraw_buffer, instrument_id, amount_to_withdraw)))
retsub                                                                                                                                                                                                                                                                           //    (6625)                                                             136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/library/wormhole.py                      58      def decode_wormhole_payload(vaa: abi.DynamicBytes, *, output: DecodedWormholePayload) -> Expr:
// decode_wormhole_payload                                                                                                                                                                                                                                                       //
decodewormholepayload_48:                                                                                                                                                                                                                                                        //
proto 1 1                                                                                                                                                                                                                                                                        //    (6626)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6629)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6630)
dup                                                                                                                                                                                                                                                                              //    (6631)  contracts_unified/library/wormhole.py                      58      def decode_wormhole_payload(vaa: abi.DynamicBytes, *, output: DecodedWormholePayload) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6632)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6633)
dupn 2                                                                                                                                                                                                                                                                           //    (6634)  contracts_unified/library/wormhole.py                      58      def decode_wormhole_payload(vaa: abi.DynamicBytes, *, output: DecodedWormholePayload) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6636)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (6637)  contracts_unified/library/wormhole.py                      58      def decode_wormhole_payload(vaa: abi.DynamicBytes, *, output: DecodedWormholePayload) -> Expr:
pushint 57 // 57                                                                                                                                                                                                                                                                 //    (6638)                                                             72      Int(VAA_HEADER_LEN + VAA_BODY_LEN)
pushint 66 // 66                                                                                                                                                                                                                                                                 //    (6640)                                                             73      Int(VAA_SIGNATURE_LEN)
frame_dig -1                                                                                                                                                                                                                                                                     //    (6642)                                                             64      vaa.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (6644)
extract 5 1                                                                                                                                                                                                                                                                      //    (6647)                                                                     Extract(vaa.get(), Int(5), Int(1))
btoi                                                                                                                                                                                                                                                                             //    (6650)                                                                     Btoi(Extract(vaa.get(), Int(5), Int(1)))
*                                                                                                                                                                                                                                                                                //    (6651)                                                             73      Int(VAA_SIGNATURE_LEN) * num_of_signatures
+                                                                                                                                                                                                                                                                                //    (6652)                                                             72      Int(VAA_HEADER_LEN + VAA_BODY_LEN) + Int(VAA_SIGNATURE_LEN) * num_of_signatures
frame_bury 1                                                                                                                                                                                                                                                                     //    (6653)                                                             71      payload_offset.set(Int(VAA_HEADER_LEN + VAA_BODY_LEN) + Int(VAA_SIGNATURE_LEN) * num_of_signatures)
frame_dig -1                                                                                                                                                                                                                                                                     //    (6655)                                                             76      vaa.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (6657)
frame_dig 1                                                                                                                                                                                                                                                                      //    (6660)                                                                     payload_offset.get()
pushint 25 // 25                                                                                                                                                                                                                                                                 //    (6662)                                                                     Int(25)
+                                                                                                                                                                                                                                                                                //    (6664)                                                                     payload_offset.get() + Int(25)
extract_uint64                                                                                                                                                                                                                                                                   //    (6665)                                                                     ExtractUint64(vaa.get(), payload_offset.get() + Int(25))
frame_bury 2                                                                                                                                                                                                                                                                     //    (6666)                                                                     amount.set(ExtractUint64(vaa.get(), payload_offset.get() + Int(25)))
frame_dig -1                                                                                                                                                                                                                                                                     //    (6668)                                                             77      vaa.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (6670)
frame_dig 1                                                                                                                                                                                                                                                                      //    (6673)                                                                     payload_offset.get()
intc 10 // 133                                                                                                                                                                                                                                                                   //    (6675)                                                                     Int(VAA_PAYLOAD_LEN)
+                                                                                                                                                                                                                                                                                //    (6677)                                                                     payload_offset.get() + Int(VAA_PAYLOAD_LEN)
bytec 14 // "wormholeDeposit"                                                                                                                                                                                                                                                    //    (6678)                                                                     Bytes(VAA_PAYLOAD_SIGNATURE)
len                                                                                                                                                                                                                                                                              //    (6680)                                                                     Len(Bytes(VAA_PAYLOAD_SIGNATURE))
+                                                                                                                                                                                                                                                                                //    (6681)                                                                     payload_offset.get() + Int(VAA_PAYLOAD_LEN) + Len(Bytes(VAA_PAYLOAD_SIGNATURE))
pushint 32 // 32                                                                                                                                                                                                                                                                 //    (6682)                                                                     Int(32)
extract3                                                                                                                                                                                                                                                                         //    (6684)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 3                                                                                                                                                                                                                                                                     //    (6685)  contracts_unified/library/wormhole.py                      77      receiver.set(Extract(vaa.get(), payload_offset.get() + Int(VAA_PAYLOAD_LEN) + Len(Bytes(VAA_PAYLOAD_SIGNATURE)), Int(32)))
frame_dig 3                                                                                                                                                                                                                                                                      //    (6687)
len                                                                                                                                                                                                                                                                              //    (6689)
pushint 32 // 32                                                                                                                                                                                                                                                                 //    (6690)
==                                                                                                                                                                                                                                                                               //    (6692)
assert                                                                                                                                                                                                                                                                           //    (6693)
frame_dig -1                                                                                                                                                                                                                                                                     //    (6694)                                                             78      vaa.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (6696)
frame_dig 1                                                                                                                                                                                                                                                                      //    (6699)                                                                     payload_offset.get()
intc 10 // 133                                                                                                                                                                                                                                                                   //    (6701)                                                                     Int(VAA_PAYLOAD_LEN)
+                                                                                                                                                                                                                                                                                //    (6703)                                                                     payload_offset.get() + Int(VAA_PAYLOAD_LEN)
bytec 14 // "wormholeDeposit"                                                                                                                                                                                                                                                    //    (6704)                                                                     Bytes(VAA_PAYLOAD_SIGNATURE)
len                                                                                                                                                                                                                                                                              //    (6706)                                                                     Len(Bytes(VAA_PAYLOAD_SIGNATURE))
+                                                                                                                                                                                                                                                                                //    (6707)                                                                     payload_offset.get() + Int(VAA_PAYLOAD_LEN) + Len(Bytes(VAA_PAYLOAD_SIGNATURE))
pushint 32 // 32                                                                                                                                                                                                                                                                 //    (6708)                                                                     Int(32)
+                                                                                                                                                                                                                                                                                //    (6710)                                                                     payload_offset.get() + Int(VAA_PAYLOAD_LEN) + Len(Bytes(VAA_PAYLOAD_SIGNATURE)) + Int(32)
extract_uint64                                                                                                                                                                                                                                                                   //    (6711)                                                                     ExtractUint64(vaa.get(), payload_offset.get() + Int(VAA_PAYLOAD_LEN) + Len(Bytes(VAA_PAYLOAD_SIGNATURE)) + Int(32))
frame_bury 4                                                                                                                                                                                                                                                                     //    (6712)                                                                     repay_amount.set(ExtractUint64(vaa.get(), payload_offset.get() + Int(VAA_PAYLOAD_LEN) + Len(Bytes(VAA_PAYLOAD_SIGNATURE)) + Int(32)))
frame_dig 2                                                                                                                                                                                                                                                                      //    (6714)                                                             80      output.set(amount, receiver, repay_amount)
itob                                                                                                                                                                                                                                                                             //    (6716)
frame_dig 3                                                                                                                                                                                                                                                                      //    (6717)
concat                                                                                                                                                                                                                                                                           //    (6719)
frame_dig 4                                                                                                                                                                                                                                                                      //    (6720)
itob                                                                                                                                                                                                                                                                             //    (6722)
concat                                                                                                                                                                                                                                                                           //    (6723)
frame_bury 0                                                                                                                                                                                                                                                                     //    (6724)
retsub                                                                                                                                                                                                                                                                           //    (6726)                                                             58      def decode_wormhole_payload(vaa: abi.DynamicBytes, *, output: DecodedWormholePayload) -> Expr:
                                                                                                                                                                                                                                                                                 //            contracts_unified/core/methods/wormhole_deposit.py         41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
// wormhole_deposit                                                                                                                                                                                                                                                              //
wormholedeposit_49:                                                                                                                                                                                                                                                              //
proto 5 0                                                                                                                                                                                                                                                                        //    (6727)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6730)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (6731)  contracts_unified/core/methods/wormhole_deposit.py         41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6732)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (6733)  contracts_unified/core/methods/wormhole_deposit.py         41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6734)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_dig -1                                                                                                                                                                                                                                                                     //    (6735)  contracts_unified/core/methods/wormhole_deposit.py         88      opup_budget.get()
callsub setup_27                                                                                                                                                                                                                                                                 //    (6737)                                                                     setup(opup_budget.get())
global GroupSize                                                                                                                                                                                                                                                                 //    (6740)                                                             91      Global.group_size()
txn GroupIndex                                                                                                                                                                                                                                                                   //    (6742)                                                                     Txn.group_index()
pushint 2 // 2                                                                                                                                                                                                                                                                   //    (6744)                                                                     Int(2)
+                                                                                                                                                                                                                                                                                //    (6746)                                                                     Txn.group_index() + Int(2)
==                                                                                                                                                                                                                                                                               //    (6747)                                                                     Global.group_size() == Txn.group_index() + Int(2)
// Unknown transactions ahead detected                                                                                                                                                                                                                                           //            core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
assert                                                                                                                                                                                                                                                                           //    (6748)  contracts_unified/core/methods/wormhole_deposit.py         91      Assert(Global.group_size() == Txn.group_index() + Int(2), comment='Unknown transactions ahead detected')
frame_dig -5                                                                                                                                                                                                                                                                     //    (6749)                                                             80      portal_transfer_txn.get()
gtxns GroupIndex                                                                                                                                                                                                                                                                 //    (6751)                                                                     portal_transfer_txn.get().group_index()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (6753)                                                                     Int(1)
-                                                                                                                                                                                                                                                                                //    (6754)                                                                     portal_transfer_txn.get().group_index() - Int(1)
gtxnsa ApplicationArgs 0                                                                                                                                                                                                                                                         //    (6755)                                                             94      complete_transfer_txn.application_args[0]
pushbytes 0x636f6d706c6574655472616e73666572 // "completeTransfer"                                                                                                                                                                                                               //    (6758)                                                                     Bytes('completeTransfer')
==                                                                                                                                                                                                                                                                               //    (6776)                                                                     complete_transfer_txn.application_args[0] == Bytes('completeTransfer')
// expected completeTransfer  method call                                                                                                                                                                                                                                        //            core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
assert                                                                                                                                                                                                                                                                           //    (6777)  contracts_unified/core/methods/wormhole_deposit.py         94      Assert(complete_transfer_txn.application_args[0] == Bytes('completeTransfer'), comment='expected completeTransfer  method call')
frame_dig -5                                                                                                                                                                                                                                                                     //    (6778)                                                             80      portal_transfer_txn.get()
gtxns GroupIndex                                                                                                                                                                                                                                                                 //    (6780)                                                                     portal_transfer_txn.get().group_index()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (6782)                                                                     Int(1)
-                                                                                                                                                                                                                                                                                //    (6783)                                                                     portal_transfer_txn.get().group_index() - Int(1)
gtxns ApplicationID                                                                                                                                                                                                                                                              //    (6784)                                                             95      complete_transfer_txn.application_id()
bytec 7 // "b"                                                                                                                                                                                                                                                                   //    (6786)  contracts_unified/core/state_handler/global_handler.py     32      Bytes('b')
app_global_get                                                                                                                                                                                                                                                                   //    (6788)                                                             94      App.globalGet(KEY_WORMHOLE_BRIDGE_ID)
==                                                                                                                                                                                                                                                                               //    (6789)  contracts_unified/core/methods/wormhole_deposit.py         95      complete_transfer_txn.application_id() == GlobalStateHandler.get_wormhole_bridge_id()
// completeTransfer call appId unknown                                                                                                                                                                                                                                           //            core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
assert                                                                                                                                                                                                                                                                           //    (6790)  contracts_unified/core/methods/wormhole_deposit.py         95      Assert(complete_transfer_txn.application_id() == GlobalStateHandler.get_wormhole_bridge_id(), comment='completeTransfer call appId unknown')
frame_dig -5                                                                                                                                                                                                                                                                     //    (6791)                                                             80      portal_transfer_txn.get()
gtxns GroupIndex                                                                                                                                                                                                                                                                 //    (6793)                                                                     portal_transfer_txn.get().group_index()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (6795)                                                                     Int(1)
-                                                                                                                                                                                                                                                                                //    (6796)                                                                     portal_transfer_txn.get().group_index() - Int(1)
gtxns Sender                                                                                                                                                                                                                                                                     //    (6797)                                                             98      complete_transfer_txn.sender()
bytec 10 // "o"                                                                                                                                                                                                                                                                  //    (6799)  contracts_unified/core/state_handler/global_handler.py     37      Bytes('o')
app_global_get                                                                                                                                                                                                                                                                   //    (6801)                                                             128     App.globalGet(KEY_OPERATOR_ADDRESS)
==                                                                                                                                                                                                                                                                               //    (6802)  contracts_unified/core/methods/wormhole_deposit.py         98      complete_transfer_txn.sender() == GlobalStateHandler.get_operator_address()
// completeTransfer call sender unknown                                                                                                                                                                                                                                          //            core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
assert                                                                                                                                                                                                                                                                           //    (6803)  contracts_unified/core/methods/wormhole_deposit.py         98      Assert(complete_transfer_txn.sender() == GlobalStateHandler.get_operator_address(), comment='completeTransfer call sender unknown')
frame_dig -5                                                                                                                                                                                                                                                                     //    (6804)                                                             79      portal_transfer_txn.get()
gtxnsa ApplicationArgs 1                                                                                                                                                                                                                                                         //    (6806)                                                                     portal_transfer_txn.get().application_args[1]
frame_bury 1                                                                                                                                                                                                                                                                     //    (6809)                                                             101     abi_vaa.decode(vaa)
frame_dig -5                                                                                                                                                                                                                                                                     //    (6811)                                                             80      portal_transfer_txn.get()
gtxns GroupIndex                                                                                                                                                                                                                                                                 //    (6813)                                                                     portal_transfer_txn.get().group_index()
intc_1 // 1                                                                                                                                                                                                                                                                      //    (6815)                                                                     Int(1)
-                                                                                                                                                                                                                                                                                //    (6816)                                                                     portal_transfer_txn.get().group_index() - Int(1)
gtxnsa ApplicationArgs 1                                                                                                                                                                                                                                                         //    (6817)                                                             105     complete_transfer_txn.application_args[1]
frame_dig 1                                                                                                                                                                                                                                                                      //    (6820)                                                                     abi_vaa.get()
extract 2 0                                                                                                                                                                                                                                                                      //    (6822)
==                                                                                                                                                                                                                                                                               //    (6825)                                                                     complete_transfer_txn.application_args[1] == abi_vaa.get()
// VAAs do not match                                                                                                                                                                                                                                                             //            core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
assert                                                                                                                                                                                                                                                                           //    (6826)  contracts_unified/core/methods/wormhole_deposit.py         105     Assert(complete_transfer_txn.application_args[1] == abi_vaa.get(), comment='VAAs do not match')
frame_dig 1                                                                                                                                                                                                                                                                      //    (6827)  contracts_unified/library/wormhole.py                      58      def decode_wormhole_payload(vaa: abi.DynamicBytes, *, output: DecodedWormholePayload) -> Expr:
callsub decodewormholepayload_48                                                                                                                                                                                                                                                 //    (6829)  contracts_unified/core/methods/wormhole_deposit.py         108     decode_wormhole_payload(abi_vaa)
frame_bury 0                                                                                                                                                                                                                                                                     //    (6832)                                                                     decoded_payload.set(cast(abi.ReturnedValue, decode_wormhole_payload(abi_vaa)))
frame_dig 0                                                                                                                                                                                                                                                                      //    (6834)                                                             109     abi_amount.set(decoded_payload.amount)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6836)
extract_uint64                                                                                                                                                                                                                                                                   //    (6837)
frame_bury 2                                                                                                                                                                                                                                                                     //    (6838)
frame_dig 0                                                                                                                                                                                                                                                                      //    (6840)                                                             110     abi_repay_amount.set(decoded_payload.repay_amount)
pushint 40 // 40                                                                                                                                                                                                                                                                 //    (6842)
extract_uint64                                                                                                                                                                                                                                                                   //    (6844)
frame_bury 3                                                                                                                                                                                                                                                                     //    (6845)
frame_dig 0                                                                                                                                                                                                                                                                      //    (6847)                                                             111     abi_receiver.set(decoded_payload.receiver)
extract 8 32                                                                                                                                                                                                                                                                     //    (6849)
frame_bury 4                                                                                                                                                                                                                                                                     //    (6852)
frame_dig 4                                                                                                                                                                                                                                                                      //    (6854)                                                             115     abi_receiver.get()
frame_dig -4                                                                                                                                                                                                                                                                     //    (6856)                                                                     account.get()
==                                                                                                                                                                                                                                                                               //    (6858)                                                                     abi_receiver.get() == account.get()
pushint 114 // 114                                                                                                                                                                                                                                                               //    (6859)  contracts_unified/library/xassert.py                       18      Int(currentframe().f_back.f_lineno)
&&                                                                                                                                                                                                                                                                               //    (6861)                                                                     And(cond, Int(currentframe().f_back.f_lineno))
// Receiving user address mismatch                                                                                                                                                                                                                                               //            core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
assert                                                                                                                                                                                                                                                                           //    (6862)  contracts_unified/library/xassert.py                       18      Assert(And(cond, Int(currentframe().f_back.f_lineno)), comment=comment)
frame_dig -4                                                                                                                                                                                                                                                                     //    (6863)  contracts_unified/core/methods/deposit.py                  41      def inner_deposit_asset(account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, amount: Amount, instant_pool_move: Amount) -> Expr:
frame_dig -3                                                                                                                                                                                                                                                                     //    (6865)
frame_dig -2                                                                                                                                                                                                                                                                     //    (6867)
frame_dig 2                                                                                                                                                                                                                                                                      //    (6869)
frame_dig 3                                                                                                                                                                                                                                                                      //    (6871)
callsub innerdepositasset_34                                                                                                                                                                                                                                                     //    (6873)  contracts_unified/core/methods/wormhole_deposit.py         120     inner_deposit_asset(account, payload, instrument_id, abi_amount, abi_repay_amount)
retsub                                                                                                                                                                                                                                                                           //    (6876)                                                             41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
                                                                                                                                                                                                                                                                                 //            core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
// create_caster                                                                                                                                                                                                                                                                 //
createcaster_50:                                                                                                                                                                                                                                                                 //
proto 0 0                                                                                                                                                                                                                                                                        //    (6877)  contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6880)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 7                                                                                                                                                                                                                                                                           //    (6881)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6883)
txna ApplicationArgs 1                                                                                                                                                                                                                                                           //    (6884)
frame_bury 0                                                                                                                                                                                                                                                                     //    (6887)  contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
txna ApplicationArgs 2                                                                                                                                                                                                                                                           //    (6889)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 1                                                                                                                                                                                                                                                                     //    (6892)  contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
txna ApplicationArgs 3                                                                                                                                                                                                                                                           //    (6894)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 2                                                                                                                                                                                                                                                                     //    (6897)  contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
txna ApplicationArgs 4                                                                                                                                                                                                                                                           //    (6899)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 3                                                                                                                                                                                                                                                                     //    (6902)  contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
txna ApplicationArgs 5                                                                                                                                                                                                                                                           //    (6904)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 4                                                                                                                                                                                                                                                                     //    (6907)  contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
txna ApplicationArgs 6                                                                                                                                                                                                                                                           //    (6909)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 5                                                                                                                                                                                                                                                                     //    (6912)  contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
txna ApplicationArgs 7                                                                                                                                                                                                                                                           //    (6914)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 6                                                                                                                                                                                                                                                                     //    (6917)  contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
txna ApplicationArgs 8                                                                                                                                                                                                                                                           //    (6919)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 7                                                                                                                                                                                                                                                                     //    (6922)  contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
txna ApplicationArgs 9                                                                                                                                                                                                                                                           //    (6924)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
btoi                                                                                                                                                                                                                                                                             //    (6927)
frame_bury 8                                                                                                                                                                                                                                                                     //    (6928)  contracts_unified/core/methods/create.py                   16      def create(pricecaster_id: EncodedAppId, wormhole_token_bridge_id: EncodedAppId, liquidation_factors: EncodedLiquidationFactors, withdraw_buffer_address: abi.Address, signature_validator_address: abi.Address, operator_address: abi.Address, quant_address: abi.Address, fee_target_address: abi.Address, opup_budget: Amount) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (6930)
frame_dig 1                                                                                                                                                                                                                                                                      //    (6932)
frame_dig 2                                                                                                                                                                                                                                                                      //    (6934)
frame_dig 3                                                                                                                                                                                                                                                                      //    (6936)
frame_dig 4                                                                                                                                                                                                                                                                      //    (6938)
frame_dig 5                                                                                                                                                                                                                                                                      //    (6940)
frame_dig 6                                                                                                                                                                                                                                                                      //    (6942)
frame_dig 7                                                                                                                                                                                                                                                                      //    (6944)
frame_dig 8                                                                                                                                                                                                                                                                      //    (6946)
callsub create_33                                                                                                                                                                                                                                                                //    (6948)
retsub                                                                                                                                                                                                                                                                           //    (6951)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
                                                                                                                                                                                                                                                                                 //
// update_instrument_caster                                                                                                                                                                                                                                                      //
updateinstrumentcaster_51:                                                                                                                                                                                                                                                       //
proto 0 0                                                                                                                                                                                                                                                                        //    (6952)  contracts_unified/core/methods/update_instrument.py        53      def update_instrument(info: UpdateInstrumentInfo, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6955)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (6956)
txna ApplicationArgs 1                                                                                                                                                                                                                                                           //    (6957)
frame_bury 0                                                                                                                                                                                                                                                                     //    (6960)  contracts_unified/core/methods/update_instrument.py        53      def update_instrument(info: UpdateInstrumentInfo, opup_budget: Amount) -> Expr:
txna ApplicationArgs 2                                                                                                                                                                                                                                                           //    (6962)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
btoi                                                                                                                                                                                                                                                                             //    (6965)
frame_bury 1                                                                                                                                                                                                                                                                     //    (6966)  contracts_unified/core/methods/update_instrument.py        53      def update_instrument(info: UpdateInstrumentInfo, opup_budget: Amount) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (6968)
frame_dig 1                                                                                                                                                                                                                                                                      //    (6970)
callsub updateinstrument_43                                                                                                                                                                                                                                                      //    (6972)
retsub                                                                                                                                                                                                                                                                           //    (6975)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
                                                                                                                                                                                                                                                                                 //
// update_parameter_caster                                                                                                                                                                                                                                                       //
updateparametercaster_52:                                                                                                                                                                                                                                                        //
proto 0 0                                                                                                                                                                                                                                                                        //    (6976)  contracts_unified/core/methods/update_parameter.py         33      def update_parameter(key_to_update: abi.DynamicBytes, updated_value: abi.DynamicBytes) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (6979)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (6980)
txna ApplicationArgs 1                                                                                                                                                                                                                                                           //    (6981)
frame_bury 0                                                                                                                                                                                                                                                                     //    (6984)  contracts_unified/core/methods/update_parameter.py         33      def update_parameter(key_to_update: abi.DynamicBytes, updated_value: abi.DynamicBytes) -> Expr:
txna ApplicationArgs 2                                                                                                                                                                                                                                                           //    (6986)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 1                                                                                                                                                                                                                                                                     //    (6989)  contracts_unified/core/methods/update_parameter.py         33      def update_parameter(key_to_update: abi.DynamicBytes, updated_value: abi.DynamicBytes) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (6991)
frame_dig 1                                                                                                                                                                                                                                                                      //    (6993)
callsub updateparameter_44                                                                                                                                                                                                                                                       //    (6995)
retsub                                                                                                                                                                                                                                                                           //    (6998)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
                                                                                                                                                                                                                                                                                 //
// deposit_caster                                                                                                                                                                                                                                                                //
depositcaster_53:                                                                                                                                                                                                                                                                //
proto 0 0                                                                                                                                                                                                                                                                        //    (6999)  contracts_unified/core/methods/deposit.py                  71      def deposit(account: AccountAddress, deposit_txn: abi.Transaction, payload: DepositWord, instrument_id: InstrumentId, instant_pool_move: Amount, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (7002)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7003)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (7004)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7005)
dupn 2                                                                                                                                                                                                                                                                           //    (7006)
txna ApplicationArgs 1                                                                                                                                                                                                                                                           //    (7008)
frame_bury 0                                                                                                                                                                                                                                                                     //    (7011)  contracts_unified/core/methods/deposit.py                  71      def deposit(account: AccountAddress, deposit_txn: abi.Transaction, payload: DepositWord, instrument_id: InstrumentId, instant_pool_move: Amount, opup_budget: Amount) -> Expr:
txna ApplicationArgs 2                                                                                                                                                                                                                                                           //    (7013)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 2                                                                                                                                                                                                                                                                     //    (7016)  contracts_unified/core/methods/deposit.py                  71      def deposit(account: AccountAddress, deposit_txn: abi.Transaction, payload: DepositWord, instrument_id: InstrumentId, instant_pool_move: Amount, opup_budget: Amount) -> Expr:
txna ApplicationArgs 3                                                                                                                                                                                                                                                           //    (7018)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7021)
getbyte                                                                                                                                                                                                                                                                          //    (7022)
frame_bury 3                                                                                                                                                                                                                                                                     //    (7023)  contracts_unified/core/methods/deposit.py                  71      def deposit(account: AccountAddress, deposit_txn: abi.Transaction, payload: DepositWord, instrument_id: InstrumentId, instant_pool_move: Amount, opup_budget: Amount) -> Expr:
txna ApplicationArgs 4                                                                                                                                                                                                                                                           //    (7025)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
btoi                                                                                                                                                                                                                                                                             //    (7028)
frame_bury 4                                                                                                                                                                                                                                                                     //    (7029)  contracts_unified/core/methods/deposit.py                  71      def deposit(account: AccountAddress, deposit_txn: abi.Transaction, payload: DepositWord, instrument_id: InstrumentId, instant_pool_move: Amount, opup_budget: Amount) -> Expr:
txna ApplicationArgs 5                                                                                                                                                                                                                                                           //    (7031)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
btoi                                                                                                                                                                                                                                                                             //    (7034)
frame_bury 5                                                                                                                                                                                                                                                                     //    (7035)  contracts_unified/core/methods/deposit.py                  71      def deposit(account: AccountAddress, deposit_txn: abi.Transaction, payload: DepositWord, instrument_id: InstrumentId, instant_pool_move: Amount, opup_budget: Amount) -> Expr:
txn GroupIndex                                                                                                                                                                                                                                                                   //    (7037)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (7039)
-                                                                                                                                                                                                                                                                                //    (7040)
frame_bury 1                                                                                                                                                                                                                                                                     //    (7041)  contracts_unified/core/methods/deposit.py                  71      def deposit(account: AccountAddress, deposit_txn: abi.Transaction, payload: DepositWord, instrument_id: InstrumentId, instant_pool_move: Amount, opup_budget: Amount) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (7043)
frame_dig 1                                                                                                                                                                                                                                                                      //    (7045)
frame_dig 2                                                                                                                                                                                                                                                                      //    (7047)
frame_dig 3                                                                                                                                                                                                                                                                      //    (7049)
frame_dig 4                                                                                                                                                                                                                                                                      //    (7051)
frame_dig 5                                                                                                                                                                                                                                                                      //    (7053)
callsub deposit_35                                                                                                                                                                                                                                                               //    (7055)
retsub                                                                                                                                                                                                                                                                           //    (7058)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
                                                                                                                                                                                                                                                                                 //
// wormhole_deposit_caster                                                                                                                                                                                                                                                       //
wormholedepositcaster_54:                                                                                                                                                                                                                                                        //
proto 0 0                                                                                                                                                                                                                                                                        //    (7059)  contracts_unified/core/methods/wormhole_deposit.py         41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7062)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (7063)
dup                                                                                                                                                                                                                                                                              //    (7064)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7065)
dup                                                                                                                                                                                                                                                                              //    (7066)
txna ApplicationArgs 1                                                                                                                                                                                                                                                           //    (7067)
frame_bury 1                                                                                                                                                                                                                                                                     //    (7070)  contracts_unified/core/methods/wormhole_deposit.py         41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
txna ApplicationArgs 2                                                                                                                                                                                                                                                           //    (7072)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 2                                                                                                                                                                                                                                                                     //    (7075)  contracts_unified/core/methods/wormhole_deposit.py         41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
txna ApplicationArgs 3                                                                                                                                                                                                                                                           //    (7077)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7080)
getbyte                                                                                                                                                                                                                                                                          //    (7081)
frame_bury 3                                                                                                                                                                                                                                                                     //    (7082)  contracts_unified/core/methods/wormhole_deposit.py         41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
txna ApplicationArgs 4                                                                                                                                                                                                                                                           //    (7084)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
btoi                                                                                                                                                                                                                                                                             //    (7087)
frame_bury 4                                                                                                                                                                                                                                                                     //    (7088)  contracts_unified/core/methods/wormhole_deposit.py         41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
txn GroupIndex                                                                                                                                                                                                                                                                   //    (7090)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (7092)
-                                                                                                                                                                                                                                                                                //    (7093)
frame_bury 0                                                                                                                                                                                                                                                                     //    (7094)  contracts_unified/core/methods/wormhole_deposit.py         41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (7096)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
gtxns TypeEnum                                                                                                                                                                                                                                                                   //    (7098)  contracts_unified/core/methods/wormhole_deposit.py         41      def wormhole_deposit(portal_transfer_txn: abi.ApplicationCallTransaction, account: AccountAddress, payload: DepositWord, instrument_id: InstrumentId, opup_budget: Amount) -> Expr:
pushint 6 // appl                                                                                                                                                                                                                                                                //    (7100)
==                                                                                                                                                                                                                                                                               //    (7102)
assert                                                                                                                                                                                                                                                                           //    (7103)
frame_dig 0                                                                                                                                                                                                                                                                      //    (7104)
frame_dig 1                                                                                                                                                                                                                                                                      //    (7106)
frame_dig 2                                                                                                                                                                                                                                                                      //    (7108)
frame_dig 3                                                                                                                                                                                                                                                                      //    (7110)
frame_dig 4                                                                                                                                                                                                                                                                      //    (7112)
callsub wormholedeposit_49                                                                                                                                                                                                                                                       //    (7114)
retsub                                                                                                                                                                                                                                                                           //    (7117)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
                                                                                                                                                                                                                                                                                 //
// pool_move_caster                                                                                                                                                                                                                                                              //
poolmovecaster_55:                                                                                                                                                                                                                                                               //
proto 0 0                                                                                                                                                                                                                                                                        //    (7118)  contracts_unified/core/methods/pool_move.py                53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (7121)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 3                                                                                                                                                                                                                                                                           //    (7122)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7124)
txna ApplicationArgs 1                                                                                                                                                                                                                                                           //    (7125)
frame_bury 0                                                                                                                                                                                                                                                                     //    (7128)  contracts_unified/core/methods/pool_move.py                53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txna ApplicationArgs 2                                                                                                                                                                                                                                                           //    (7130)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 1                                                                                                                                                                                                                                                                     //    (7133)  contracts_unified/core/methods/pool_move.py                53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txna ApplicationArgs 3                                                                                                                                                                                                                                                           //    (7135)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 2                                                                                                                                                                                                                                                                     //    (7138)  contracts_unified/core/methods/pool_move.py                53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txna ApplicationArgs 4                                                                                                                                                                                                                                                           //    (7140)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 3                                                                                                                                                                                                                                                                     //    (7143)  contracts_unified/core/methods/pool_move.py                53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txna ApplicationArgs 5                                                                                                                                                                                                                                                           //    (7145)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
btoi                                                                                                                                                                                                                                                                             //    (7148)
frame_bury 4                                                                                                                                                                                                                                                                     //    (7149)  contracts_unified/core/methods/pool_move.py                53      def pool_move(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (7151)
frame_dig 1                                                                                                                                                                                                                                                                      //    (7153)
frame_dig 2                                                                                                                                                                                                                                                                      //    (7155)
frame_dig 3                                                                                                                                                                                                                                                                      //    (7157)
frame_dig 4                                                                                                                                                                                                                                                                      //    (7159)
callsub poolmove_39                                                                                                                                                                                                                                                              //    (7161)
retsub                                                                                                                                                                                                                                                                           //    (7164)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
                                                                                                                                                                                                                                                                                 //
// add_order_caster                                                                                                                                                                                                                                                              //
addordercaster_56:                                                                                                                                                                                                                                                               //
proto 0 0                                                                                                                                                                                                                                                                        //    (7165)  contracts_unified/core/methods/settle.py                   60      def add_order(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (7168)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 2                                                                                                                                                                                                                                                                           //    (7169)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7171)
txna ApplicationArgs 1                                                                                                                                                                                                                                                           //    (7172)
frame_bury 0                                                                                                                                                                                                                                                                     //    (7175)  contracts_unified/core/methods/settle.py                   60      def add_order(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, opup_budget: Amount) -> Expr:
txna ApplicationArgs 2                                                                                                                                                                                                                                                           //    (7177)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 1                                                                                                                                                                                                                                                                     //    (7180)  contracts_unified/core/methods/settle.py                   60      def add_order(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, opup_budget: Amount) -> Expr:
txna ApplicationArgs 3                                                                                                                                                                                                                                                           //    (7182)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 2                                                                                                                                                                                                                                                                     //    (7185)  contracts_unified/core/methods/settle.py                   60      def add_order(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, opup_budget: Amount) -> Expr:
txna ApplicationArgs 4                                                                                                                                                                                                                                                           //    (7187)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
btoi                                                                                                                                                                                                                                                                             //    (7190)
frame_bury 3                                                                                                                                                                                                                                                                     //    (7191)  contracts_unified/core/methods/settle.py                   60      def add_order(account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, opup_budget: Amount) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (7193)
frame_dig 1                                                                                                                                                                                                                                                                      //    (7195)
frame_dig 2                                                                                                                                                                                                                                                                      //    (7197)
frame_dig 3                                                                                                                                                                                                                                                                      //    (7199)
callsub addorder_41                                                                                                                                                                                                                                                              //    (7201)
retsub                                                                                                                                                                                                                                                                           //    (7204)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
                                                                                                                                                                                                                                                                                 //
// settle_caster                                                                                                                                                                                                                                                                 //
settlecaster_57:                                                                                                                                                                                                                                                                 //
proto 0 0                                                                                                                                                                                                                                                                        //    (7205)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7208)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (7209)
dupn 3                                                                                                                                                                                                                                                                           //    (7210)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7212)
txna ApplicationArgs 1                                                                                                                                                                                                                                                           //    (7213)
frame_bury 1                                                                                                                                                                                                                                                                     //    (7216)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
txna ApplicationArgs 2                                                                                                                                                                                                                                                           //    (7218)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 2                                                                                                                                                                                                                                                                     //    (7221)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
txna ApplicationArgs 3                                                                                                                                                                                                                                                           //    (7223)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 3                                                                                                                                                                                                                                                                     //    (7226)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
txna ApplicationArgs 4                                                                                                                                                                                                                                                           //    (7228)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 4                                                                                                                                                                                                                                                                     //    (7231)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
txna ApplicationArgs 5                                                                                                                                                                                                                                                           //    (7233)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
btoi                                                                                                                                                                                                                                                                             //    (7236)
frame_bury 5                                                                                                                                                                                                                                                                     //    (7237)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
txn GroupIndex                                                                                                                                                                                                                                                                   //    (7239)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (7241)
-                                                                                                                                                                                                                                                                                //    (7242)
frame_bury 0                                                                                                                                                                                                                                                                     //    (7243)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (7245)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
gtxns TypeEnum                                                                                                                                                                                                                                                                   //    (7247)  contracts_unified/core/methods/settle.py                   102     def settle(add_order_txn: abi.ApplicationCallTransaction, buy_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, server_args: SettleExtraData, opup_budget: Amount) -> Expr:
pushint 6 // appl                                                                                                                                                                                                                                                                //    (7249)
==                                                                                                                                                                                                                                                                               //    (7251)
assert                                                                                                                                                                                                                                                                           //    (7252)
frame_dig 0                                                                                                                                                                                                                                                                      //    (7253)
frame_dig 1                                                                                                                                                                                                                                                                      //    (7255)
frame_dig 2                                                                                                                                                                                                                                                                      //    (7257)
frame_dig 3                                                                                                                                                                                                                                                                      //    (7259)
frame_dig 4                                                                                                                                                                                                                                                                      //    (7261)
frame_dig 5                                                                                                                                                                                                                                                                      //    (7263)
callsub settle_42                                                                                                                                                                                                                                                                //    (7265)
retsub                                                                                                                                                                                                                                                                           //    (7268)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
                                                                                                                                                                                                                                                                                 //
// withdraw_caster                                                                                                                                                                                                                                                               //
withdrawcaster_58:                                                                                                                                                                                                                                                               //
proto 0 0                                                                                                                                                                                                                                                                        //    (7269)  contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (7272)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 3                                                                                                                                                                                                                                                                           //    (7273)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7275)
txna ApplicationArgs 1                                                                                                                                                                                                                                                           //    (7276)
frame_bury 0                                                                                                                                                                                                                                                                     //    (7279)  contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
txna ApplicationArgs 2                                                                                                                                                                                                                                                           //    (7281)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 1                                                                                                                                                                                                                                                                     //    (7284)  contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
txna ApplicationArgs 3                                                                                                                                                                                                                                                           //    (7286)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 2                                                                                                                                                                                                                                                                     //    (7289)  contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
txna ApplicationArgs 4                                                                                                                                                                                                                                                           //    (7291)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 3                                                                                                                                                                                                                                                                     //    (7294)  contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
txna ApplicationArgs 5                                                                                                                                                                                                                                                           //    (7296)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
btoi                                                                                                                                                                                                                                                                             //    (7299)
frame_bury 4                                                                                                                                                                                                                                                                     //    (7300)  contracts_unified/core/methods/withdraw.py                 136     def withdraw(account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, server_params: WithdrawExtraData, opup_budget: Amount) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (7302)
frame_dig 1                                                                                                                                                                                                                                                                      //    (7304)
frame_dig 2                                                                                                                                                                                                                                                                      //    (7306)
frame_dig 3                                                                                                                                                                                                                                                                      //    (7308)
frame_dig 4                                                                                                                                                                                                                                                                      //    (7310)
callsub withdraw_47                                                                                                                                                                                                                                                              //    (7312)
retsub                                                                                                                                                                                                                                                                           //    (7315)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
                                                                                                                                                                                                                                                                                 //
// portal_transfer_caster                                                                                                                                                                                                                                                        //
portaltransfercaster_59:                                                                                                                                                                                                                                                         //
proto 0 0                                                                                                                                                                                                                                                                        //    (7316)  contracts_unified/core/methods/portal_transfer.py                  def portal_transfer(vaa: abi.DynamicBytes, *, output: abi.DynamicBytes) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (7319)  core_map.py                                                        CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dup                                                                                                                                                                                                                                                                              //    (7320)
txna ApplicationArgs 1                                                                                                                                                                                                                                                           //    (7321)
frame_bury 1                                                                                                                                                                                                                                                                     //    (7324)  contracts_unified/core/methods/portal_transfer.py                  def portal_transfer(vaa: abi.DynamicBytes, *, output: abi.DynamicBytes) -> Expr:
frame_dig 1                                                                                                                                                                                                                                                                      //    (7326)
callsub portaltransfer_40                                                                                                                                                                                                                                                        //    (7328)  core_map.py                                                        CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 0                                                                                                                                                                                                                                                                     //    (7331)  contracts_unified/core/methods/portal_transfer.py                  def portal_transfer(vaa: abi.DynamicBytes, *, output: abi.DynamicBytes) -> Expr:
pushbytes 0x151f7c75 // 0x151f7c75                                                                                                                                                                                                                                               //    (7333)  core_map.py                                                        CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_dig 0                                                                                                                                                                                                                                                                      //    (7339)  contracts_unified/core/methods/portal_transfer.py                  def portal_transfer(vaa: abi.DynamicBytes, *, output: abi.DynamicBytes) -> Expr:
concat                                                                                                                                                                                                                                                                           //    (7341)
log                                                                                                                                                                                                                                                                              //    (7342)
retsub                                                                                                                                                                                                                                                                           //    (7343)  core_map.py                                                        CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
                                                                                                                                                                                                                                                                                 //
// account_move_caster                                                                                                                                                                                                                                                           //
accountmovecaster_60:                                                                                                                                                                                                                                                            //
proto 0 0                                                                                                                                                                                                                                                                        //    (7344)  contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (7347)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 3                                                                                                                                                                                                                                                                           //    (7348)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7350)
txna ApplicationArgs 1                                                                                                                                                                                                                                                           //    (7351)
frame_bury 0                                                                                                                                                                                                                                                                     //    (7354)  contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txna ApplicationArgs 2                                                                                                                                                                                                                                                           //    (7356)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 1                                                                                                                                                                                                                                                                     //    (7359)  contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txna ApplicationArgs 3                                                                                                                                                                                                                                                           //    (7361)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 2                                                                                                                                                                                                                                                                     //    (7364)  contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txna ApplicationArgs 4                                                                                                                                                                                                                                                           //    (7366)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 3                                                                                                                                                                                                                                                                     //    (7369)  contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txna ApplicationArgs 5                                                                                                                                                                                                                                                           //    (7371)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
btoi                                                                                                                                                                                                                                                                             //    (7374)
frame_bury 4                                                                                                                                                                                                                                                                     //    (7375)  contracts_unified/core/methods/account_move.py             30      def account_move(source_account: AccountAddress, user_op: OperationMetaData, delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (7377)
frame_dig 1                                                                                                                                                                                                                                                                      //    (7379)
frame_dig 2                                                                                                                                                                                                                                                                      //    (7381)
frame_dig 3                                                                                                                                                                                                                                                                      //    (7383)
frame_dig 4                                                                                                                                                                                                                                                                      //    (7385)
callsub accountmove_28                                                                                                                                                                                                                                                           //    (7387)
retsub                                                                                                                                                                                                                                                                           //    (7390)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
                                                                                                                                                                                                                                                                                 //
// liquidate_caster                                                                                                                                                                                                                                                              //
liquidatecaster_61:                                                                                                                                                                                                                                                              //
proto 0 0                                                                                                                                                                                                                                                                        //    (7391)  contracts_unified/core/methods/liquidate.py                89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (7394)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
dupn 3                                                                                                                                                                                                                                                                           //    (7395)
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7397)
txna ApplicationArgs 1                                                                                                                                                                                                                                                           //    (7398)
frame_bury 0                                                                                                                                                                                                                                                                     //    (7401)  contracts_unified/core/methods/liquidate.py                89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txna ApplicationArgs 2                                                                                                                                                                                                                                                           //    (7403)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 1                                                                                                                                                                                                                                                                     //    (7406)  contracts_unified/core/methods/liquidate.py                89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txna ApplicationArgs 3                                                                                                                                                                                                                                                           //    (7408)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 2                                                                                                                                                                                                                                                                     //    (7411)  contracts_unified/core/methods/liquidate.py                89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txna ApplicationArgs 4                                                                                                                                                                                                                                                           //    (7413)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
frame_bury 3                                                                                                                                                                                                                                                                     //    (7416)  contracts_unified/core/methods/liquidate.py                89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
txna ApplicationArgs 5                                                                                                                                                                                                                                                           //    (7418)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
btoi                                                                                                                                                                                                                                                                             //    (7421)
frame_bury 4                                                                                                                                                                                                                                                                     //    (7422)  contracts_unified/core/methods/liquidate.py                89      def liquidate(liquidator_account: AccountAddress, user_op: OperationMetaData, _delegation_chain: DelegationChain, _server_data: abi.DynamicBytes, opup_budget: Amount) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (7424)
frame_dig 1                                                                                                                                                                                                                                                                      //    (7426)
frame_dig 2                                                                                                                                                                                                                                                                      //    (7428)
frame_dig 3                                                                                                                                                                                                                                                                      //    (7430)
frame_dig 4                                                                                                                                                                                                                                                                      //    (7432)
callsub liquidate_38                                                                                                                                                                                                                                                             //    (7434)
retsub                                                                                                                                                                                                                                                                           //    (7437)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
                                                                                                                                                                                                                                                                                 //
// clean_orders_caster                                                                                                                                                                                                                                                           //
cleanorderscaster_62:                                                                                                                                                                                                                                                            //
proto 0 0                                                                                                                                                                                                                                                                        //    (7438)  contracts_unified/core/methods/clean_orders.py             15      def clean_orders(orders: abi.DynamicArray[OrderData]) -> Expr:
bytec_0 // ""                                                                                                                                                                                                                                                                    //    (7441)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
txna ApplicationArgs 1                                                                                                                                                                                                                                                           //    (7442)
frame_bury 0                                                                                                                                                                                                                                                                     //    (7445)  contracts_unified/core/methods/clean_orders.py             15      def clean_orders(orders: abi.DynamicArray[OrderData]) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (7447)
callsub cleanorders_32                                                                                                                                                                                                                                                           //    (7449)
retsub                                                                                                                                                                                                                                                                           //    (7452)  core_map.py                                                11      CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
                                                                                                                                                                                                                                                                                 //
// fund_mbr_caster                                                                                                                                                                                                                                                               //
fundmbrcaster_63:                                                                                                                                                                                                                                                                //
proto 0 0                                                                                                                                                                                                                                                                        //    (7453)  contracts_unified/core/methods/fund_mbr.py                         def fund_mbr(payment_txn: abi.PaymentTransaction) -> Expr:
intc_0 // 0                                                                                                                                                                                                                                                                      //    (7456)  core_map.py                                                        CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
txn GroupIndex                                                                                                                                                                                                                                                                   //    (7457)
intc_1 // 1                                                                                                                                                                                                                                                                      //    (7459)
-                                                                                                                                                                                                                                                                                //    (7460)
frame_bury 0                                                                                                                                                                                                                                                                     //    (7461)  contracts_unified/core/methods/fund_mbr.py                         def fund_mbr(payment_txn: abi.PaymentTransaction) -> Expr:
frame_dig 0                                                                                                                                                                                                                                                                      //    (7463)  core_map.py                                                        CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
gtxns TypeEnum                                                                                                                                                                                                                                                                   //    (7465)  contracts_unified/core/methods/fund_mbr.py                         def fund_mbr(payment_txn: abi.PaymentTransaction) -> Expr:
intc_1 // pay                                                                                                                                                                                                                                                                    //    (7467)
==                                                                                                                                                                                                                                                                               //    (7468)
assert                                                                                                                                                                                                                                                                           //    (7469)
frame_dig 0                                                                                                                                                                                                                                                                      //    (7470)
callsub fundmbr_36                                                                                                                                                                                                                                                               //    (7472)
retsub                                                                                                                                                                                                                                                                           //    (7475)  core_map.py                                                        CORE_ROUTER.compile(version=9, assemble_constants=True, optimize=OptimizeOptions(scratch_slots=True), with_sourcemaps=True, annotate_teal=True, pcs_in_sourcemap=True, annotate_teal_headers=True, annotate_teal_concise=False)
